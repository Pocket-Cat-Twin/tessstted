2025-09-17 13:11:22,820 - main - INFO - === Market Monitoring System Starting ===
2025-09-17 13:11:22,820 - main - INFO - Configuration loaded from: config.json
2025-09-17 13:11:22,821 - main - INFO - Initializing file utilities...
2025-09-17 13:11:22,821 - main - INFO - Initializing database...
2025-09-17 13:11:23,016 - core.database_manager - INFO - Database schema initialized successfully
2025-09-17 13:11:23,017 - main - INFO - Initializing image processor...
2025-09-17 13:11:23,017 - main - INFO - Initializing OCR client...
2025-09-17 13:11:23,018 - core.ocr_client - INFO - OCR client initialized with api_key auth, ocr format
2025-09-17 13:11:23,018 - main - INFO - Initializing OCR queue...
2025-09-17 13:11:23,019 - main - INFO - Initializing text parser...
2025-09-17 13:11:23,023 - core.text_parser - INFO - Compiled 10 parsing patterns
2025-09-17 13:11:23,023 - main - INFO - Initializing monitoring engine...
2025-09-17 13:11:23,023 - main - INFO - Initializing screenshot capture...
2025-09-17 13:11:23,024 - main - INFO - Initializing task scheduler...
2025-09-17 13:11:23,040 - main - INFO - Performing system health checks...
2025-09-17 13:11:23,041 - main - INFO - Checking database connectivity...
2025-09-17 13:11:23,041 - main - INFO - Database check passed - status summary: {}
2025-09-17 13:11:23,042 - main - INFO - Checking OCR API connectivity...
2025-09-17 13:11:24,405 - core.ocr_client - INFO - OCR API connection test successful
2025-09-17 13:11:24,405 - main - INFO - OCR API check passed
2025-09-17 13:11:24,406 - main - INFO - Checking file system permissions...
2025-09-17 13:11:24,408 - main - INFO - File system check passed
2025-09-17 13:11:24,408 - main - INFO - Checking configuration completeness...
2025-09-17 13:11:24,409 - main - INFO - Configuration check passed - 3 enabled hotkeys
2025-09-17 13:11:24,409 - main - INFO - System initialization completed successfully
2025-09-17 13:11:24,409 - main - INFO - Starting Market Monitoring System...
2025-09-17 13:11:24,410 - main - INFO - Starting OCR processing queue...
2025-09-17 13:11:24,412 - core.ocr_queue - INFO - OCR queue started with 2 workers
2025-09-17 13:11:24,412 - main - INFO - Starting screenshot capture system...
2025-09-17 13:11:24,412 - core.screenshot_capture - ERROR - Failed to clear hotkey handlers: '_KeyboardListener' object has no attribute 'blocking_hotkeys'
2025-09-17 13:11:24,485 - core.screenshot_capture - INFO - Registered hotkey F1 for Полная обработка товаров (цена, количество)
2025-09-17 13:11:24,485 - core.screenshot_capture - INFO - Registered hotkey F2 for Минимальная обработка связок продавец-товар
2025-09-17 13:11:24,486 - core.screenshot_capture - INFO - Registered hotkey F3 for Дополнительная полная обработка товаров
2025-09-17 13:11:24,486 - core.screenshot_capture - INFO - Registered 3 global hotkeys
2025-09-17 13:11:24,487 - core.screenshot_capture - INFO - Screenshot capture system started successfully
2025-09-17 13:11:24,487 - main - INFO - Starting task scheduler...
2025-09-17 13:11:24,487 - utils.scheduler - INFO - Starting task scheduler
2025-09-17 13:11:24,488 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,488 - utils.scheduler - INFO - Scheduled F1 processing every 30s
2025-09-17 13:11:24,489 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,489 - utils.scheduler - INFO - Scheduled F2 processing every 60s
2025-09-17 13:11:24,489 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,490 - utils.scheduler - INFO - Scheduled F3 processing every 45s
2025-09-17 13:11:24,490 - utils.scheduler - INFO - Setup 3 hotkey processing timers
2025-09-17 13:11:24,490 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,491 - utils.scheduler - INFO - Scheduled status check cycle every 10s
2025-09-17 13:11:24,529 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,530 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:11:24,531 - utils.scheduler - INFO - Scheduled maintenance tasks
2025-09-17 13:11:24,590 - apscheduler.scheduler - INFO - Added job "Process F1 screenshots" to job store "default"
2025-09-17 13:11:24,591 - apscheduler.scheduler - INFO - Added job "Process F2 screenshots" to job store "default"
2025-09-17 13:11:24,591 - apscheduler.scheduler - INFO - Added job "Process F3 screenshots" to job store "default"
2025-09-17 13:11:24,592 - apscheduler.scheduler - INFO - Added job "Status check and transition cycle" to job store "default"
2025-09-17 13:11:24,592 - apscheduler.scheduler - INFO - Added job "Daily maintenance cleanup" to job store "default"
2025-09-17 13:11:24,593 - apscheduler.scheduler - INFO - Added job "Weekly database maintenance" to job store "default"
2025-09-17 13:11:24,593 - apscheduler.scheduler - INFO - Scheduler started
2025-09-17 13:11:24,593 - utils.scheduler - INFO - Scheduler started with 6 jobs:
2025-09-17 13:11:24,594 - utils.scheduler - INFO -   - Status check and transition cycle (next run: 2025-09-17 13:11:34)
2025-09-17 13:11:24,594 - utils.scheduler - INFO -   - Process F1 screenshots (next run: 2025-09-17 13:11:54)
2025-09-17 13:11:24,594 - utils.scheduler - INFO -   - Process F3 screenshots (next run: 2025-09-17 13:12:09)
2025-09-17 13:11:24,595 - utils.scheduler - INFO -   - Process F2 screenshots (next run: 2025-09-17 13:12:24)
2025-09-17 13:11:24,595 - utils.scheduler - INFO -   - Daily maintenance cleanup (next run: 2025-09-18 02:00:00)
2025-09-17 13:11:24,596 - utils.scheduler - INFO -   - Weekly database maintenance (next run: 2025-09-21 03:00:00)
2025-09-17 13:11:24,596 - main - INFO - System started successfully with configuration: {'config_file': 'config.json', 'last_modified': '2025-09-17T13:11:17.253616', 'hotkeys': {'total': 4, 'enabled': 3, 'disabled': 1}, 'yandex_ocr': {'configured': True, 'api_url': 'https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText'}, 'monitoring': {'check_interval': 10, 'cleanup_days': 30}, 'paths': {'database': 'database\\market_data.db', 'logs': 'data\\logs'}}
2025-09-17 13:11:24,596 - main - INFO - Market Monitoring System is running. Press Ctrl+C to stop.
2025-09-17 13:11:34,505 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:11:44 MSK)" (scheduled at 2025-09-17 13:11:34.490615+03:00)
2025-09-17 13:11:34,545 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:11:34,546 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:11:44 MSK)" executed successfully
2025-09-17 13:11:44,493 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:11:54 MSK)" (scheduled at 2025-09-17 13:11:44.490615+03:00)
2025-09-17 13:11:44,494 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:11:44,494 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:11:54 MSK)" executed successfully
2025-09-17 13:11:54,504 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:12:24 MSK)" (scheduled at 2025-09-17 13:11:54.488614+03:00)
2025-09-17 13:11:54,504 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:04 MSK)" (scheduled at 2025-09-17 13:11:54.490615+03:00)
2025-09-17 13:11:54,506 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:12:24 MSK)" executed successfully
2025-09-17 13:11:54,506 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:11:54,507 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:04 MSK)" executed successfully
2025-09-17 13:12:04,503 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:14 MSK)" (scheduled at 2025-09-17 13:12:04.490615+03:00)
2025-09-17 13:12:04,504 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:04,504 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:14 MSK)" executed successfully
2025-09-17 13:12:09,499 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:12:54 MSK)" (scheduled at 2025-09-17 13:12:09.489615+03:00)
2025-09-17 13:12:09,500 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:12:54 MSK)" executed successfully
2025-09-17 13:12:14,497 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:24 MSK)" (scheduled at 2025-09-17 13:12:14.490615+03:00)
2025-09-17 13:12:14,498 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:14,498 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:24 MSK)" executed successfully
2025-09-17 13:12:17,044 - core.screenshot_capture - INFO - Hotkey F2 pressed - capturing screenshot
2025-09-17 13:12:17,699 - core.screenshot_capture - INFO - Screenshot captured successfully: F2_20250917_131217_044_bd371579.png (700x500) in 0.654s
2025-09-17 13:12:18,035 - core.screenshot_capture - INFO - Hotkey F2 pressed - capturing screenshot
2025-09-17 13:12:18,242 - core.screenshot_capture - INFO - Screenshot captured successfully: F2_20250917_131218_036_0248d764.png (700x500) in 0.206s
2025-09-17 13:12:24,492 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:12:54 MSK)" (scheduled at 2025-09-17 13:12:24.488614+03:00)
2025-09-17 13:12:24,492 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:13:24 MSK)" (scheduled at 2025-09-17 13:12:24.489615+03:00)
2025-09-17 13:12:24,492 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:34 MSK)" (scheduled at 2025-09-17 13:12:24.490615+03:00)
2025-09-17 13:12:24,494 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:12:54 MSK)" executed successfully
2025-09-17 13:12:24,494 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 13:12:24,495 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:24,495 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:34 MSK)" executed successfully
2025-09-17 13:12:24,645 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_131224_561_10ea582c.jpg (700x1000) in 0.150s
2025-09-17 13:12:24,649 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 13:12:24,650 - core.database_manager - INFO - Created OCR session 1 for hotkey F2
2025-09-17 13:12:24,651 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758103944_fccb619a for F2 (session 1)
2025-09-17 13:12:24,651 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758103944_fccb619a (attempt 1)
2025-09-17 13:12:24,651 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:13:24 MSK)" executed successfully
2025-09-17 13:12:24,652 - core.ocr_client - INFO - Starting OCR request 151fd41b for merged_20250917_131224_561_10ea582c.jpg (0.1MB)
2025-09-17 13:12:24,652 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:12:25,263 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 151fd41b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:12:25,264 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:12:26,437 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 151fd41b: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d87e990f-91af-4539-9afd-0a6797ef1944"
  }
 ]
}

2025-09-17 13:12:26,438 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:12:26,438 - core.ocr_queue - ERROR - Job ocr_F2_1758103944_fccb619a failed on attempt 1: OCR processing returned no result
2025-09-17 13:12:26,438 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758103944_fccb619a for retry in 2s
2025-09-17 13:12:28,440 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758103944_fccb619a (attempt 2)
2025-09-17 13:12:28,440 - core.ocr_client - INFO - Starting OCR request f0894295 for merged_20250917_131224_561_10ea582c.jpg (0.1MB)
2025-09-17 13:12:28,441 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:12:28,565 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f0894295: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:12:28,565 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:12:28,638 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f0894295: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f3a0e561-14a2-4de4-8b7c-2a7719aea0a0"
  }
 ]
}

2025-09-17 13:12:28,639 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:12:28,640 - core.ocr_queue - ERROR - Job ocr_F2_1758103944_fccb619a failed on attempt 2: OCR processing returned no result
2025-09-17 13:12:28,640 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758103944_fccb619a for retry in 4s
2025-09-17 13:12:32,642 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758103944_fccb619a (attempt 3)
2025-09-17 13:12:32,642 - core.ocr_client - INFO - Starting OCR request b179809e for merged_20250917_131224_561_10ea582c.jpg (0.1MB)
2025-09-17 13:12:32,643 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:12:32,794 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b179809e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:12:32,795 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:12:32,892 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b179809e: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "4fdb0708-6e6a-4aed-82f2-098678f04ca3"
  }
 ]
}

2025-09-17 13:12:32,893 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:12:32,894 - core.ocr_queue - ERROR - Job ocr_F2_1758103944_fccb619a failed on attempt 3: OCR processing returned no result
2025-09-17 13:12:32,894 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758103944_fccb619a)
2025-09-17 13:12:32,904 - core.ocr_queue - ERROR - Job ocr_F2_1758103944_fccb619a permanently failed: OCR processing returned no result
2025-09-17 13:12:34,505 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:44 MSK)" (scheduled at 2025-09-17 13:12:34.490615+03:00)
2025-09-17 13:12:34,506 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:34,506 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:44 MSK)" executed successfully
2025-09-17 13:12:44,493 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:54 MSK)" (scheduled at 2025-09-17 13:12:44.490615+03:00)
2025-09-17 13:12:44,494 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:44,494 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:12:54 MSK)" executed successfully
2025-09-17 13:12:54,496 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:13:24 MSK)" (scheduled at 2025-09-17 13:12:54.488614+03:00)
2025-09-17 13:12:54,496 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:13:39 MSK)" (scheduled at 2025-09-17 13:12:54.489615+03:00)
2025-09-17 13:12:54,496 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:13:04 MSK)" (scheduled at 2025-09-17 13:12:54.490615+03:00)
2025-09-17 13:12:54,497 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:13:24 MSK)" executed successfully
2025-09-17 13:12:54,497 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:12:54,497 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:13:39 MSK)" executed successfully
2025-09-17 13:12:54,498 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:13:04 MSK)" executed successfully
2025-09-17 13:12:57,808 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 13:12:57,809 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 13:12:57,809 - main - INFO - Stopping task scheduler...
2025-09-17 13:12:57,810 - utils.scheduler - INFO - Stopping task scheduler
2025-09-17 13:12:57,810 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-09-17 13:12:57,811 - utils.scheduler - INFO - Task scheduler stopped
2025-09-17 13:12:57,811 - main - INFO - Stopping screenshot capture...
2025-09-17 13:12:57,812 - core.screenshot_capture - ERROR - Error closing MSS instance: '_thread._local' object has no attribute 'bmp'
2025-09-17 13:12:57,812 - core.screenshot_capture - INFO - Screenshot capture system stopped
2025-09-17 13:12:57,812 - main - INFO - Stopping OCR queue...
2025-09-17 13:12:57,813 - core.ocr_queue - INFO - Stopping OCR queue...
2025-09-17 13:12:58,389 - core.ocr_queue - INFO - OCR queue stopped
2025-09-17 13:12:58,389 - main - INFO - Closing OCR client...
2025-09-17 13:12:58,392 - core.ocr_client - INFO - OCR client closed
2025-09-17 13:12:58,392 - main - INFO - Closing database connections...
2025-09-17 13:12:58,393 - main - INFO - System shutdown completed
2025-09-17 13:25:36,802 - main - INFO - === Market Monitoring System Starting ===
2025-09-17 13:25:36,803 - main - INFO - Configuration loaded from: config.json
2025-09-17 13:25:36,803 - main - INFO - Initializing file utilities...
2025-09-17 13:25:36,803 - main - INFO - Initializing database...
2025-09-17 13:25:36,806 - core.database_manager - INFO - Database schema initialized successfully
2025-09-17 13:25:36,806 - main - INFO - Initializing image processor...
2025-09-17 13:25:36,807 - main - INFO - Initializing OCR client...
2025-09-17 13:25:36,807 - core.ocr_client - INFO - OCR client initialized with api_key auth, ocr format
2025-09-17 13:25:36,808 - main - INFO - Initializing OCR queue...
2025-09-17 13:25:36,808 - main - INFO - Initializing text parser...
2025-09-17 13:25:36,811 - core.text_parser - INFO - Compiled 10 parsing patterns
2025-09-17 13:25:36,812 - main - INFO - Initializing monitoring engine...
2025-09-17 13:25:36,812 - main - INFO - Initializing screenshot capture...
2025-09-17 13:25:36,812 - main - INFO - Initializing task scheduler...
2025-09-17 13:25:36,815 - main - INFO - Performing system health checks...
2025-09-17 13:25:36,816 - main - INFO - Checking database connectivity...
2025-09-17 13:25:36,816 - main - INFO - Database check passed - status summary: {}
2025-09-17 13:25:36,816 - main - INFO - Checking OCR API connectivity...
2025-09-17 13:25:37,571 - core.ocr_client - INFO - OCR API connection test successful
2025-09-17 13:25:37,571 - main - INFO - OCR API check passed
2025-09-17 13:25:37,572 - main - INFO - Checking file system permissions...
2025-09-17 13:25:37,574 - main - INFO - File system check passed
2025-09-17 13:25:37,574 - main - INFO - Checking configuration completeness...
2025-09-17 13:25:37,574 - main - INFO - Configuration check passed - 3 enabled hotkeys
2025-09-17 13:25:37,575 - main - INFO - System initialization completed successfully
2025-09-17 13:25:37,575 - main - INFO - Starting Market Monitoring System...
2025-09-17 13:25:37,575 - main - INFO - Starting OCR processing queue...
2025-09-17 13:25:37,576 - core.ocr_queue - INFO - OCR queue started with 2 workers
2025-09-17 13:25:37,577 - main - INFO - Starting screenshot capture system...
2025-09-17 13:25:37,577 - core.screenshot_capture - ERROR - Failed to clear hotkey handlers: '_KeyboardListener' object has no attribute 'blocking_hotkeys'
2025-09-17 13:25:37,648 - core.screenshot_capture - INFO - Registered hotkey F1 for Полная обработка товаров (цена, количество)
2025-09-17 13:25:37,648 - core.screenshot_capture - INFO - Registered hotkey F2 for Минимальная обработка связок продавец-товар
2025-09-17 13:25:37,649 - core.screenshot_capture - INFO - Registered hotkey F3 for Дополнительная полная обработка товаров
2025-09-17 13:25:37,649 - core.screenshot_capture - INFO - Registered 3 global hotkeys
2025-09-17 13:25:37,650 - core.screenshot_capture - INFO - Screenshot capture system started successfully
2025-09-17 13:25:37,650 - main - INFO - Starting task scheduler...
2025-09-17 13:25:37,651 - utils.scheduler - INFO - Starting task scheduler
2025-09-17 13:25:37,651 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,651 - utils.scheduler - INFO - Scheduled F1 processing every 30s
2025-09-17 13:25:37,652 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,652 - utils.scheduler - INFO - Scheduled F2 processing every 60s
2025-09-17 13:25:37,653 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,653 - utils.scheduler - INFO - Scheduled F3 processing every 45s
2025-09-17 13:25:37,653 - utils.scheduler - INFO - Setup 3 hotkey processing timers
2025-09-17 13:25:37,654 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,654 - utils.scheduler - INFO - Scheduled status check cycle every 10s
2025-09-17 13:25:37,655 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,656 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 13:25:37,656 - utils.scheduler - INFO - Scheduled maintenance tasks
2025-09-17 13:25:37,657 - apscheduler.scheduler - INFO - Added job "Process F1 screenshots" to job store "default"
2025-09-17 13:25:37,658 - apscheduler.scheduler - INFO - Added job "Process F2 screenshots" to job store "default"
2025-09-17 13:25:37,658 - apscheduler.scheduler - INFO - Added job "Process F3 screenshots" to job store "default"
2025-09-17 13:25:37,658 - apscheduler.scheduler - INFO - Added job "Status check and transition cycle" to job store "default"
2025-09-17 13:25:37,659 - apscheduler.scheduler - INFO - Added job "Daily maintenance cleanup" to job store "default"
2025-09-17 13:25:37,659 - apscheduler.scheduler - INFO - Added job "Weekly database maintenance" to job store "default"
2025-09-17 13:25:37,660 - apscheduler.scheduler - INFO - Scheduler started
2025-09-17 13:25:37,660 - utils.scheduler - INFO - Scheduler started with 6 jobs:
2025-09-17 13:25:37,661 - utils.scheduler - INFO -   - Status check and transition cycle (next run: 2025-09-17 13:25:47)
2025-09-17 13:25:37,661 - utils.scheduler - INFO -   - Process F1 screenshots (next run: 2025-09-17 13:26:07)
2025-09-17 13:25:37,662 - utils.scheduler - INFO -   - Process F3 screenshots (next run: 2025-09-17 13:26:22)
2025-09-17 13:25:37,663 - utils.scheduler - INFO -   - Process F2 screenshots (next run: 2025-09-17 13:26:37)
2025-09-17 13:25:37,663 - utils.scheduler - INFO -   - Daily maintenance cleanup (next run: 2025-09-18 02:00:00)
2025-09-17 13:25:37,664 - utils.scheduler - INFO -   - Weekly database maintenance (next run: 2025-09-21 03:00:00)
2025-09-17 13:25:37,664 - main - INFO - System started successfully with configuration: {'config_file': 'config.json', 'last_modified': '2025-09-17T13:25:26.864936', 'hotkeys': {'total': 4, 'enabled': 3, 'disabled': 1}, 'yandex_ocr': {'configured': True, 'api_url': 'https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText'}, 'monitoring': {'check_interval': 10, 'cleanup_days': 30}, 'paths': {'database': 'database\\market_data.db', 'logs': 'data\\logs'}}
2025-09-17 13:25:37,664 - main - INFO - Market Monitoring System is running. Press Ctrl+C to stop.
2025-09-17 13:25:47,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:25:57 MSK)" (scheduled at 2025-09-17 13:25:47.654805+03:00)
2025-09-17 13:25:47,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:25:47,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:25:57 MSK)" executed successfully
2025-09-17 13:25:57,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:07 MSK)" (scheduled at 2025-09-17 13:25:57.654805+03:00)
2025-09-17 13:25:57,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:25:57,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:07 MSK)" executed successfully
2025-09-17 13:26:07,655 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:26:37 MSK)" (scheduled at 2025-09-17 13:26:07.651806+03:00)
2025-09-17 13:26:07,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:17 MSK)" (scheduled at 2025-09-17 13:26:07.654805+03:00)
2025-09-17 13:26:07,657 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:26:37 MSK)" executed successfully
2025-09-17 13:26:07,657 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:07,658 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:17 MSK)" executed successfully
2025-09-17 13:26:17,667 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:27 MSK)" (scheduled at 2025-09-17 13:26:17.654805+03:00)
2025-09-17 13:26:17,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:17,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:27 MSK)" executed successfully
2025-09-17 13:26:22,669 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:27:07 MSK)" (scheduled at 2025-09-17 13:26:22.653805+03:00)
2025-09-17 13:26:22,670 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:27:07 MSK)" executed successfully
2025-09-17 13:26:22,844 - core.screenshot_capture - INFO - Hotkey F2 pressed - capturing screenshot
2025-09-17 13:26:22,946 - core.screenshot_capture - INFO - Screenshot captured successfully: F2_20250917_132622_845_1efa910b.png (285x400) in 0.101s
2025-09-17 13:26:27,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:37 MSK)" (scheduled at 2025-09-17 13:26:27.654805+03:00)
2025-09-17 13:26:27,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:27,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:37 MSK)" executed successfully
2025-09-17 13:26:37,660 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:27:07 MSK)" (scheduled at 2025-09-17 13:26:37.651806+03:00)
2025-09-17 13:26:37,660 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:27:37 MSK)" (scheduled at 2025-09-17 13:26:37.652805+03:00)
2025-09-17 13:26:37,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:47 MSK)" (scheduled at 2025-09-17 13:26:37.654805+03:00)
2025-09-17 13:26:37,662 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:27:07 MSK)" executed successfully
2025-09-17 13:26:37,662 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:26:37,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:37,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:47 MSK)" executed successfully
2025-09-17 13:26:37,911 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_132637_692_8b1d1497.jpg (700x1400) in 0.248s
2025-09-17 13:26:37,915 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:26:37,915 - core.database_manager - INFO - Created OCR session 2 for hotkey F2
2025-09-17 13:26:37,929 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758104797_6bb4d4b4 for F2 (session 2)
2025-09-17 13:26:37,929 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104797_6bb4d4b4 (attempt 1)
2025-09-17 13:26:37,930 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:27:37 MSK)" executed successfully
2025-09-17 13:26:37,930 - core.ocr_client - INFO - Starting OCR request 9d808b56 for merged_20250917_132637_692_8b1d1497.jpg (0.1MB)
2025-09-17 13:26:37,931 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:26:38,431 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 9d808b56: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:26:38,432 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:26:38,711 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 9d808b56: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d5c729af-b8e2-4d96-91f3-e9488fb4080b"
  }
 ]
}

2025-09-17 13:26:38,712 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:26:38,713 - core.ocr_queue - ERROR - Job ocr_F2_1758104797_6bb4d4b4 failed on attempt 1: OCR processing returned no result
2025-09-17 13:26:38,713 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104797_6bb4d4b4 for retry in 2s
2025-09-17 13:26:40,715 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104797_6bb4d4b4 (attempt 2)
2025-09-17 13:26:40,715 - core.ocr_client - INFO - Starting OCR request ee548949 for merged_20250917_132637_692_8b1d1497.jpg (0.1MB)
2025-09-17 13:26:40,716 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:26:40,795 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ee548949: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:26:40,796 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:26:40,845 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ee548949: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ff7cef32-8ff8-4246-8d10-7494ebf67be2"
  }
 ]
}

2025-09-17 13:26:40,846 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:26:40,847 - core.ocr_queue - ERROR - Job ocr_F2_1758104797_6bb4d4b4 failed on attempt 2: OCR processing returned no result
2025-09-17 13:26:40,847 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104797_6bb4d4b4 for retry in 4s
2025-09-17 13:26:44,848 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104797_6bb4d4b4 (attempt 3)
2025-09-17 13:26:44,848 - core.ocr_client - INFO - Starting OCR request fd78c6e8 for merged_20250917_132637_692_8b1d1497.jpg (0.1MB)
2025-09-17 13:26:44,849 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:26:44,941 - core.ocr_client - ERROR - Non-retryable error for primary-ocr fd78c6e8: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:26:44,941 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:26:44,980 - core.ocr_client - ERROR - Non-retryable error for fallback-vision fd78c6e8: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e13d3381-c1b3-4965-a819-d8d710aed85c"
  }
 ]
}

2025-09-17 13:26:44,981 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:26:44,982 - core.ocr_queue - ERROR - Job ocr_F2_1758104797_6bb4d4b4 failed on attempt 3: OCR processing returned no result
2025-09-17 13:26:44,982 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758104797_6bb4d4b4)
2025-09-17 13:26:44,989 - core.ocr_queue - ERROR - Job ocr_F2_1758104797_6bb4d4b4 permanently failed: OCR processing returned no result
2025-09-17 13:26:47,670 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:57 MSK)" (scheduled at 2025-09-17 13:26:47.654805+03:00)
2025-09-17 13:26:47,671 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:47,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:26:57 MSK)" executed successfully
2025-09-17 13:26:57,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:07 MSK)" (scheduled at 2025-09-17 13:26:57.654805+03:00)
2025-09-17 13:26:57,667 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:26:57,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:07 MSK)" executed successfully
2025-09-17 13:27:07,662 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:27:37 MSK)" (scheduled at 2025-09-17 13:27:07.651806+03:00)
2025-09-17 13:27:07,662 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:27:52 MSK)" (scheduled at 2025-09-17 13:27:07.653805+03:00)
2025-09-17 13:27:07,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:17 MSK)" (scheduled at 2025-09-17 13:27:07.654805+03:00)
2025-09-17 13:27:07,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:27:37 MSK)" executed successfully
2025-09-17 13:27:07,664 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:27:52 MSK)" executed successfully
2025-09-17 13:27:07,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:07,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:17 MSK)" executed successfully
2025-09-17 13:27:17,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:27 MSK)" (scheduled at 2025-09-17 13:27:17.654805+03:00)
2025-09-17 13:27:17,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:17,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:27 MSK)" executed successfully
2025-09-17 13:27:27,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:37 MSK)" (scheduled at 2025-09-17 13:27:27.654805+03:00)
2025-09-17 13:27:27,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:27,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:37 MSK)" executed successfully
2025-09-17 13:27:37,655 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:28:07 MSK)" (scheduled at 2025-09-17 13:27:37.651806+03:00)
2025-09-17 13:27:37,655 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:28:37 MSK)" (scheduled at 2025-09-17 13:27:37.652805+03:00)
2025-09-17 13:27:37,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:47 MSK)" (scheduled at 2025-09-17 13:27:37.654805+03:00)
2025-09-17 13:27:37,656 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:28:07 MSK)" executed successfully
2025-09-17 13:27:37,657 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:37,657 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:27:37,657 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:47 MSK)" executed successfully
2025-09-17 13:27:38,101 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_132737_677_9f93754b.jpg (700x1400) in 0.444s
2025-09-17 13:27:38,105 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:27:38,105 - core.database_manager - INFO - Created OCR session 3 for hotkey F2
2025-09-17 13:27:38,106 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758104858_848cfda4 for F2 (session 3)
2025-09-17 13:27:38,106 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104858_848cfda4 (attempt 1)
2025-09-17 13:27:38,106 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:28:37 MSK)" executed successfully
2025-09-17 13:27:38,106 - core.ocr_client - INFO - Starting OCR request 83e5d847 for merged_20250917_132737_677_9f93754b.jpg (0.1MB)
2025-09-17 13:27:38,107 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:27:38,213 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 83e5d847: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:27:38,214 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:27:38,255 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 83e5d847: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "0063331e-2246-4573-81ca-d3fcdb300e49"
  }
 ]
}

2025-09-17 13:27:38,255 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:27:38,256 - core.ocr_queue - ERROR - Job ocr_F2_1758104858_848cfda4 failed on attempt 1: OCR processing returned no result
2025-09-17 13:27:38,256 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104858_848cfda4 for retry in 2s
2025-09-17 13:27:40,257 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104858_848cfda4 (attempt 2)
2025-09-17 13:27:40,257 - core.ocr_client - INFO - Starting OCR request 76b3ff49 for merged_20250917_132737_677_9f93754b.jpg (0.1MB)
2025-09-17 13:27:40,258 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:27:40,341 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 76b3ff49: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:27:40,342 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:27:40,378 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 76b3ff49: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e02cdc8c-11b2-4887-a19c-3d1b645be2b1"
  }
 ]
}

2025-09-17 13:27:40,379 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:27:40,380 - core.ocr_queue - ERROR - Job ocr_F2_1758104858_848cfda4 failed on attempt 2: OCR processing returned no result
2025-09-17 13:27:40,380 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104858_848cfda4 for retry in 4s
2025-09-17 13:27:44,382 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104858_848cfda4 (attempt 3)
2025-09-17 13:27:44,382 - core.ocr_client - INFO - Starting OCR request b96b84a8 for merged_20250917_132737_677_9f93754b.jpg (0.1MB)
2025-09-17 13:27:44,383 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:27:44,471 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b96b84a8: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:27:44,471 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:27:44,515 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b96b84a8: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "4bb45deb-29a6-49c0-871f-7087f35cb31f"
  }
 ]
}

2025-09-17 13:27:44,516 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:27:44,517 - core.ocr_queue - ERROR - Job ocr_F2_1758104858_848cfda4 failed on attempt 3: OCR processing returned no result
2025-09-17 13:27:44,517 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758104858_848cfda4)
2025-09-17 13:27:44,518 - core.ocr_queue - ERROR - Job ocr_F2_1758104858_848cfda4 permanently failed: OCR processing returned no result
2025-09-17 13:27:47,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:57 MSK)" (scheduled at 2025-09-17 13:27:47.654805+03:00)
2025-09-17 13:27:47,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:47,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:27:57 MSK)" executed successfully
2025-09-17 13:27:52,657 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:28:37 MSK)" (scheduled at 2025-09-17 13:27:52.653805+03:00)
2025-09-17 13:27:52,658 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:28:37 MSK)" executed successfully
2025-09-17 13:27:57,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:07 MSK)" (scheduled at 2025-09-17 13:27:57.654805+03:00)
2025-09-17 13:27:57,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:27:57,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:07 MSK)" executed successfully
2025-09-17 13:28:07,654 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:28:37 MSK)" (scheduled at 2025-09-17 13:28:07.651806+03:00)
2025-09-17 13:28:07,655 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:28:37 MSK)" executed successfully
2025-09-17 13:28:07,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:17 MSK)" (scheduled at 2025-09-17 13:28:07.654805+03:00)
2025-09-17 13:28:07,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:07,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:17 MSK)" executed successfully
2025-09-17 13:28:17,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:27 MSK)" (scheduled at 2025-09-17 13:28:17.654805+03:00)
2025-09-17 13:28:17,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:17,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:27 MSK)" executed successfully
2025-09-17 13:28:27,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:37 MSK)" (scheduled at 2025-09-17 13:28:27.654805+03:00)
2025-09-17 13:28:27,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:27,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:37 MSK)" executed successfully
2025-09-17 13:28:37,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:29:07 MSK)" (scheduled at 2025-09-17 13:28:37.651806+03:00)
2025-09-17 13:28:37,663 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:29:37 MSK)" (scheduled at 2025-09-17 13:28:37.652805+03:00)
2025-09-17 13:28:37,663 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:29:22 MSK)" (scheduled at 2025-09-17 13:28:37.653805+03:00)
2025-09-17 13:28:37,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:47 MSK)" (scheduled at 2025-09-17 13:28:37.654805+03:00)
2025-09-17 13:28:37,665 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:29:07 MSK)" executed successfully
2025-09-17 13:28:37,666 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:28:37,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:37,666 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:29:22 MSK)" executed successfully
2025-09-17 13:28:37,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:47 MSK)" executed successfully
2025-09-17 13:28:37,749 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_132837_692_1ea33a42.jpg (700x1400) in 0.083s
2025-09-17 13:28:37,753 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:28:37,753 - core.database_manager - INFO - Created OCR session 4 for hotkey F2
2025-09-17 13:28:37,754 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758104917_11390285 for F2 (session 4)
2025-09-17 13:28:37,754 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104917_11390285 (attempt 1)
2025-09-17 13:28:37,754 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:29:37 MSK)" executed successfully
2025-09-17 13:28:37,754 - core.ocr_client - INFO - Starting OCR request 7c3a8d0a for merged_20250917_132837_692_1ea33a42.jpg (0.1MB)
2025-09-17 13:28:37,755 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:28:37,857 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 7c3a8d0a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:28:37,858 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:28:37,892 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 7c3a8d0a: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "caa86ba9-2b19-4885-8c71-2b7f3461a8c5"
  }
 ]
}

2025-09-17 13:28:37,893 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:28:37,894 - core.ocr_queue - ERROR - Job ocr_F2_1758104917_11390285 failed on attempt 1: OCR processing returned no result
2025-09-17 13:28:37,894 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104917_11390285 for retry in 2s
2025-09-17 13:28:39,896 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104917_11390285 (attempt 2)
2025-09-17 13:28:39,896 - core.ocr_client - INFO - Starting OCR request 313445ba for merged_20250917_132837_692_1ea33a42.jpg (0.1MB)
2025-09-17 13:28:39,897 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:28:39,989 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 313445ba: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:28:39,990 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:28:40,024 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 313445ba: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "8816a8dd-93a4-4775-a3f8-310614ab3bd8"
  }
 ]
}

2025-09-17 13:28:40,025 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:28:40,025 - core.ocr_queue - ERROR - Job ocr_F2_1758104917_11390285 failed on attempt 2: OCR processing returned no result
2025-09-17 13:28:40,026 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104917_11390285 for retry in 4s
2025-09-17 13:28:44,028 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104917_11390285 (attempt 3)
2025-09-17 13:28:44,028 - core.ocr_client - INFO - Starting OCR request 4c5e49d7 for merged_20250917_132837_692_1ea33a42.jpg (0.1MB)
2025-09-17 13:28:44,029 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:28:44,269 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 4c5e49d7: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:28:44,270 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:28:44,308 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 4c5e49d7: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f087a395-b21b-485f-a14d-da056a1bf536"
  }
 ]
}

2025-09-17 13:28:44,309 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:28:44,310 - core.ocr_queue - ERROR - Job ocr_F2_1758104917_11390285 failed on attempt 3: OCR processing returned no result
2025-09-17 13:28:44,310 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758104917_11390285)
2025-09-17 13:28:44,311 - core.ocr_queue - ERROR - Job ocr_F2_1758104917_11390285 permanently failed: OCR processing returned no result
2025-09-17 13:28:47,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:57 MSK)" (scheduled at 2025-09-17 13:28:47.654805+03:00)
2025-09-17 13:28:47,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:47,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:28:57 MSK)" executed successfully
2025-09-17 13:28:57,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:07 MSK)" (scheduled at 2025-09-17 13:28:57.654805+03:00)
2025-09-17 13:28:57,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:28:57,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:07 MSK)" executed successfully
2025-09-17 13:29:07,652 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:29:37 MSK)" (scheduled at 2025-09-17 13:29:07.651806+03:00)
2025-09-17 13:29:07,653 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:29:37 MSK)" executed successfully
2025-09-17 13:29:07,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:17 MSK)" (scheduled at 2025-09-17 13:29:07.654805+03:00)
2025-09-17 13:29:07,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:07,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:17 MSK)" executed successfully
2025-09-17 13:29:17,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:27 MSK)" (scheduled at 2025-09-17 13:29:17.654805+03:00)
2025-09-17 13:29:17,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:17,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:27 MSK)" executed successfully
2025-09-17 13:29:22,667 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:30:07 MSK)" (scheduled at 2025-09-17 13:29:22.653805+03:00)
2025-09-17 13:29:22,668 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:30:07 MSK)" executed successfully
2025-09-17 13:29:27,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:37 MSK)" (scheduled at 2025-09-17 13:29:27.654805+03:00)
2025-09-17 13:29:27,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:27,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:37 MSK)" executed successfully
2025-09-17 13:29:37,661 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:30:07 MSK)" (scheduled at 2025-09-17 13:29:37.651806+03:00)
2025-09-17 13:29:37,661 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:30:37 MSK)" (scheduled at 2025-09-17 13:29:37.652805+03:00)
2025-09-17 13:29:37,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:47 MSK)" (scheduled at 2025-09-17 13:29:37.654805+03:00)
2025-09-17 13:29:37,662 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:30:07 MSK)" executed successfully
2025-09-17 13:29:37,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:37,663 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:29:37,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:47 MSK)" executed successfully
2025-09-17 13:29:37,733 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_132937_682_4c7a5878.jpg (700x1400) in 0.069s
2025-09-17 13:29:37,736 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:29:37,736 - core.database_manager - INFO - Created OCR session 5 for hotkey F2
2025-09-17 13:29:37,737 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758104977_611504c6 for F2 (session 5)
2025-09-17 13:29:37,737 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104977_611504c6 (attempt 1)
2025-09-17 13:29:37,737 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:30:37 MSK)" executed successfully
2025-09-17 13:29:37,738 - core.ocr_client - INFO - Starting OCR request 837775f8 for merged_20250917_132937_682_4c7a5878.jpg (0.1MB)
2025-09-17 13:29:37,738 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:29:37,829 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 837775f8: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:29:37,830 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:29:37,866 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 837775f8: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d9f61a3e-977b-4b8c-805a-0dd7b19e67bb"
  }
 ]
}

2025-09-17 13:29:37,867 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:29:37,867 - core.ocr_queue - ERROR - Job ocr_F2_1758104977_611504c6 failed on attempt 1: OCR processing returned no result
2025-09-17 13:29:37,867 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104977_611504c6 for retry in 2s
2025-09-17 13:29:39,869 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104977_611504c6 (attempt 2)
2025-09-17 13:29:39,869 - core.ocr_client - INFO - Starting OCR request 49c17df8 for merged_20250917_132937_682_4c7a5878.jpg (0.1MB)
2025-09-17 13:29:39,870 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:29:39,959 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 49c17df8: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:29:39,960 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:29:39,995 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 49c17df8: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b513a7e1-b64a-4fd0-8c42-b9c1f1cbf856"
  }
 ]
}

2025-09-17 13:29:39,996 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:29:39,996 - core.ocr_queue - ERROR - Job ocr_F2_1758104977_611504c6 failed on attempt 2: OCR processing returned no result
2025-09-17 13:29:39,997 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758104977_611504c6 for retry in 4s
2025-09-17 13:29:43,999 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758104977_611504c6 (attempt 3)
2025-09-17 13:29:43,999 - core.ocr_client - INFO - Starting OCR request 4e570703 for merged_20250917_132937_682_4c7a5878.jpg (0.1MB)
2025-09-17 13:29:44,000 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:29:44,163 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 4e570703: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:29:44,164 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:29:44,213 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 4e570703: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "7ca72e13-a1eb-4731-971a-fefd29c57702"
  }
 ]
}

2025-09-17 13:29:44,214 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:29:44,214 - core.ocr_queue - ERROR - Job ocr_F2_1758104977_611504c6 failed on attempt 3: OCR processing returned no result
2025-09-17 13:29:44,215 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758104977_611504c6)
2025-09-17 13:29:44,215 - core.ocr_queue - ERROR - Job ocr_F2_1758104977_611504c6 permanently failed: OCR processing returned no result
2025-09-17 13:29:47,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:57 MSK)" (scheduled at 2025-09-17 13:29:47.654805+03:00)
2025-09-17 13:29:47,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:47,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:29:57 MSK)" executed successfully
2025-09-17 13:29:57,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:07 MSK)" (scheduled at 2025-09-17 13:29:57.654805+03:00)
2025-09-17 13:29:57,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:29:57,662 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:07 MSK)" executed successfully
2025-09-17 13:30:00,812 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 13:30:00,812 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 13:30:07,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:30:37 MSK)" (scheduled at 2025-09-17 13:30:07.651806+03:00)
2025-09-17 13:30:07,663 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:30:52 MSK)" (scheduled at 2025-09-17 13:30:07.653805+03:00)
2025-09-17 13:30:07,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:17 MSK)" (scheduled at 2025-09-17 13:30:07.654805+03:00)
2025-09-17 13:30:07,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:30:37 MSK)" executed successfully
2025-09-17 13:30:07,665 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:30:52 MSK)" executed successfully
2025-09-17 13:30:07,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:07,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:17 MSK)" executed successfully
2025-09-17 13:30:17,657 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:27 MSK)" (scheduled at 2025-09-17 13:30:17.654805+03:00)
2025-09-17 13:30:17,658 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:17,658 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:27 MSK)" executed successfully
2025-09-17 13:30:27,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:37 MSK)" (scheduled at 2025-09-17 13:30:27.654805+03:00)
2025-09-17 13:30:27,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:27,662 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:37 MSK)" executed successfully
2025-09-17 13:30:37,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:31:07 MSK)" (scheduled at 2025-09-17 13:30:37.651806+03:00)
2025-09-17 13:30:37,663 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:31:37 MSK)" (scheduled at 2025-09-17 13:30:37.652805+03:00)
2025-09-17 13:30:37,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:47 MSK)" (scheduled at 2025-09-17 13:30:37.654805+03:00)
2025-09-17 13:30:37,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:31:07 MSK)" executed successfully
2025-09-17 13:30:37,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:37,665 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:30:37,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:47 MSK)" executed successfully
2025-09-17 13:30:37,763 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133037_706_09786aa9.jpg (700x1400) in 0.097s
2025-09-17 13:30:37,768 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:30:37,768 - core.database_manager - INFO - Created OCR session 6 for hotkey F2
2025-09-17 13:30:37,769 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105037_f0acebfd for F2 (session 6)
2025-09-17 13:30:37,769 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105037_f0acebfd (attempt 1)
2025-09-17 13:30:37,769 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:31:37 MSK)" executed successfully
2025-09-17 13:30:37,770 - core.ocr_client - INFO - Starting OCR request 686b004a for merged_20250917_133037_706_09786aa9.jpg (0.1MB)
2025-09-17 13:30:37,770 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:30:37,848 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 686b004a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:30:37,849 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:30:37,887 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 686b004a: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "267b562d-9d34-42cc-af6c-b44f0a0fdd81"
  }
 ]
}

2025-09-17 13:30:37,888 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:30:37,888 - core.ocr_queue - ERROR - Job ocr_F2_1758105037_f0acebfd failed on attempt 1: OCR processing returned no result
2025-09-17 13:30:37,889 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105037_f0acebfd for retry in 2s
2025-09-17 13:30:39,890 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105037_f0acebfd (attempt 2)
2025-09-17 13:30:39,891 - core.ocr_client - INFO - Starting OCR request ee416b0e for merged_20250917_133037_706_09786aa9.jpg (0.1MB)
2025-09-17 13:30:39,891 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:30:39,971 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ee416b0e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:30:39,972 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:30:40,009 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ee416b0e: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "1b032602-4923-413f-84a3-900c3cd624a4"
  }
 ]
}

2025-09-17 13:30:40,012 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:30:40,013 - core.ocr_queue - ERROR - Job ocr_F2_1758105037_f0acebfd failed on attempt 2: OCR processing returned no result
2025-09-17 13:30:40,014 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105037_f0acebfd for retry in 4s
2025-09-17 13:30:44,016 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105037_f0acebfd (attempt 3)
2025-09-17 13:30:44,016 - core.ocr_client - INFO - Starting OCR request ce8c8d67 for merged_20250917_133037_706_09786aa9.jpg (0.1MB)
2025-09-17 13:30:44,017 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:30:44,191 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ce8c8d67: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:30:44,192 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:30:44,241 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ce8c8d67: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e646fbca-507b-4acc-82c8-e9584cf55ae6"
  }
 ]
}

2025-09-17 13:30:44,242 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:30:44,242 - core.ocr_queue - ERROR - Job ocr_F2_1758105037_f0acebfd failed on attempt 3: OCR processing returned no result
2025-09-17 13:30:44,242 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105037_f0acebfd)
2025-09-17 13:30:44,251 - core.ocr_queue - ERROR - Job ocr_F2_1758105037_f0acebfd permanently failed: OCR processing returned no result
2025-09-17 13:30:47,667 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:57 MSK)" (scheduled at 2025-09-17 13:30:47.654805+03:00)
2025-09-17 13:30:47,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:47,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:30:57 MSK)" executed successfully
2025-09-17 13:30:52,667 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:31:37 MSK)" (scheduled at 2025-09-17 13:30:52.653805+03:00)
2025-09-17 13:30:52,668 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:31:37 MSK)" executed successfully
2025-09-17 13:30:57,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:07 MSK)" (scheduled at 2025-09-17 13:30:57.654805+03:00)
2025-09-17 13:30:57,656 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:30:57,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:07 MSK)" executed successfully
2025-09-17 13:31:07,664 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:31:37 MSK)" (scheduled at 2025-09-17 13:31:07.651806+03:00)
2025-09-17 13:31:07,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:17 MSK)" (scheduled at 2025-09-17 13:31:07.654805+03:00)
2025-09-17 13:31:07,665 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:31:37 MSK)" executed successfully
2025-09-17 13:31:07,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:07,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:17 MSK)" executed successfully
2025-09-17 13:31:17,667 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:27 MSK)" (scheduled at 2025-09-17 13:31:17.654805+03:00)
2025-09-17 13:31:17,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:17,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:27 MSK)" executed successfully
2025-09-17 13:31:27,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:37 MSK)" (scheduled at 2025-09-17 13:31:27.654805+03:00)
2025-09-17 13:31:27,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:27,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:37 MSK)" executed successfully
2025-09-17 13:31:37,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:32:07 MSK)" (scheduled at 2025-09-17 13:31:37.651806+03:00)
2025-09-17 13:31:37,663 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:32:37 MSK)" (scheduled at 2025-09-17 13:31:37.652805+03:00)
2025-09-17 13:31:37,663 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:32:22 MSK)" (scheduled at 2025-09-17 13:31:37.653805+03:00)
2025-09-17 13:31:37,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:47 MSK)" (scheduled at 2025-09-17 13:31:37.654805+03:00)
2025-09-17 13:31:37,665 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:32:07 MSK)" executed successfully
2025-09-17 13:31:37,666 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:32:22 MSK)" executed successfully
2025-09-17 13:31:37,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:37,666 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:31:37,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:47 MSK)" executed successfully
2025-09-17 13:31:37,742 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133137_688_4d5352dd.jpg (700x1400) in 0.075s
2025-09-17 13:31:37,746 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:31:37,747 - core.database_manager - INFO - Created OCR session 7 for hotkey F2
2025-09-17 13:31:37,747 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105097_0135371c for F2 (session 7)
2025-09-17 13:31:37,747 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105097_0135371c (attempt 1)
2025-09-17 13:31:37,748 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:32:37 MSK)" executed successfully
2025-09-17 13:31:37,748 - core.ocr_client - INFO - Starting OCR request 27853334 for merged_20250917_133137_688_4d5352dd.jpg (0.1MB)
2025-09-17 13:31:37,749 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:31:37,838 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 27853334: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:31:37,839 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:31:37,875 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 27853334: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "16ddca74-89bd-4e5f-a713-42fa872ae407"
  }
 ]
}

2025-09-17 13:31:37,876 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:31:37,876 - core.ocr_queue - ERROR - Job ocr_F2_1758105097_0135371c failed on attempt 1: OCR processing returned no result
2025-09-17 13:31:37,877 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105097_0135371c for retry in 2s
2025-09-17 13:31:39,878 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105097_0135371c (attempt 2)
2025-09-17 13:31:39,878 - core.ocr_client - INFO - Starting OCR request 96e0cc9d for merged_20250917_133137_688_4d5352dd.jpg (0.1MB)
2025-09-17 13:31:39,879 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:31:39,945 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 96e0cc9d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:31:39,946 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:31:39,984 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 96e0cc9d: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "4fad82e3-9492-435c-b313-a31399986d6e"
  }
 ]
}

2025-09-17 13:31:39,985 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:31:39,985 - core.ocr_queue - ERROR - Job ocr_F2_1758105097_0135371c failed on attempt 2: OCR processing returned no result
2025-09-17 13:31:39,985 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105097_0135371c for retry in 4s
2025-09-17 13:31:43,987 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105097_0135371c (attempt 3)
2025-09-17 13:31:43,987 - core.ocr_client - INFO - Starting OCR request 42eb0f7a for merged_20250917_133137_688_4d5352dd.jpg (0.1MB)
2025-09-17 13:31:43,988 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:31:44,110 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 42eb0f7a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:31:44,111 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:31:44,201 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 42eb0f7a: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b500575b-c833-4c0c-947b-6c7a4e3043d0"
  }
 ]
}

2025-09-17 13:31:44,202 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:31:44,202 - core.ocr_queue - ERROR - Job ocr_F2_1758105097_0135371c failed on attempt 3: OCR processing returned no result
2025-09-17 13:31:44,203 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105097_0135371c)
2025-09-17 13:31:44,203 - core.ocr_queue - ERROR - Job ocr_F2_1758105097_0135371c permanently failed: OCR processing returned no result
2025-09-17 13:31:47,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:57 MSK)" (scheduled at 2025-09-17 13:31:47.654805+03:00)
2025-09-17 13:31:47,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:47,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:31:57 MSK)" executed successfully
2025-09-17 13:31:57,658 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:07 MSK)" (scheduled at 2025-09-17 13:31:57.654805+03:00)
2025-09-17 13:31:57,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:31:57,659 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:07 MSK)" executed successfully
2025-09-17 13:32:07,664 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:32:37 MSK)" (scheduled at 2025-09-17 13:32:07.651806+03:00)
2025-09-17 13:32:07,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:17 MSK)" (scheduled at 2025-09-17 13:32:07.654805+03:00)
2025-09-17 13:32:07,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:07,665 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:32:37 MSK)" executed successfully
2025-09-17 13:32:07,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:17 MSK)" executed successfully
2025-09-17 13:32:17,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:27 MSK)" (scheduled at 2025-09-17 13:32:17.654805+03:00)
2025-09-17 13:32:17,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:17,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:27 MSK)" executed successfully
2025-09-17 13:32:22,662 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:33:07 MSK)" (scheduled at 2025-09-17 13:32:22.653805+03:00)
2025-09-17 13:32:22,663 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:33:07 MSK)" executed successfully
2025-09-17 13:32:27,670 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:37 MSK)" (scheduled at 2025-09-17 13:32:27.654805+03:00)
2025-09-17 13:32:27,671 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:27,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:37 MSK)" executed successfully
2025-09-17 13:32:37,654 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:33:07 MSK)" (scheduled at 2025-09-17 13:32:37.651806+03:00)
2025-09-17 13:32:37,654 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:33:37 MSK)" (scheduled at 2025-09-17 13:32:37.652805+03:00)
2025-09-17 13:32:37,655 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:33:07 MSK)" executed successfully
2025-09-17 13:32:37,656 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:32:37,670 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:47 MSK)" (scheduled at 2025-09-17 13:32:37.654805+03:00)
2025-09-17 13:32:37,671 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:37,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:47 MSK)" executed successfully
2025-09-17 13:32:37,736 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133237_676_f5d46850.jpg (700x1400) in 0.080s
2025-09-17 13:32:37,740 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:32:37,740 - core.database_manager - INFO - Created OCR session 8 for hotkey F2
2025-09-17 13:32:37,741 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105157_01c0dcb2 for F2 (session 8)
2025-09-17 13:32:37,741 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105157_01c0dcb2 (attempt 1)
2025-09-17 13:32:37,741 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:33:37 MSK)" executed successfully
2025-09-17 13:32:37,742 - core.ocr_client - INFO - Starting OCR request ee112e6f for merged_20250917_133237_676_f5d46850.jpg (0.1MB)
2025-09-17 13:32:37,742 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:32:37,840 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ee112e6f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:32:37,841 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:32:37,879 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ee112e6f: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "bce208fe-b4f8-40ae-a190-2a136a91b91c"
  }
 ]
}

2025-09-17 13:32:37,880 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:32:37,881 - core.ocr_queue - ERROR - Job ocr_F2_1758105157_01c0dcb2 failed on attempt 1: OCR processing returned no result
2025-09-17 13:32:37,881 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105157_01c0dcb2 for retry in 2s
2025-09-17 13:32:39,882 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105157_01c0dcb2 (attempt 2)
2025-09-17 13:32:39,882 - core.ocr_client - INFO - Starting OCR request 5b2cefa1 for merged_20250917_133237_676_f5d46850.jpg (0.1MB)
2025-09-17 13:32:39,883 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:32:39,964 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5b2cefa1: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:32:39,964 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:32:39,998 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5b2cefa1: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "717ff93f-51f3-481a-a490-ea6b4171cc5b"
  }
 ]
}

2025-09-17 13:32:39,999 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:32:40,000 - core.ocr_queue - ERROR - Job ocr_F2_1758105157_01c0dcb2 failed on attempt 2: OCR processing returned no result
2025-09-17 13:32:40,000 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105157_01c0dcb2 for retry in 4s
2025-09-17 13:32:44,002 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105157_01c0dcb2 (attempt 3)
2025-09-17 13:32:44,003 - core.ocr_client - INFO - Starting OCR request 69918c90 for merged_20250917_133237_676_f5d46850.jpg (0.1MB)
2025-09-17 13:32:44,003 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:32:44,218 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 69918c90: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:32:44,218 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:32:44,265 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 69918c90: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "144af307-9043-4534-b186-0404b4ae5702"
  }
 ]
}

2025-09-17 13:32:44,266 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:32:44,266 - core.ocr_queue - ERROR - Job ocr_F2_1758105157_01c0dcb2 failed on attempt 3: OCR processing returned no result
2025-09-17 13:32:44,267 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105157_01c0dcb2)
2025-09-17 13:32:44,267 - core.ocr_queue - ERROR - Job ocr_F2_1758105157_01c0dcb2 permanently failed: OCR processing returned no result
2025-09-17 13:32:47,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:57 MSK)" (scheduled at 2025-09-17 13:32:47.654805+03:00)
2025-09-17 13:32:47,667 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:47,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:32:57 MSK)" executed successfully
2025-09-17 13:32:57,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:07 MSK)" (scheduled at 2025-09-17 13:32:57.654805+03:00)
2025-09-17 13:32:57,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:32:57,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:07 MSK)" executed successfully
2025-09-17 13:33:07,662 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:33:37 MSK)" (scheduled at 2025-09-17 13:33:07.651806+03:00)
2025-09-17 13:33:07,662 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:33:52 MSK)" (scheduled at 2025-09-17 13:33:07.653805+03:00)
2025-09-17 13:33:07,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:17 MSK)" (scheduled at 2025-09-17 13:33:07.654805+03:00)
2025-09-17 13:33:07,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:33:37 MSK)" executed successfully
2025-09-17 13:33:07,664 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:33:52 MSK)" executed successfully
2025-09-17 13:33:07,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:07,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:17 MSK)" executed successfully
2025-09-17 13:33:17,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:27 MSK)" (scheduled at 2025-09-17 13:33:17.654805+03:00)
2025-09-17 13:33:17,656 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:17,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:27 MSK)" executed successfully
2025-09-17 13:33:27,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:37 MSK)" (scheduled at 2025-09-17 13:33:27.654805+03:00)
2025-09-17 13:33:27,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:27,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:37 MSK)" executed successfully
2025-09-17 13:33:37,654 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:34:07 MSK)" (scheduled at 2025-09-17 13:33:37.651806+03:00)
2025-09-17 13:33:37,654 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:34:37 MSK)" (scheduled at 2025-09-17 13:33:37.652805+03:00)
2025-09-17 13:33:37,655 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:34:07 MSK)" executed successfully
2025-09-17 13:33:37,656 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:33:37,670 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:47 MSK)" (scheduled at 2025-09-17 13:33:37.654805+03:00)
2025-09-17 13:33:37,671 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:37,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:47 MSK)" executed successfully
2025-09-17 13:33:37,734 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133337_677_a423a0e8.jpg (700x1400) in 0.078s
2025-09-17 13:33:37,738 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:33:37,738 - core.database_manager - INFO - Created OCR session 9 for hotkey F2
2025-09-17 13:33:37,739 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105217_1e4928e1 for F2 (session 9)
2025-09-17 13:33:37,739 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105217_1e4928e1 (attempt 1)
2025-09-17 13:33:37,739 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:34:37 MSK)" executed successfully
2025-09-17 13:33:37,740 - core.ocr_client - INFO - Starting OCR request 2110cfa9 for merged_20250917_133337_677_a423a0e8.jpg (0.1MB)
2025-09-17 13:33:37,740 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:33:37,825 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2110cfa9: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:33:37,826 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:33:37,863 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2110cfa9: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "08d409c8-b5a9-401f-831a-49c936879211"
  }
 ]
}

2025-09-17 13:33:37,864 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:33:37,864 - core.ocr_queue - ERROR - Job ocr_F2_1758105217_1e4928e1 failed on attempt 1: OCR processing returned no result
2025-09-17 13:33:37,865 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105217_1e4928e1 for retry in 2s
2025-09-17 13:33:39,867 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105217_1e4928e1 (attempt 2)
2025-09-17 13:33:39,868 - core.ocr_client - INFO - Starting OCR request 194ca849 for merged_20250917_133337_677_a423a0e8.jpg (0.1MB)
2025-09-17 13:33:39,868 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:33:39,934 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 194ca849: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:33:39,935 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:33:39,971 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 194ca849: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b92e3266-e354-43c1-96e3-28951552cec0"
  }
 ]
}

2025-09-17 13:33:39,972 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:33:39,973 - core.ocr_queue - ERROR - Job ocr_F2_1758105217_1e4928e1 failed on attempt 2: OCR processing returned no result
2025-09-17 13:33:39,973 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105217_1e4928e1 for retry in 4s
2025-09-17 13:33:43,975 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105217_1e4928e1 (attempt 3)
2025-09-17 13:33:43,975 - core.ocr_client - INFO - Starting OCR request 00fbbf52 for merged_20250917_133337_677_a423a0e8.jpg (0.1MB)
2025-09-17 13:33:43,976 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:33:44,151 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 00fbbf52: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:33:44,151 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:33:44,225 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 00fbbf52: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "89c1f314-9cc4-49fe-b0c0-1f4e0f43e8a5"
  }
 ]
}

2025-09-17 13:33:44,226 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:33:44,226 - core.ocr_queue - ERROR - Job ocr_F2_1758105217_1e4928e1 failed on attempt 3: OCR processing returned no result
2025-09-17 13:33:44,227 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105217_1e4928e1)
2025-09-17 13:33:44,227 - core.ocr_queue - ERROR - Job ocr_F2_1758105217_1e4928e1 permanently failed: OCR processing returned no result
2025-09-17 13:33:47,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:57 MSK)" (scheduled at 2025-09-17 13:33:47.654805+03:00)
2025-09-17 13:33:47,667 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:47,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:33:57 MSK)" executed successfully
2025-09-17 13:33:52,658 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:34:37 MSK)" (scheduled at 2025-09-17 13:33:52.653805+03:00)
2025-09-17 13:33:52,659 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:34:37 MSK)" executed successfully
2025-09-17 13:33:57,658 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:07 MSK)" (scheduled at 2025-09-17 13:33:57.654805+03:00)
2025-09-17 13:33:57,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:33:57,659 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:07 MSK)" executed successfully
2025-09-17 13:34:07,654 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:34:37 MSK)" (scheduled at 2025-09-17 13:34:07.651806+03:00)
2025-09-17 13:34:07,654 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:17 MSK)" (scheduled at 2025-09-17 13:34:07.654805+03:00)
2025-09-17 13:34:07,655 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:34:37 MSK)" executed successfully
2025-09-17 13:34:07,655 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:07,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:17 MSK)" executed successfully
2025-09-17 13:34:17,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:27 MSK)" (scheduled at 2025-09-17 13:34:17.654805+03:00)
2025-09-17 13:34:17,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:17,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:27 MSK)" executed successfully
2025-09-17 13:34:27,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:37 MSK)" (scheduled at 2025-09-17 13:34:27.654805+03:00)
2025-09-17 13:34:27,656 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:27,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:37 MSK)" executed successfully
2025-09-17 13:34:37,666 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:35:07 MSK)" (scheduled at 2025-09-17 13:34:37.651806+03:00)
2025-09-17 13:34:37,666 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:35:37 MSK)" (scheduled at 2025-09-17 13:34:37.652805+03:00)
2025-09-17 13:34:37,666 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:35:22 MSK)" (scheduled at 2025-09-17 13:34:37.653805+03:00)
2025-09-17 13:34:37,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:47 MSK)" (scheduled at 2025-09-17 13:34:37.654805+03:00)
2025-09-17 13:34:37,668 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:35:07 MSK)" executed successfully
2025-09-17 13:34:37,668 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:34:37,668 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:35:22 MSK)" executed successfully
2025-09-17 13:34:37,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:37,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:47 MSK)" executed successfully
2025-09-17 13:34:37,744 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133437_690_cc01123d.jpg (700x1400) in 0.076s
2025-09-17 13:34:37,748 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:34:37,749 - core.database_manager - INFO - Created OCR session 10 for hotkey F2
2025-09-17 13:34:37,750 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105277_e9d4ed86 for F2 (session 10)
2025-09-17 13:34:37,750 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105277_e9d4ed86 (attempt 1)
2025-09-17 13:34:37,750 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:35:37 MSK)" executed successfully
2025-09-17 13:34:37,750 - core.ocr_client - INFO - Starting OCR request b70920c3 for merged_20250917_133437_690_cc01123d.jpg (0.1MB)
2025-09-17 13:34:37,751 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:34:37,827 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b70920c3: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:34:37,827 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:34:37,871 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b70920c3: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b1e91a3e-5ba1-4bf4-97e1-b677a566769c"
  }
 ]
}

2025-09-17 13:34:37,872 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:34:37,872 - core.ocr_queue - ERROR - Job ocr_F2_1758105277_e9d4ed86 failed on attempt 1: OCR processing returned no result
2025-09-17 13:34:37,872 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105277_e9d4ed86 for retry in 2s
2025-09-17 13:34:39,874 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105277_e9d4ed86 (attempt 2)
2025-09-17 13:34:39,874 - core.ocr_client - INFO - Starting OCR request 2e33fdb9 for merged_20250917_133437_690_cc01123d.jpg (0.1MB)
2025-09-17 13:34:39,874 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:34:39,942 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2e33fdb9: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:34:39,943 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:34:39,985 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2e33fdb9: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e915249a-8d8f-4b37-bacc-8fc195ef0eaa"
  }
 ]
}

2025-09-17 13:34:39,986 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:34:39,987 - core.ocr_queue - ERROR - Job ocr_F2_1758105277_e9d4ed86 failed on attempt 2: OCR processing returned no result
2025-09-17 13:34:39,987 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105277_e9d4ed86 for retry in 4s
2025-09-17 13:34:43,988 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105277_e9d4ed86 (attempt 3)
2025-09-17 13:34:43,988 - core.ocr_client - INFO - Starting OCR request eb6ff400 for merged_20250917_133437_690_cc01123d.jpg (0.1MB)
2025-09-17 13:34:43,989 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:34:44,105 - core.ocr_client - ERROR - Non-retryable error for primary-ocr eb6ff400: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:34:44,105 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:34:44,179 - core.ocr_client - ERROR - Non-retryable error for fallback-vision eb6ff400: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "407e8a46-a13b-4935-a252-67b92a79814a"
  }
 ]
}

2025-09-17 13:34:44,180 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:34:44,180 - core.ocr_queue - ERROR - Job ocr_F2_1758105277_e9d4ed86 failed on attempt 3: OCR processing returned no result
2025-09-17 13:34:44,181 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105277_e9d4ed86)
2025-09-17 13:34:44,181 - core.ocr_queue - ERROR - Job ocr_F2_1758105277_e9d4ed86 permanently failed: OCR processing returned no result
2025-09-17 13:34:47,656 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:57 MSK)" (scheduled at 2025-09-17 13:34:47.654805+03:00)
2025-09-17 13:34:47,657 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:47,657 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:34:57 MSK)" executed successfully
2025-09-17 13:34:57,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:07 MSK)" (scheduled at 2025-09-17 13:34:57.654805+03:00)
2025-09-17 13:34:57,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:34:57,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:07 MSK)" executed successfully
2025-09-17 13:35:00,964 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 13:35:00,964 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 13:35:07,653 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:35:37 MSK)" (scheduled at 2025-09-17 13:35:07.651806+03:00)
2025-09-17 13:35:07,654 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:35:37 MSK)" executed successfully
2025-09-17 13:35:07,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:17 MSK)" (scheduled at 2025-09-17 13:35:07.654805+03:00)
2025-09-17 13:35:07,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:07,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:17 MSK)" executed successfully
2025-09-17 13:35:17,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:27 MSK)" (scheduled at 2025-09-17 13:35:17.654805+03:00)
2025-09-17 13:35:17,667 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:17,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:27 MSK)" executed successfully
2025-09-17 13:35:22,654 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:36:07 MSK)" (scheduled at 2025-09-17 13:35:22.653805+03:00)
2025-09-17 13:35:22,655 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:36:07 MSK)" executed successfully
2025-09-17 13:35:27,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:37 MSK)" (scheduled at 2025-09-17 13:35:27.654805+03:00)
2025-09-17 13:35:27,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:27,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:37 MSK)" executed successfully
2025-09-17 13:35:37,657 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:36:07 MSK)" (scheduled at 2025-09-17 13:35:37.651806+03:00)
2025-09-17 13:35:37,657 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:36:37 MSK)" (scheduled at 2025-09-17 13:35:37.652805+03:00)
2025-09-17 13:35:37,657 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:47 MSK)" (scheduled at 2025-09-17 13:35:37.654805+03:00)
2025-09-17 13:35:37,658 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:36:07 MSK)" executed successfully
2025-09-17 13:35:37,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:37,659 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 13:35:37,659 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:47 MSK)" executed successfully
2025-09-17 13:35:37,734 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133537_682_cc63a6a4.jpg (700x1400) in 0.074s
2025-09-17 13:35:37,738 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 13:35:37,739 - core.database_manager - INFO - Created OCR session 11 for hotkey F2
2025-09-17 13:35:37,740 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105337_b405a46d for F2 (session 11)
2025-09-17 13:35:37,740 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105337_b405a46d (attempt 1)
2025-09-17 13:35:37,740 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:36:37 MSK)" executed successfully
2025-09-17 13:35:37,740 - core.ocr_client - INFO - Starting OCR request 76d8ebb3 for merged_20250917_133537_682_cc63a6a4.jpg (0.1MB)
2025-09-17 13:35:37,741 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:35:37,821 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 76d8ebb3: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:35:37,822 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:35:37,864 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 76d8ebb3: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "36808f3c-7584-496d-9d10-ede86c649869"
  }
 ]
}

2025-09-17 13:35:37,865 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:35:37,866 - core.ocr_queue - ERROR - Job ocr_F2_1758105337_b405a46d failed on attempt 1: OCR processing returned no result
2025-09-17 13:35:37,866 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105337_b405a46d for retry in 2s
2025-09-17 13:35:39,867 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105337_b405a46d (attempt 2)
2025-09-17 13:35:39,867 - core.ocr_client - INFO - Starting OCR request 3f2c2b1c for merged_20250917_133537_682_cc63a6a4.jpg (0.1MB)
2025-09-17 13:35:39,868 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:35:39,941 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 3f2c2b1c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:35:39,941 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:35:39,985 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 3f2c2b1c: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "be07cb9c-12f6-498e-a4cd-052aea99465e"
  }
 ]
}

2025-09-17 13:35:39,986 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:35:39,986 - core.ocr_queue - ERROR - Job ocr_F2_1758105337_b405a46d failed on attempt 2: OCR processing returned no result
2025-09-17 13:35:39,987 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105337_b405a46d for retry in 4s
2025-09-17 13:35:43,988 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105337_b405a46d (attempt 3)
2025-09-17 13:35:43,988 - core.ocr_client - INFO - Starting OCR request e4867d46 for merged_20250917_133537_682_cc63a6a4.jpg (0.1MB)
2025-09-17 13:35:43,989 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:35:44,086 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e4867d46: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:35:44,087 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:35:44,195 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e4867d46: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ede6a12b-8430-4b9d-821f-305f41d4d73b"
  }
 ]
}

2025-09-17 13:35:44,196 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:35:44,196 - core.ocr_queue - ERROR - Job ocr_F2_1758105337_b405a46d failed on attempt 3: OCR processing returned no result
2025-09-17 13:35:44,196 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105337_b405a46d)
2025-09-17 13:35:44,197 - core.ocr_queue - ERROR - Job ocr_F2_1758105337_b405a46d permanently failed: OCR processing returned no result
2025-09-17 13:35:47,657 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:57 MSK)" (scheduled at 2025-09-17 13:35:47.654805+03:00)
2025-09-17 13:35:47,658 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:47,658 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:35:57 MSK)" executed successfully
2025-09-17 13:35:57,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:07 MSK)" (scheduled at 2025-09-17 13:35:57.654805+03:00)
2025-09-17 13:35:57,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:35:57,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:07 MSK)" executed successfully
2025-09-17 13:36:07,662 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:36:37 MSK)" (scheduled at 2025-09-17 13:36:07.651806+03:00)
2025-09-17 13:36:07,662 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:36:52 MSK)" (scheduled at 2025-09-17 13:36:07.653805+03:00)
2025-09-17 13:36:07,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:17 MSK)" (scheduled at 2025-09-17 13:36:07.654805+03:00)
2025-09-17 13:36:07,663 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:36:37 MSK)" executed successfully
2025-09-17 13:36:07,679 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:36:52 MSK)" executed successfully
2025-09-17 13:36:07,679 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:07,680 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:17 MSK)" executed successfully
2025-09-17 13:36:17,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:27 MSK)" (scheduled at 2025-09-17 13:36:17.654805+03:00)
2025-09-17 13:36:17,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:17,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:27 MSK)" executed successfully
2025-09-17 13:36:27,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:37 MSK)" (scheduled at 2025-09-17 13:36:27.654805+03:00)
2025-09-17 13:36:27,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:27,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:37 MSK)" executed successfully
2025-09-17 13:36:31,973 - core.screenshot_capture - INFO - Hotkey F2 pressed - capturing screenshot
2025-09-17 13:36:32,260 - core.screenshot_capture - INFO - Screenshot captured successfully: F2_20250917_133631_974_1b34df92.png (285x400) in 0.287s
2025-09-17 13:36:37,666 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:37:07 MSK)" (scheduled at 2025-09-17 13:36:37.651806+03:00)
2025-09-17 13:36:37,666 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:37:37 MSK)" (scheduled at 2025-09-17 13:36:37.652805+03:00)
2025-09-17 13:36:37,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:47 MSK)" (scheduled at 2025-09-17 13:36:37.654805+03:00)
2025-09-17 13:36:37,667 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:37:07 MSK)" executed successfully
2025-09-17 13:36:37,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:37,668 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:36:37,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:47 MSK)" executed successfully
2025-09-17 13:36:37,758 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133637_694_92e34415.jpg (700x1800) in 0.088s
2025-09-17 13:36:37,763 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:36:37,763 - core.database_manager - INFO - Created OCR session 12 for hotkey F2
2025-09-17 13:36:37,764 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105397_dd521ed6 for F2 (session 12)
2025-09-17 13:36:37,764 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105397_dd521ed6 (attempt 1)
2025-09-17 13:36:37,764 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:37:37 MSK)" executed successfully
2025-09-17 13:36:37,765 - core.ocr_client - INFO - Starting OCR request ca6224e5 for merged_20250917_133637_694_92e34415.jpg (0.2MB)
2025-09-17 13:36:37,765 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:36:37,872 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ca6224e5: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:36:37,873 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:36:37,956 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ca6224e5: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "2ca52cc6-1082-49c3-b354-34565be0166e"
  }
 ]
}

2025-09-17 13:36:37,957 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:36:37,958 - core.ocr_queue - ERROR - Job ocr_F2_1758105397_dd521ed6 failed on attempt 1: OCR processing returned no result
2025-09-17 13:36:37,958 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105397_dd521ed6 for retry in 2s
2025-09-17 13:36:39,959 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105397_dd521ed6 (attempt 2)
2025-09-17 13:36:39,959 - core.ocr_client - INFO - Starting OCR request b9ad6594 for merged_20250917_133637_694_92e34415.jpg (0.2MB)
2025-09-17 13:36:39,960 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:36:40,045 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b9ad6594: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:36:40,046 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:36:40,124 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b9ad6594: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "25128381-0bc6-42a5-aca4-63e42475b121"
  }
 ]
}

2025-09-17 13:36:40,125 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:36:40,126 - core.ocr_queue - ERROR - Job ocr_F2_1758105397_dd521ed6 failed on attempt 2: OCR processing returned no result
2025-09-17 13:36:40,126 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105397_dd521ed6 for retry in 4s
2025-09-17 13:36:44,127 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105397_dd521ed6 (attempt 3)
2025-09-17 13:36:44,127 - core.ocr_client - INFO - Starting OCR request aaffb45a for merged_20250917_133637_694_92e34415.jpg (0.2MB)
2025-09-17 13:36:44,128 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:36:44,590 - core.ocr_client - ERROR - Non-retryable error for primary-ocr aaffb45a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:36:44,590 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:36:44,670 - core.ocr_client - ERROR - Non-retryable error for fallback-vision aaffb45a: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a2d76b3d-71b1-43b7-ac69-51f6522be57c"
  }
 ]
}

2025-09-17 13:36:44,671 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:36:44,671 - core.ocr_queue - ERROR - Job ocr_F2_1758105397_dd521ed6 failed on attempt 3: OCR processing returned no result
2025-09-17 13:36:44,672 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105397_dd521ed6)
2025-09-17 13:36:44,672 - core.ocr_queue - ERROR - Job ocr_F2_1758105397_dd521ed6 permanently failed: OCR processing returned no result
2025-09-17 13:36:47,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:57 MSK)" (scheduled at 2025-09-17 13:36:47.654805+03:00)
2025-09-17 13:36:47,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:47,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:36:57 MSK)" executed successfully
2025-09-17 13:36:52,655 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:37:37 MSK)" (scheduled at 2025-09-17 13:36:52.653805+03:00)
2025-09-17 13:36:52,656 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:37:37 MSK)" executed successfully
2025-09-17 13:36:57,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:07 MSK)" (scheduled at 2025-09-17 13:36:57.654805+03:00)
2025-09-17 13:36:57,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:36:57,662 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:07 MSK)" executed successfully
2025-09-17 13:37:07,659 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:37:37 MSK)" (scheduled at 2025-09-17 13:37:07.651806+03:00)
2025-09-17 13:37:07,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:17 MSK)" (scheduled at 2025-09-17 13:37:07.654805+03:00)
2025-09-17 13:37:07,660 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:37:37 MSK)" executed successfully
2025-09-17 13:37:07,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:07,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:17 MSK)" executed successfully
2025-09-17 13:37:17,657 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:27 MSK)" (scheduled at 2025-09-17 13:37:17.654805+03:00)
2025-09-17 13:37:17,658 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:17,658 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:27 MSK)" executed successfully
2025-09-17 13:37:27,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:37 MSK)" (scheduled at 2025-09-17 13:37:27.654805+03:00)
2025-09-17 13:37:27,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:27,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:37 MSK)" executed successfully
2025-09-17 13:37:37,666 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:38:07 MSK)" (scheduled at 2025-09-17 13:37:37.651806+03:00)
2025-09-17 13:37:37,666 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:38:37 MSK)" (scheduled at 2025-09-17 13:37:37.652805+03:00)
2025-09-17 13:37:37,666 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:38:22 MSK)" (scheduled at 2025-09-17 13:37:37.653805+03:00)
2025-09-17 13:37:37,666 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:47 MSK)" (scheduled at 2025-09-17 13:37:37.654805+03:00)
2025-09-17 13:37:37,668 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:38:07 MSK)" executed successfully
2025-09-17 13:37:37,668 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:38:22 MSK)" executed successfully
2025-09-17 13:37:37,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:37,668 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:37:37,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:47 MSK)" executed successfully
2025-09-17 13:37:37,775 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133737_696_3821e9cd.jpg (700x1800) in 0.106s
2025-09-17 13:37:37,780 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:37:37,780 - core.database_manager - INFO - Created OCR session 13 for hotkey F2
2025-09-17 13:37:37,781 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105457_323642cf for F2 (session 13)
2025-09-17 13:37:37,781 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105457_323642cf (attempt 1)
2025-09-17 13:37:37,781 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:38:37 MSK)" executed successfully
2025-09-17 13:37:37,782 - core.ocr_client - INFO - Starting OCR request 55afa728 for merged_20250917_133737_696_3821e9cd.jpg (0.2MB)
2025-09-17 13:37:37,782 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:37:37,879 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 55afa728: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:37:37,880 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:37:37,986 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 55afa728: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "dbbc3fe5-d4e3-46f1-9336-59dd46d37d29"
  }
 ]
}

2025-09-17 13:37:37,986 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:37:37,987 - core.ocr_queue - ERROR - Job ocr_F2_1758105457_323642cf failed on attempt 1: OCR processing returned no result
2025-09-17 13:37:37,987 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105457_323642cf for retry in 2s
2025-09-17 13:37:39,988 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105457_323642cf (attempt 2)
2025-09-17 13:37:39,988 - core.ocr_client - INFO - Starting OCR request 6ee2a3a4 for merged_20250917_133737_696_3821e9cd.jpg (0.2MB)
2025-09-17 13:37:39,989 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:37:40,085 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6ee2a3a4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:37:40,085 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:37:40,168 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6ee2a3a4: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "bb0f2344-1b37-4eb8-8f40-4a70bce23fb1"
  }
 ]
}

2025-09-17 13:37:40,169 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:37:40,169 - core.ocr_queue - ERROR - Job ocr_F2_1758105457_323642cf failed on attempt 2: OCR processing returned no result
2025-09-17 13:37:40,170 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105457_323642cf for retry in 4s
2025-09-17 13:37:44,171 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105457_323642cf (attempt 3)
2025-09-17 13:37:44,171 - core.ocr_client - INFO - Starting OCR request 4e43c2ac for merged_20250917_133737_696_3821e9cd.jpg (0.2MB)
2025-09-17 13:37:44,172 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:37:44,309 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 4e43c2ac: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:37:44,310 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:37:44,425 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 4e43c2ac: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "c0bb85bc-0460-4759-8905-c8f960b2ab87"
  }
 ]
}

2025-09-17 13:37:44,426 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:37:44,427 - core.ocr_queue - ERROR - Job ocr_F2_1758105457_323642cf failed on attempt 3: OCR processing returned no result
2025-09-17 13:37:44,427 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105457_323642cf)
2025-09-17 13:37:44,428 - core.ocr_queue - ERROR - Job ocr_F2_1758105457_323642cf permanently failed: OCR processing returned no result
2025-09-17 13:37:47,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:57 MSK)" (scheduled at 2025-09-17 13:37:47.654805+03:00)
2025-09-17 13:37:47,656 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:47,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:37:57 MSK)" executed successfully
2025-09-17 13:37:57,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:07 MSK)" (scheduled at 2025-09-17 13:37:57.654805+03:00)
2025-09-17 13:37:57,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:37:57,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:07 MSK)" executed successfully
2025-09-17 13:38:07,653 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:38:37 MSK)" (scheduled at 2025-09-17 13:38:07.651806+03:00)
2025-09-17 13:38:07,654 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:38:37 MSK)" executed successfully
2025-09-17 13:38:07,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:17 MSK)" (scheduled at 2025-09-17 13:38:07.654805+03:00)
2025-09-17 13:38:07,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:07,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:17 MSK)" executed successfully
2025-09-17 13:38:17,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:27 MSK)" (scheduled at 2025-09-17 13:38:17.654805+03:00)
2025-09-17 13:38:17,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:17,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:27 MSK)" executed successfully
2025-09-17 13:38:22,668 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:39:07 MSK)" (scheduled at 2025-09-17 13:38:22.653805+03:00)
2025-09-17 13:38:22,669 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:39:07 MSK)" executed successfully
2025-09-17 13:38:27,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:37 MSK)" (scheduled at 2025-09-17 13:38:27.654805+03:00)
2025-09-17 13:38:27,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:27,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:37 MSK)" executed successfully
2025-09-17 13:38:37,660 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:39:07 MSK)" (scheduled at 2025-09-17 13:38:37.651806+03:00)
2025-09-17 13:38:37,660 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:39:37 MSK)" (scheduled at 2025-09-17 13:38:37.652805+03:00)
2025-09-17 13:38:37,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:47 MSK)" (scheduled at 2025-09-17 13:38:37.654805+03:00)
2025-09-17 13:38:37,661 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:39:07 MSK)" executed successfully
2025-09-17 13:38:37,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:37,662 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:38:37,662 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:47 MSK)" executed successfully
2025-09-17 13:38:37,756 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133837_690_6ce204c7.jpg (700x1800) in 0.093s
2025-09-17 13:38:37,761 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:38:37,761 - core.database_manager - INFO - Created OCR session 14 for hotkey F2
2025-09-17 13:38:37,762 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105517_20fea532 for F2 (session 14)
2025-09-17 13:38:37,762 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105517_20fea532 (attempt 1)
2025-09-17 13:38:37,763 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:39:37 MSK)" executed successfully
2025-09-17 13:38:37,763 - core.ocr_client - INFO - Starting OCR request 68a2d097 for merged_20250917_133837_690_6ce204c7.jpg (0.2MB)
2025-09-17 13:38:37,764 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:38:37,887 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 68a2d097: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:38:37,888 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:38:37,959 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 68a2d097: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "6fad078a-a857-4a1a-9f89-52abcf15b568"
  }
 ]
}

2025-09-17 13:38:37,960 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:38:37,960 - core.ocr_queue - ERROR - Job ocr_F2_1758105517_20fea532 failed on attempt 1: OCR processing returned no result
2025-09-17 13:38:37,961 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105517_20fea532 for retry in 2s
2025-09-17 13:38:39,963 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105517_20fea532 (attempt 2)
2025-09-17 13:38:39,963 - core.ocr_client - INFO - Starting OCR request 9e673673 for merged_20250917_133837_690_6ce204c7.jpg (0.2MB)
2025-09-17 13:38:39,964 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:38:40,060 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 9e673673: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:38:40,061 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:38:40,143 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 9e673673: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "8abeb033-da63-45e7-8ded-6444535e18f8"
  }
 ]
}

2025-09-17 13:38:40,144 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:38:40,144 - core.ocr_queue - ERROR - Job ocr_F2_1758105517_20fea532 failed on attempt 2: OCR processing returned no result
2025-09-17 13:38:40,145 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105517_20fea532 for retry in 4s
2025-09-17 13:38:44,146 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105517_20fea532 (attempt 3)
2025-09-17 13:38:44,146 - core.ocr_client - INFO - Starting OCR request 0d06c0af for merged_20250917_133837_690_6ce204c7.jpg (0.2MB)
2025-09-17 13:38:44,147 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:38:44,259 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0d06c0af: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:38:44,260 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:38:44,374 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0d06c0af: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d0680263-bf8c-47a4-8688-aa11b957ca31"
  }
 ]
}

2025-09-17 13:38:44,375 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:38:44,376 - core.ocr_queue - ERROR - Job ocr_F2_1758105517_20fea532 failed on attempt 3: OCR processing returned no result
2025-09-17 13:38:44,376 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105517_20fea532)
2025-09-17 13:38:44,377 - core.ocr_queue - ERROR - Job ocr_F2_1758105517_20fea532 permanently failed: OCR processing returned no result
2025-09-17 13:38:47,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:57 MSK)" (scheduled at 2025-09-17 13:38:47.654805+03:00)
2025-09-17 13:38:47,656 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:47,656 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:38:57 MSK)" executed successfully
2025-09-17 13:38:57,658 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:07 MSK)" (scheduled at 2025-09-17 13:38:57.654805+03:00)
2025-09-17 13:38:57,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:38:57,659 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:07 MSK)" executed successfully
2025-09-17 13:39:07,664 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:39:37 MSK)" (scheduled at 2025-09-17 13:39:07.651806+03:00)
2025-09-17 13:39:07,664 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:39:52 MSK)" (scheduled at 2025-09-17 13:39:07.653805+03:00)
2025-09-17 13:39:07,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:17 MSK)" (scheduled at 2025-09-17 13:39:07.654805+03:00)
2025-09-17 13:39:07,666 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:39:37 MSK)" executed successfully
2025-09-17 13:39:07,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:07,666 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:39:52 MSK)" executed successfully
2025-09-17 13:39:07,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:17 MSK)" executed successfully
2025-09-17 13:39:17,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:27 MSK)" (scheduled at 2025-09-17 13:39:17.654805+03:00)
2025-09-17 13:39:17,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:17,669 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:27 MSK)" executed successfully
2025-09-17 13:39:27,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:37 MSK)" (scheduled at 2025-09-17 13:39:27.654805+03:00)
2025-09-17 13:39:27,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:27,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:37 MSK)" executed successfully
2025-09-17 13:39:37,652 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:40:07 MSK)" (scheduled at 2025-09-17 13:39:37.651806+03:00)
2025-09-17 13:39:37,653 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:40:07 MSK)" executed successfully
2025-09-17 13:39:37,668 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:40:37 MSK)" (scheduled at 2025-09-17 13:39:37.652805+03:00)
2025-09-17 13:39:37,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:47 MSK)" (scheduled at 2025-09-17 13:39:37.654805+03:00)
2025-09-17 13:39:37,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:37,670 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:39:37,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:47 MSK)" executed successfully
2025-09-17 13:39:37,969 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_133937_885_245d2b1c.jpg (700x1800) in 0.299s
2025-09-17 13:39:37,974 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:39:37,975 - core.database_manager - INFO - Created OCR session 15 for hotkey F2
2025-09-17 13:39:37,976 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105577_5f00bb4d for F2 (session 15)
2025-09-17 13:39:37,976 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105577_5f00bb4d (attempt 1)
2025-09-17 13:39:37,976 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:40:37 MSK)" executed successfully
2025-09-17 13:39:37,977 - core.ocr_client - INFO - Starting OCR request 745b421c for merged_20250917_133937_885_245d2b1c.jpg (0.2MB)
2025-09-17 13:39:37,977 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:39:38,806 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 745b421c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:39:38,806 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:39:39,623 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 745b421c: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b1304e66-a4cb-4b9e-b0ae-efb98e5183fd"
  }
 ]
}

2025-09-17 13:39:39,623 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:39:39,624 - core.ocr_queue - ERROR - Job ocr_F2_1758105577_5f00bb4d failed on attempt 1: OCR processing returned no result
2025-09-17 13:39:39,624 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105577_5f00bb4d for retry in 2s
2025-09-17 13:39:41,625 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105577_5f00bb4d (attempt 2)
2025-09-17 13:39:41,626 - core.ocr_client - INFO - Starting OCR request 73adff72 for merged_20250917_133937_885_245d2b1c.jpg (0.2MB)
2025-09-17 13:39:41,705 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:39:41,845 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 73adff72: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:39:41,846 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:39:42,008 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 73adff72: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "bd7e1b28-e142-48de-b935-46e50f93993a"
  }
 ]
}

2025-09-17 13:39:42,008 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:39:42,008 - core.ocr_queue - ERROR - Job ocr_F2_1758105577_5f00bb4d failed on attempt 2: OCR processing returned no result
2025-09-17 13:39:42,009 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105577_5f00bb4d for retry in 4s
2025-09-17 13:39:46,011 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758105577_5f00bb4d (attempt 3)
2025-09-17 13:39:46,011 - core.ocr_client - INFO - Starting OCR request abd28407 for merged_20250917_133937_885_245d2b1c.jpg (0.2MB)
2025-09-17 13:39:46,012 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:39:46,111 - core.ocr_client - ERROR - Non-retryable error for primary-ocr abd28407: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:39:46,112 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:39:46,208 - core.ocr_client - ERROR - Non-retryable error for fallback-vision abd28407: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "5af9205a-cbe9-4a21-9ca2-8f5b55fbb8a6"
  }
 ]
}

2025-09-17 13:39:46,209 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:39:46,210 - core.ocr_queue - ERROR - Job ocr_F2_1758105577_5f00bb4d failed on attempt 3: OCR processing returned no result
2025-09-17 13:39:46,210 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105577_5f00bb4d)
2025-09-17 13:39:46,211 - core.ocr_queue - ERROR - Job ocr_F2_1758105577_5f00bb4d permanently failed: OCR processing returned no result
2025-09-17 13:39:47,667 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:57 MSK)" (scheduled at 2025-09-17 13:39:47.654805+03:00)
2025-09-17 13:39:47,668 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:47,668 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:39:57 MSK)" executed successfully
2025-09-17 13:39:52,665 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:40:37 MSK)" (scheduled at 2025-09-17 13:39:52.653805+03:00)
2025-09-17 13:39:52,666 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:40:37 MSK)" executed successfully
2025-09-17 13:39:57,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:07 MSK)" (scheduled at 2025-09-17 13:39:57.654805+03:00)
2025-09-17 13:39:57,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:39:57,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:07 MSK)" executed successfully
2025-09-17 13:40:00,116 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 13:40:00,116 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 13:40:07,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:40:37 MSK)" (scheduled at 2025-09-17 13:40:07.651806+03:00)
2025-09-17 13:40:07,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:17 MSK)" (scheduled at 2025-09-17 13:40:07.654805+03:00)
2025-09-17 13:40:07,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:07,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:40:37 MSK)" executed successfully
2025-09-17 13:40:07,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:17 MSK)" executed successfully
2025-09-17 13:40:17,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:27 MSK)" (scheduled at 2025-09-17 13:40:17.654805+03:00)
2025-09-17 13:40:17,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:17,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:27 MSK)" executed successfully
2025-09-17 13:40:27,670 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:37 MSK)" (scheduled at 2025-09-17 13:40:27.654805+03:00)
2025-09-17 13:40:27,671 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:27,671 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:37 MSK)" executed successfully
2025-09-17 13:40:37,653 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:41:07 MSK)" (scheduled at 2025-09-17 13:40:37.651806+03:00)
2025-09-17 13:40:37,653 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:41:37 MSK)" (scheduled at 2025-09-17 13:40:37.652805+03:00)
2025-09-17 13:40:37,654 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:41:07 MSK)" executed successfully
2025-09-17 13:40:37,655 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:40:37,668 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:41:22 MSK)" (scheduled at 2025-09-17 13:40:37.653805+03:00)
2025-09-17 13:40:37,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:47 MSK)" (scheduled at 2025-09-17 13:40:37.654805+03:00)
2025-09-17 13:40:37,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:37,670 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:41:22 MSK)" executed successfully
2025-09-17 13:40:37,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:47 MSK)" executed successfully
2025-09-17 13:40:37,747 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_134037_682_25f5ad5c.jpg (700x1800) in 0.091s
2025-09-17 13:40:37,752 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:40:37,753 - core.database_manager - INFO - Created OCR session 16 for hotkey F2
2025-09-17 13:40:37,753 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105637_76669139 for F2 (session 16)
2025-09-17 13:40:37,753 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105637_76669139 (attempt 1)
2025-09-17 13:40:37,754 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:41:37 MSK)" executed successfully
2025-09-17 13:40:37,754 - core.ocr_client - INFO - Starting OCR request caca1044 for merged_20250917_134037_682_25f5ad5c.jpg (0.2MB)
2025-09-17 13:40:37,755 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:40:37,874 - core.ocr_client - ERROR - Non-retryable error for primary-ocr caca1044: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:40:37,875 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:40:37,982 - core.ocr_client - ERROR - Non-retryable error for fallback-vision caca1044: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "be0ef911-dadb-45f6-9ac3-740d2ae54733"
  }
 ]
}

2025-09-17 13:40:37,984 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:40:37,985 - core.ocr_queue - ERROR - Job ocr_F2_1758105637_76669139 failed on attempt 1: OCR processing returned no result
2025-09-17 13:40:37,985 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105637_76669139 for retry in 2s
2025-09-17 13:40:39,986 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105637_76669139 (attempt 2)
2025-09-17 13:40:39,986 - core.ocr_client - INFO - Starting OCR request 0fd88aad for merged_20250917_134037_682_25f5ad5c.jpg (0.2MB)
2025-09-17 13:40:39,987 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:40:40,088 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0fd88aad: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:40:40,088 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:40:40,187 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0fd88aad: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "7403ec62-9bfd-4bbc-ad1d-cf3fa057c7b3"
  }
 ]
}

2025-09-17 13:40:40,188 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:40:40,188 - core.ocr_queue - ERROR - Job ocr_F2_1758105637_76669139 failed on attempt 2: OCR processing returned no result
2025-09-17 13:40:40,189 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105637_76669139 for retry in 4s
2025-09-17 13:40:44,190 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105637_76669139 (attempt 3)
2025-09-17 13:40:44,191 - core.ocr_client - INFO - Starting OCR request 5cada534 for merged_20250917_134037_682_25f5ad5c.jpg (0.2MB)
2025-09-17 13:40:44,191 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:40:44,320 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5cada534: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:40:44,321 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:40:44,478 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5cada534: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "863abd6a-abdc-4de1-8cc4-5be8287d786b"
  }
 ]
}

2025-09-17 13:40:44,478 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:40:44,479 - core.ocr_queue - ERROR - Job ocr_F2_1758105637_76669139 failed on attempt 3: OCR processing returned no result
2025-09-17 13:40:44,479 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105637_76669139)
2025-09-17 13:40:44,480 - core.ocr_queue - ERROR - Job ocr_F2_1758105637_76669139 permanently failed: OCR processing returned no result
2025-09-17 13:40:47,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:57 MSK)" (scheduled at 2025-09-17 13:40:47.654805+03:00)
2025-09-17 13:40:47,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:47,666 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:40:57 MSK)" executed successfully
2025-09-17 13:40:57,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:07 MSK)" (scheduled at 2025-09-17 13:40:57.654805+03:00)
2025-09-17 13:40:57,666 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:40:57,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:07 MSK)" executed successfully
2025-09-17 13:41:07,661 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:41:37 MSK)" (scheduled at 2025-09-17 13:41:07.651806+03:00)
2025-09-17 13:41:07,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:17 MSK)" (scheduled at 2025-09-17 13:41:07.654805+03:00)
2025-09-17 13:41:07,662 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:41:37 MSK)" executed successfully
2025-09-17 13:41:07,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:07,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:17 MSK)" executed successfully
2025-09-17 13:41:17,656 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:27 MSK)" (scheduled at 2025-09-17 13:41:17.654805+03:00)
2025-09-17 13:41:17,657 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:17,657 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:27 MSK)" executed successfully
2025-09-17 13:41:22,657 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:42:07 MSK)" (scheduled at 2025-09-17 13:41:22.653805+03:00)
2025-09-17 13:41:22,658 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:42:07 MSK)" executed successfully
2025-09-17 13:41:27,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:37 MSK)" (scheduled at 2025-09-17 13:41:27.654805+03:00)
2025-09-17 13:41:27,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:27,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:37 MSK)" executed successfully
2025-09-17 13:41:37,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:42:07 MSK)" (scheduled at 2025-09-17 13:41:37.651806+03:00)
2025-09-17 13:41:37,663 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:42:37 MSK)" (scheduled at 2025-09-17 13:41:37.652805+03:00)
2025-09-17 13:41:37,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:47 MSK)" (scheduled at 2025-09-17 13:41:37.654805+03:00)
2025-09-17 13:41:37,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:42:07 MSK)" executed successfully
2025-09-17 13:41:37,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:37,665 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:41:37,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:47 MSK)" executed successfully
2025-09-17 13:41:37,754 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_134137_691_9fe670a0.jpg (700x1800) in 0.088s
2025-09-17 13:41:37,759 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:41:37,760 - core.database_manager - INFO - Created OCR session 17 for hotkey F2
2025-09-17 13:41:37,760 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105697_0ae91c27 for F2 (session 17)
2025-09-17 13:41:37,760 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105697_0ae91c27 (attempt 1)
2025-09-17 13:41:37,761 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:42:37 MSK)" executed successfully
2025-09-17 13:41:37,761 - core.ocr_client - INFO - Starting OCR request d06351e9 for merged_20250917_134137_691_9fe670a0.jpg (0.2MB)
2025-09-17 13:41:37,762 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:41:37,869 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d06351e9: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:41:37,870 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:41:37,968 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d06351e9: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "70d4bf7b-6438-4d47-9713-58ec8808d4e0"
  }
 ]
}

2025-09-17 13:41:37,969 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:41:37,969 - core.ocr_queue - ERROR - Job ocr_F2_1758105697_0ae91c27 failed on attempt 1: OCR processing returned no result
2025-09-17 13:41:37,969 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105697_0ae91c27 for retry in 2s
2025-09-17 13:41:39,971 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105697_0ae91c27 (attempt 2)
2025-09-17 13:41:39,971 - core.ocr_client - INFO - Starting OCR request 35e20b19 for merged_20250917_134137_691_9fe670a0.jpg (0.2MB)
2025-09-17 13:41:39,972 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:41:40,068 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 35e20b19: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:41:40,069 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:41:40,174 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 35e20b19: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "78c7795a-78df-4c42-a201-c0bee0483c91"
  }
 ]
}

2025-09-17 13:41:40,175 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:41:40,175 - core.ocr_queue - ERROR - Job ocr_F2_1758105697_0ae91c27 failed on attempt 2: OCR processing returned no result
2025-09-17 13:41:40,175 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105697_0ae91c27 for retry in 4s
2025-09-17 13:41:44,177 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105697_0ae91c27 (attempt 3)
2025-09-17 13:41:44,177 - core.ocr_client - INFO - Starting OCR request ea676b1e for merged_20250917_134137_691_9fe670a0.jpg (0.2MB)
2025-09-17 13:41:44,178 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:41:44,284 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ea676b1e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:41:44,284 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:41:44,389 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ea676b1e: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "04b67325-321b-4cf7-b8fe-a1f75da00c10"
  }
 ]
}

2025-09-17 13:41:44,390 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:41:44,390 - core.ocr_queue - ERROR - Job ocr_F2_1758105697_0ae91c27 failed on attempt 3: OCR processing returned no result
2025-09-17 13:41:44,391 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105697_0ae91c27)
2025-09-17 13:41:44,391 - core.ocr_queue - ERROR - Job ocr_F2_1758105697_0ae91c27 permanently failed: OCR processing returned no result
2025-09-17 13:41:47,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:57 MSK)" (scheduled at 2025-09-17 13:41:47.654805+03:00)
2025-09-17 13:41:47,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:47,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:41:57 MSK)" executed successfully
2025-09-17 13:41:57,660 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:07 MSK)" (scheduled at 2025-09-17 13:41:57.654805+03:00)
2025-09-17 13:41:57,661 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:41:57,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:07 MSK)" executed successfully
2025-09-17 13:42:07,652 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:42:37 MSK)" (scheduled at 2025-09-17 13:42:07.651806+03:00)
2025-09-17 13:42:07,653 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:42:37 MSK)" executed successfully
2025-09-17 13:42:07,668 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:42:52 MSK)" (scheduled at 2025-09-17 13:42:07.653805+03:00)
2025-09-17 13:42:07,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:17 MSK)" (scheduled at 2025-09-17 13:42:07.654805+03:00)
2025-09-17 13:42:07,669 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:42:52 MSK)" executed successfully
2025-09-17 13:42:07,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:07,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:17 MSK)" executed successfully
2025-09-17 13:42:17,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:27 MSK)" (scheduled at 2025-09-17 13:42:17.654805+03:00)
2025-09-17 13:42:17,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:17,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:27 MSK)" executed successfully
2025-09-17 13:42:27,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:37 MSK)" (scheduled at 2025-09-17 13:42:27.654805+03:00)
2025-09-17 13:42:27,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:27,661 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:37 MSK)" executed successfully
2025-09-17 13:42:37,665 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:43:07 MSK)" (scheduled at 2025-09-17 13:42:37.651806+03:00)
2025-09-17 13:42:37,665 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:43:37 MSK)" (scheduled at 2025-09-17 13:42:37.652805+03:00)
2025-09-17 13:42:37,665 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:47 MSK)" (scheduled at 2025-09-17 13:42:37.654805+03:00)
2025-09-17 13:42:37,666 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:43:07 MSK)" executed successfully
2025-09-17 13:42:37,667 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:37,667 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:42:37,667 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:47 MSK)" executed successfully
2025-09-17 13:42:37,772 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_134237_697_2338b6c4.jpg (700x1800) in 0.105s
2025-09-17 13:42:37,777 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:42:37,777 - core.database_manager - INFO - Created OCR session 18 for hotkey F2
2025-09-17 13:42:37,778 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105757_69637af1 for F2 (session 18)
2025-09-17 13:42:37,778 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105757_69637af1 (attempt 1)
2025-09-17 13:42:37,779 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:43:37 MSK)" executed successfully
2025-09-17 13:42:37,779 - core.ocr_client - INFO - Starting OCR request 43bde323 for merged_20250917_134237_697_2338b6c4.jpg (0.2MB)
2025-09-17 13:42:37,780 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:42:37,888 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 43bde323: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:42:37,889 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:42:37,990 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 43bde323: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "767ecb5f-e12e-4667-8100-9eef54227237"
  }
 ]
}

2025-09-17 13:42:37,991 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:42:37,992 - core.ocr_queue - ERROR - Job ocr_F2_1758105757_69637af1 failed on attempt 1: OCR processing returned no result
2025-09-17 13:42:37,992 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105757_69637af1 for retry in 2s
2025-09-17 13:42:39,993 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105757_69637af1 (attempt 2)
2025-09-17 13:42:39,993 - core.ocr_client - INFO - Starting OCR request 2f690e25 for merged_20250917_134237_697_2338b6c4.jpg (0.2MB)
2025-09-17 13:42:39,994 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:42:40,091 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2f690e25: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:42:40,092 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:42:40,194 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2f690e25: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "114b62f9-d897-40df-8209-f4852e1a74c6"
  }
 ]
}

2025-09-17 13:42:40,195 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:42:40,195 - core.ocr_queue - ERROR - Job ocr_F2_1758105757_69637af1 failed on attempt 2: OCR processing returned no result
2025-09-17 13:42:40,196 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105757_69637af1 for retry in 4s
2025-09-17 13:42:44,196 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105757_69637af1 (attempt 3)
2025-09-17 13:42:44,197 - core.ocr_client - INFO - Starting OCR request 7791317b for merged_20250917_134237_697_2338b6c4.jpg (0.2MB)
2025-09-17 13:42:44,197 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:42:44,296 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 7791317b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:42:44,297 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:42:44,405 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 7791317b: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e2d1738f-0027-4817-9c99-96aeab28d432"
  }
 ]
}

2025-09-17 13:42:44,405 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:42:44,405 - core.ocr_queue - ERROR - Job ocr_F2_1758105757_69637af1 failed on attempt 3: OCR processing returned no result
2025-09-17 13:42:44,406 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105757_69637af1)
2025-09-17 13:42:44,406 - core.ocr_queue - ERROR - Job ocr_F2_1758105757_69637af1 permanently failed: OCR processing returned no result
2025-09-17 13:42:47,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:57 MSK)" (scheduled at 2025-09-17 13:42:47.654805+03:00)
2025-09-17 13:42:47,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:47,664 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:42:57 MSK)" executed successfully
2025-09-17 13:42:52,662 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:43:37 MSK)" (scheduled at 2025-09-17 13:42:52.653805+03:00)
2025-09-17 13:42:52,663 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:43:37 MSK)" executed successfully
2025-09-17 13:42:57,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:07 MSK)" (scheduled at 2025-09-17 13:42:57.654805+03:00)
2025-09-17 13:42:57,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:42:57,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:07 MSK)" executed successfully
2025-09-17 13:43:07,653 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:43:37 MSK)" (scheduled at 2025-09-17 13:43:07.651806+03:00)
2025-09-17 13:43:07,654 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:43:37 MSK)" executed successfully
2025-09-17 13:43:07,668 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:17 MSK)" (scheduled at 2025-09-17 13:43:07.654805+03:00)
2025-09-17 13:43:07,669 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:07,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:17 MSK)" executed successfully
2025-09-17 13:43:17,664 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:27 MSK)" (scheduled at 2025-09-17 13:43:17.654805+03:00)
2025-09-17 13:43:17,665 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:17,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:27 MSK)" executed successfully
2025-09-17 13:43:27,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:37 MSK)" (scheduled at 2025-09-17 13:43:27.654805+03:00)
2025-09-17 13:43:27,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:27,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:37 MSK)" executed successfully
2025-09-17 13:43:37,667 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:44:07 MSK)" (scheduled at 2025-09-17 13:43:37.651806+03:00)
2025-09-17 13:43:37,667 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:44:37 MSK)" (scheduled at 2025-09-17 13:43:37.652805+03:00)
2025-09-17 13:43:37,667 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:44:22 MSK)" (scheduled at 2025-09-17 13:43:37.653805+03:00)
2025-09-17 13:43:37,667 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:47 MSK)" (scheduled at 2025-09-17 13:43:37.654805+03:00)
2025-09-17 13:43:37,669 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:44:07 MSK)" executed successfully
2025-09-17 13:43:37,670 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:44:22 MSK)" executed successfully
2025-09-17 13:43:37,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:37,670 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:43:37,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:47 MSK)" executed successfully
2025-09-17 13:43:37,761 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_134337_696_2285fe7e.jpg (700x1800) in 0.090s
2025-09-17 13:43:37,766 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:43:37,767 - core.database_manager - INFO - Created OCR session 19 for hotkey F2
2025-09-17 13:43:37,768 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105817_4021430c for F2 (session 19)
2025-09-17 13:43:37,768 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105817_4021430c (attempt 1)
2025-09-17 13:43:37,768 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:44:37 MSK)" executed successfully
2025-09-17 13:43:37,769 - core.ocr_client - INFO - Starting OCR request 216e1be0 for merged_20250917_134337_696_2285fe7e.jpg (0.2MB)
2025-09-17 13:43:37,769 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:43:37,879 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 216e1be0: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:43:37,880 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:43:37,987 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 216e1be0: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a6247d9f-2846-4251-a7f5-72fbe5124bfc"
  }
 ]
}

2025-09-17 13:43:37,988 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:43:37,988 - core.ocr_queue - ERROR - Job ocr_F2_1758105817_4021430c failed on attempt 1: OCR processing returned no result
2025-09-17 13:43:37,988 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105817_4021430c for retry in 2s
2025-09-17 13:43:39,990 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105817_4021430c (attempt 2)
2025-09-17 13:43:39,990 - core.ocr_client - INFO - Starting OCR request fbc1c427 for merged_20250917_134337_696_2285fe7e.jpg (0.2MB)
2025-09-17 13:43:39,991 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:43:40,088 - core.ocr_client - ERROR - Non-retryable error for primary-ocr fbc1c427: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:43:40,089 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:43:40,186 - core.ocr_client - ERROR - Non-retryable error for fallback-vision fbc1c427: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "9767d265-885e-4968-833b-5d62bbda7b14"
  }
 ]
}

2025-09-17 13:43:40,187 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:43:40,188 - core.ocr_queue - ERROR - Job ocr_F2_1758105817_4021430c failed on attempt 2: OCR processing returned no result
2025-09-17 13:43:40,188 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105817_4021430c for retry in 4s
2025-09-17 13:43:44,189 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105817_4021430c (attempt 3)
2025-09-17 13:43:44,189 - core.ocr_client - INFO - Starting OCR request f1915876 for merged_20250917_134337_696_2285fe7e.jpg (0.2MB)
2025-09-17 13:43:44,190 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:43:44,302 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f1915876: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:43:44,302 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:43:44,400 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f1915876: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "24f9026b-ac0d-4827-b818-68ac043e4cba"
  }
 ]
}

2025-09-17 13:43:44,401 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:43:44,402 - core.ocr_queue - ERROR - Job ocr_F2_1758105817_4021430c failed on attempt 3: OCR processing returned no result
2025-09-17 13:43:44,402 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105817_4021430c)
2025-09-17 13:43:44,403 - core.ocr_queue - ERROR - Job ocr_F2_1758105817_4021430c permanently failed: OCR processing returned no result
2025-09-17 13:43:47,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:57 MSK)" (scheduled at 2025-09-17 13:43:47.654805+03:00)
2025-09-17 13:43:47,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:47,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:43:57 MSK)" executed successfully
2025-09-17 13:43:57,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:07 MSK)" (scheduled at 2025-09-17 13:43:57.654805+03:00)
2025-09-17 13:43:57,659 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:43:57,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:07 MSK)" executed successfully
2025-09-17 13:44:07,663 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:44:37 MSK)" (scheduled at 2025-09-17 13:44:07.651806+03:00)
2025-09-17 13:44:07,663 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:17 MSK)" (scheduled at 2025-09-17 13:44:07.654805+03:00)
2025-09-17 13:44:07,664 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:44:37 MSK)" executed successfully
2025-09-17 13:44:07,664 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:07,665 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:17 MSK)" executed successfully
2025-09-17 13:44:17,659 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:27 MSK)" (scheduled at 2025-09-17 13:44:17.654805+03:00)
2025-09-17 13:44:17,660 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:17,660 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:27 MSK)" executed successfully
2025-09-17 13:44:22,660 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:45:07 MSK)" (scheduled at 2025-09-17 13:44:22.653805+03:00)
2025-09-17 13:44:22,661 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 13:45:07 MSK)" executed successfully
2025-09-17 13:44:27,662 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:37 MSK)" (scheduled at 2025-09-17 13:44:27.654805+03:00)
2025-09-17 13:44:27,663 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:27,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:37 MSK)" executed successfully
2025-09-17 13:44:37,655 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:45:07 MSK)" (scheduled at 2025-09-17 13:44:37.651806+03:00)
2025-09-17 13:44:37,655 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:45:37 MSK)" (scheduled at 2025-09-17 13:44:37.652805+03:00)
2025-09-17 13:44:37,655 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:47 MSK)" (scheduled at 2025-09-17 13:44:37.654805+03:00)
2025-09-17 13:44:37,657 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 13:45:07 MSK)" executed successfully
2025-09-17 13:44:37,657 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:37,657 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 13:44:37,657 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:47 MSK)" executed successfully
2025-09-17 13:44:37,726 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_134437_659_d43862e0.jpg (700x1800) in 0.068s
2025-09-17 13:44:37,730 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 13:44:37,731 - core.database_manager - INFO - Created OCR session 20 for hotkey F2
2025-09-17 13:44:37,732 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758105877_5fa3a8ec for F2 (session 20)
2025-09-17 13:44:37,732 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105877_5fa3a8ec (attempt 1)
2025-09-17 13:44:37,732 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 13:45:37 MSK)" executed successfully
2025-09-17 13:44:37,732 - core.ocr_client - INFO - Starting OCR request e616b3b4 for merged_20250917_134437_659_d43862e0.jpg (0.2MB)
2025-09-17 13:44:37,733 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:44:37,840 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e616b3b4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:44:37,840 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:44:37,938 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e616b3b4: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d1a2eecb-87e4-44fd-b1da-cdfe5c64497e"
  }
 ]
}

2025-09-17 13:44:37,939 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:44:37,939 - core.ocr_queue - ERROR - Job ocr_F2_1758105877_5fa3a8ec failed on attempt 1: OCR processing returned no result
2025-09-17 13:44:37,940 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105877_5fa3a8ec for retry in 2s
2025-09-17 13:44:39,941 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105877_5fa3a8ec (attempt 2)
2025-09-17 13:44:39,941 - core.ocr_client - INFO - Starting OCR request 3097e55c for merged_20250917_134437_659_d43862e0.jpg (0.2MB)
2025-09-17 13:44:39,943 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:44:40,041 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 3097e55c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:44:40,042 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:44:40,149 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 3097e55c: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ab60d5f9-493c-4ee5-8dc9-3b15a561b171"
  }
 ]
}

2025-09-17 13:44:40,149 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:44:40,150 - core.ocr_queue - ERROR - Job ocr_F2_1758105877_5fa3a8ec failed on attempt 2: OCR processing returned no result
2025-09-17 13:44:40,150 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758105877_5fa3a8ec for retry in 4s
2025-09-17 13:44:44,152 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758105877_5fa3a8ec (attempt 3)
2025-09-17 13:44:44,153 - core.ocr_client - INFO - Starting OCR request dd50d459 for merged_20250917_134437_659_d43862e0.jpg (0.2MB)
2025-09-17 13:44:44,153 - core.ocr_client - INFO - Trying primary API: ocr format with api_key auth
2025-09-17 13:44:44,251 - core.ocr_client - ERROR - Non-retryable error for primary-ocr dd50d459: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"Unknown api key 'AQVN****wxyz (5BDA1EF9)'","httpStatus":"Unauthorized","details":[]}}
2025-09-17 13:44:44,252 - core.ocr_client - INFO - Trying fallback API: vision format with bearer auth
2025-09-17 13:44:44,349 - core.ocr_client - ERROR - Non-retryable error for fallback-vision dd50d459: HTTP 401: {
 "code": 16,
 "message": "The token is invalid",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f67dbb8f-5a20-4154-af68-fb702148f957"
  }
 ]
}

2025-09-17 13:44:44,349 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 13:44:44,350 - core.ocr_queue - ERROR - Job ocr_F2_1758105877_5fa3a8ec failed on attempt 3: OCR processing returned no result
2025-09-17 13:44:44,351 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758105877_5fa3a8ec)
2025-09-17 13:44:44,351 - core.ocr_queue - ERROR - Job ocr_F2_1758105877_5fa3a8ec permanently failed: OCR processing returned no result
2025-09-17 13:44:47,669 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:57 MSK)" (scheduled at 2025-09-17 13:44:47.654805+03:00)
2025-09-17 13:44:47,670 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:47,670 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:44:57 MSK)" executed successfully
2025-09-17 13:44:57,661 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:45:07 MSK)" (scheduled at 2025-09-17 13:44:57.654805+03:00)
2025-09-17 13:44:57,662 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 13:44:57,663 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 13:45:07 MSK)" executed successfully
2025-09-17 13:45:00,266 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 13:45:00,266 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 13:45:03,816 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 13:45:03,816 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 13:45:03,817 - main - INFO - Stopping task scheduler...
2025-09-17 13:45:03,817 - utils.scheduler - INFO - Stopping task scheduler
2025-09-17 13:45:03,818 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-09-17 13:45:03,818 - utils.scheduler - INFO - Task scheduler stopped
2025-09-17 13:45:03,818 - main - INFO - Stopping screenshot capture...
2025-09-17 13:45:03,819 - core.screenshot_capture - ERROR - Error closing MSS instance: '_thread._local' object has no attribute 'bmp'
2025-09-17 13:45:03,819 - core.screenshot_capture - INFO - Screenshot capture system stopped
2025-09-17 13:45:03,820 - main - INFO - Stopping OCR queue...
2025-09-17 13:45:03,820 - core.ocr_queue - INFO - Stopping OCR queue...
2025-09-17 13:45:04,501 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 13:45:04,501 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 13:45:04,502 - main - INFO - Stopping task scheduler...
2025-09-17 13:45:04,502 - main - INFO - Stopping screenshot capture...
2025-09-17 13:45:04,502 - main - INFO - Stopping OCR queue...
2025-09-17 13:45:04,503 - main - INFO - Closing OCR client...
2025-09-17 13:45:04,505 - core.ocr_client - INFO - OCR client closed
2025-09-17 13:45:04,506 - main - INFO - Closing database connections...
2025-09-17 13:45:04,507 - main - INFO - System shutdown completed
2025-09-17 13:45:04,507 - core.ocr_queue - INFO - OCR queue stopped
2025-09-17 13:45:04,507 - main - INFO - Closing OCR client...
2025-09-17 13:45:04,508 - core.ocr_client - INFO - OCR client closed
2025-09-17 13:45:04,508 - main - INFO - Closing database connections...
2025-09-17 13:45:04,508 - main - INFO - System shutdown completed
2025-09-17 14:01:01,140 - main - INFO - === Market Monitoring System Starting ===
2025-09-17 14:01:01,140 - main - INFO - Configuration loaded from: config.json
2025-09-17 14:01:01,141 - main - INFO - Initializing file utilities...
2025-09-17 14:01:01,141 - main - INFO - Initializing database...
2025-09-17 14:01:01,143 - core.database_manager - INFO - Database schema initialized successfully
2025-09-17 14:01:01,143 - main - INFO - Initializing image processor...
2025-09-17 14:01:01,144 - main - INFO - Initializing OCR client...
2025-09-17 14:01:01,144 - core.ocr_client - INFO - OCR client initialized with bearer auth, ocr format
2025-09-17 14:01:01,145 - main - INFO - Initializing OCR queue...
2025-09-17 14:01:01,145 - main - INFO - Initializing text parser...
2025-09-17 14:01:01,148 - core.text_parser - INFO - Compiled 10 parsing patterns
2025-09-17 14:01:01,148 - main - INFO - Initializing monitoring engine...
2025-09-17 14:01:01,149 - main - INFO - Initializing screenshot capture...
2025-09-17 14:01:01,149 - main - INFO - Initializing task scheduler...
2025-09-17 14:01:01,152 - main - INFO - Performing system health checks...
2025-09-17 14:01:01,153 - main - INFO - Checking database connectivity...
2025-09-17 14:01:01,153 - main - INFO - Database check passed - status summary: {}
2025-09-17 14:01:01,153 - main - INFO - Checking OCR API connectivity...
2025-09-17 14:01:01,701 - core.ocr_client - INFO - OCR API connection test successful
2025-09-17 14:01:01,702 - main - INFO - OCR API check passed
2025-09-17 14:01:01,702 - main - INFO - Checking file system permissions...
2025-09-17 14:01:01,948 - main - INFO - File system check passed
2025-09-17 14:01:01,948 - main - INFO - Checking configuration completeness...
2025-09-17 14:01:01,949 - main - INFO - Configuration check passed - 3 enabled hotkeys
2025-09-17 14:01:01,949 - main - INFO - System initialization completed successfully
2025-09-17 14:01:01,950 - main - INFO - Starting Market Monitoring System...
2025-09-17 14:01:01,950 - main - INFO - Starting OCR processing queue...
2025-09-17 14:01:01,951 - core.ocr_queue - INFO - OCR queue started with 2 workers
2025-09-17 14:01:01,951 - main - INFO - Starting screenshot capture system...
2025-09-17 14:01:01,952 - core.screenshot_capture - ERROR - Failed to clear hotkey handlers: '_KeyboardListener' object has no attribute 'blocking_hotkeys'
2025-09-17 14:01:02,023 - core.screenshot_capture - INFO - Registered hotkey F1 for Полная обработка товаров (цена, количество)
2025-09-17 14:01:02,024 - core.screenshot_capture - INFO - Registered hotkey F2 for Минимальная обработка связок продавец-товар
2025-09-17 14:01:02,025 - core.screenshot_capture - INFO - Registered hotkey F3 for Дополнительная полная обработка товаров
2025-09-17 14:01:02,025 - core.screenshot_capture - INFO - Registered 3 global hotkeys
2025-09-17 14:01:02,025 - core.screenshot_capture - INFO - Screenshot capture system started successfully
2025-09-17 14:01:02,026 - main - INFO - Starting task scheduler...
2025-09-17 14:01:02,026 - utils.scheduler - INFO - Starting task scheduler
2025-09-17 14:01:02,027 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,027 - utils.scheduler - INFO - Scheduled F1 processing every 30s
2025-09-17 14:01:02,028 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,028 - utils.scheduler - INFO - Scheduled F2 processing every 60s
2025-09-17 14:01:02,029 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,029 - utils.scheduler - INFO - Scheduled F3 processing every 45s
2025-09-17 14:01:02,029 - utils.scheduler - INFO - Setup 3 hotkey processing timers
2025-09-17 14:01:02,030 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,030 - utils.scheduler - INFO - Scheduled status check cycle every 10s
2025-09-17 14:01:02,031 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,031 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:01:02,031 - utils.scheduler - INFO - Scheduled maintenance tasks
2025-09-17 14:01:02,033 - apscheduler.scheduler - INFO - Added job "Process F1 screenshots" to job store "default"
2025-09-17 14:01:02,033 - apscheduler.scheduler - INFO - Added job "Process F2 screenshots" to job store "default"
2025-09-17 14:01:02,033 - apscheduler.scheduler - INFO - Added job "Process F3 screenshots" to job store "default"
2025-09-17 14:01:02,034 - apscheduler.scheduler - INFO - Added job "Status check and transition cycle" to job store "default"
2025-09-17 14:01:02,034 - apscheduler.scheduler - INFO - Added job "Daily maintenance cleanup" to job store "default"
2025-09-17 14:01:02,035 - apscheduler.scheduler - INFO - Added job "Weekly database maintenance" to job store "default"
2025-09-17 14:01:02,035 - apscheduler.scheduler - INFO - Scheduler started
2025-09-17 14:01:02,035 - utils.scheduler - INFO - Scheduler started with 6 jobs:
2025-09-17 14:01:02,036 - utils.scheduler - INFO -   - Status check and transition cycle (next run: 2025-09-17 14:01:12)
2025-09-17 14:01:02,036 - utils.scheduler - INFO -   - Process F1 screenshots (next run: 2025-09-17 14:01:32)
2025-09-17 14:01:02,036 - utils.scheduler - INFO -   - Process F3 screenshots (next run: 2025-09-17 14:01:47)
2025-09-17 14:01:02,037 - utils.scheduler - INFO -   - Process F2 screenshots (next run: 2025-09-17 14:02:02)
2025-09-17 14:01:02,037 - utils.scheduler - INFO -   - Daily maintenance cleanup (next run: 2025-09-18 02:00:00)
2025-09-17 14:01:02,038 - utils.scheduler - INFO -   - Weekly database maintenance (next run: 2025-09-21 03:00:00)
2025-09-17 14:01:02,038 - main - INFO - System started successfully with configuration: {'config_file': 'config.json', 'last_modified': '2025-09-17T14:00:55.034608', 'hotkeys': {'total': 4, 'enabled': 3, 'disabled': 1}, 'yandex_ocr': {'configured': True, 'api_url': 'https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText'}, 'monitoring': {'check_interval': 10, 'cleanup_days': 30}, 'paths': {'database': 'database\\market_data.db', 'logs': 'data\\logs'}}
2025-09-17 14:01:02,038 - main - INFO - Market Monitoring System is running. Press Ctrl+C to stop.
2025-09-17 14:01:12,039 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:01:22 MSK)" (scheduled at 2025-09-17 14:01:12.030740+03:00)
2025-09-17 14:01:12,040 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:01:12,041 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:01:22 MSK)" executed successfully
2025-09-17 14:01:14,904 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 14:01:14,905 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 14:01:14,905 - main - INFO - Stopping task scheduler...
2025-09-17 14:01:14,905 - utils.scheduler - INFO - Stopping task scheduler
2025-09-17 14:01:14,906 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-09-17 14:01:14,906 - utils.scheduler - INFO - Task scheduler stopped
2025-09-17 14:01:14,907 - main - INFO - Stopping screenshot capture...
2025-09-17 14:01:14,907 - core.screenshot_capture - INFO - Screenshot capture system stopped
2025-09-17 14:01:14,907 - main - INFO - Stopping OCR queue...
2025-09-17 14:01:14,908 - core.ocr_queue - INFO - Stopping OCR queue...
2025-09-17 14:01:15,047 - core.ocr_queue - INFO - OCR queue stopped
2025-09-17 14:01:15,048 - main - INFO - Closing OCR client...
2025-09-17 14:01:15,049 - core.ocr_client - INFO - OCR client closed
2025-09-17 14:01:15,049 - main - INFO - Closing database connections...
2025-09-17 14:01:15,049 - main - INFO - System shutdown completed
2025-09-17 14:04:17,306 - main - INFO - === Market Monitoring System Starting ===
2025-09-17 14:04:17,307 - main - INFO - Configuration loaded from: config.json
2025-09-17 14:04:17,307 - main - INFO - Initializing file utilities...
2025-09-17 14:04:17,308 - main - INFO - Initializing database...
2025-09-17 14:04:17,309 - core.database_manager - INFO - Database schema initialized successfully
2025-09-17 14:04:17,310 - main - INFO - Initializing image processor...
2025-09-17 14:04:17,310 - main - INFO - Initializing OCR client...
2025-09-17 14:04:17,311 - core.ocr_client - INFO - OCR client initialized with bearer auth, ocr format
2025-09-17 14:04:17,311 - main - INFO - Initializing OCR queue...
2025-09-17 14:04:17,311 - main - INFO - Initializing text parser...
2025-09-17 14:04:17,314 - core.text_parser - INFO - Compiled 10 parsing patterns
2025-09-17 14:04:17,315 - main - INFO - Initializing monitoring engine...
2025-09-17 14:04:17,315 - main - INFO - Initializing screenshot capture...
2025-09-17 14:04:17,316 - main - INFO - Initializing task scheduler...
2025-09-17 14:04:17,319 - main - INFO - Performing system health checks...
2025-09-17 14:04:17,319 - main - INFO - Checking database connectivity...
2025-09-17 14:04:17,320 - main - INFO - Database check passed - status summary: {}
2025-09-17 14:04:17,320 - main - INFO - Checking OCR API connectivity...
2025-09-17 14:04:17,752 - core.ocr_client - INFO - OCR API connection test successful
2025-09-17 14:04:17,752 - main - INFO - OCR API check passed
2025-09-17 14:04:17,753 - main - INFO - Checking file system permissions...
2025-09-17 14:04:17,755 - main - INFO - File system check passed
2025-09-17 14:04:17,755 - main - INFO - Checking configuration completeness...
2025-09-17 14:04:17,755 - main - INFO - Configuration check passed - 3 enabled hotkeys
2025-09-17 14:04:17,756 - main - INFO - System initialization completed successfully
2025-09-17 14:04:17,756 - main - INFO - Starting Market Monitoring System...
2025-09-17 14:04:17,757 - main - INFO - Starting OCR processing queue...
2025-09-17 14:04:17,758 - core.ocr_queue - INFO - OCR queue started with 2 workers
2025-09-17 14:04:17,759 - main - INFO - Starting screenshot capture system...
2025-09-17 14:04:17,759 - core.screenshot_capture - ERROR - Failed to clear hotkey handlers: '_KeyboardListener' object has no attribute 'blocking_hotkeys'
2025-09-17 14:04:17,828 - core.screenshot_capture - INFO - Registered hotkey F1 for Полная обработка товаров (цена, количество)
2025-09-17 14:04:17,829 - core.screenshot_capture - INFO - Registered hotkey F2 for Минимальная обработка связок продавец-товар
2025-09-17 14:04:17,829 - core.screenshot_capture - INFO - Registered hotkey F3 for Дополнительная полная обработка товаров
2025-09-17 14:04:17,830 - core.screenshot_capture - INFO - Registered 3 global hotkeys
2025-09-17 14:04:17,830 - core.screenshot_capture - INFO - Screenshot capture system started successfully
2025-09-17 14:04:17,830 - main - INFO - Starting task scheduler...
2025-09-17 14:04:17,831 - utils.scheduler - INFO - Starting task scheduler
2025-09-17 14:04:17,831 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,831 - utils.scheduler - INFO - Scheduled F1 processing every 30s
2025-09-17 14:04:17,832 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,832 - utils.scheduler - INFO - Scheduled F2 processing every 60s
2025-09-17 14:04:17,833 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,833 - utils.scheduler - INFO - Scheduled F3 processing every 45s
2025-09-17 14:04:17,834 - utils.scheduler - INFO - Setup 3 hotkey processing timers
2025-09-17 14:04:17,834 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,834 - utils.scheduler - INFO - Scheduled status check cycle every 10s
2025-09-17 14:04:17,835 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,836 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-09-17 14:04:17,836 - utils.scheduler - INFO - Scheduled maintenance tasks
2025-09-17 14:04:17,838 - apscheduler.scheduler - INFO - Added job "Process F1 screenshots" to job store "default"
2025-09-17 14:04:17,838 - apscheduler.scheduler - INFO - Added job "Process F2 screenshots" to job store "default"
2025-09-17 14:04:17,839 - apscheduler.scheduler - INFO - Added job "Process F3 screenshots" to job store "default"
2025-09-17 14:04:17,839 - apscheduler.scheduler - INFO - Added job "Status check and transition cycle" to job store "default"
2025-09-17 14:04:17,839 - apscheduler.scheduler - INFO - Added job "Daily maintenance cleanup" to job store "default"
2025-09-17 14:04:17,840 - apscheduler.scheduler - INFO - Added job "Weekly database maintenance" to job store "default"
2025-09-17 14:04:17,840 - apscheduler.scheduler - INFO - Scheduler started
2025-09-17 14:04:17,841 - utils.scheduler - INFO - Scheduler started with 6 jobs:
2025-09-17 14:04:17,841 - utils.scheduler - INFO -   - Status check and transition cycle (next run: 2025-09-17 14:04:27)
2025-09-17 14:04:17,841 - utils.scheduler - INFO -   - Process F1 screenshots (next run: 2025-09-17 14:04:47)
2025-09-17 14:04:17,842 - utils.scheduler - INFO -   - Process F3 screenshots (next run: 2025-09-17 14:05:02)
2025-09-17 14:04:17,842 - utils.scheduler - INFO -   - Process F2 screenshots (next run: 2025-09-17 14:05:17)
2025-09-17 14:04:17,843 - utils.scheduler - INFO -   - Daily maintenance cleanup (next run: 2025-09-18 02:00:00)
2025-09-17 14:04:17,843 - utils.scheduler - INFO -   - Weekly database maintenance (next run: 2025-09-21 03:00:00)
2025-09-17 14:04:17,843 - main - INFO - System started successfully with configuration: {'config_file': 'config.json', 'last_modified': '2025-09-17T14:04:12.217368', 'hotkeys': {'total': 4, 'enabled': 3, 'disabled': 1}, 'yandex_ocr': {'configured': True, 'api_url': 'https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText'}, 'monitoring': {'check_interval': 10, 'cleanup_days': 30}, 'paths': {'database': 'database\\market_data.db', 'logs': 'data\\logs'}}
2025-09-17 14:04:17,844 - main - INFO - Market Monitoring System is running. Press Ctrl+C to stop.
2025-09-17 14:04:27,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:37 MSK)" (scheduled at 2025-09-17 14:04:27.834735+03:00)
2025-09-17 14:04:27,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:04:27,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:37 MSK)" executed successfully
2025-09-17 14:04:37,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:47 MSK)" (scheduled at 2025-09-17 14:04:37.834735+03:00)
2025-09-17 14:04:37,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:04:37,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:47 MSK)" executed successfully
2025-09-17 14:04:47,837 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:05:17 MSK)" (scheduled at 2025-09-17 14:04:47.831733+03:00)
2025-09-17 14:04:47,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:57 MSK)" (scheduled at 2025-09-17 14:04:47.834735+03:00)
2025-09-17 14:04:47,838 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:05:17 MSK)" executed successfully
2025-09-17 14:04:47,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:04:47,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:04:57 MSK)" executed successfully
2025-09-17 14:04:57,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:07 MSK)" (scheduled at 2025-09-17 14:04:57.834735+03:00)
2025-09-17 14:04:57,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:04:57,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:07 MSK)" executed successfully
2025-09-17 14:05:00,867 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:05:00,868 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:05:02,836 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:05:47 MSK)" (scheduled at 2025-09-17 14:05:02.833733+03:00)
2025-09-17 14:05:02,837 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:05:47 MSK)" executed successfully
2025-09-17 14:05:07,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:17 MSK)" (scheduled at 2025-09-17 14:05:07.834735+03:00)
2025-09-17 14:05:07,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:07,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:17 MSK)" executed successfully
2025-09-17 14:05:17,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:05:47 MSK)" (scheduled at 2025-09-17 14:05:17.831733+03:00)
2025-09-17 14:05:17,843 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:06:17 MSK)" (scheduled at 2025-09-17 14:05:17.832734+03:00)
2025-09-17 14:05:17,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:27 MSK)" (scheduled at 2025-09-17 14:05:17.834735+03:00)
2025-09-17 14:05:17,845 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:05:47 MSK)" executed successfully
2025-09-17 14:05:17,846 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 14:05:17,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:17,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:27 MSK)" executed successfully
2025-09-17 14:05:18,014 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_140517_921_51094544.jpg (700x1800) in 0.167s
2025-09-17 14:05:18,021 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 14:05:18,024 - core.database_manager - INFO - Created OCR session 21 for hotkey F2
2025-09-17 14:05:18,031 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107118_0d65970a for F2 (session 21)
2025-09-17 14:05:18,031 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107118_0d65970a (attempt 1)
2025-09-17 14:05:18,031 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:06:17 MSK)" executed successfully
2025-09-17 14:05:18,032 - core.ocr_client - INFO - Starting OCR request f60c804b for merged_20250917_140517_921_51094544.jpg (0.2MB)
2025-09-17 14:05:18,032 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:05:18,402 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f60c804b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:05:18,403 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:05:19,318 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f60c804b: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "7eb1250e-b07b-41b1-8de4-e7c27cc81f9
2025-09-17 14:05:19,319 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:05:19,320 - core.ocr_queue - ERROR - Job ocr_F2_1758107118_0d65970a failed on attempt 1: OCR processing returned no result
2025-09-17 14:05:19,320 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107118_0d65970a for retry in 2s
2025-09-17 14:05:21,321 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107118_0d65970a (attempt 2)
2025-09-17 14:05:21,321 - core.ocr_client - INFO - Starting OCR request 02d56346 for merged_20250917_140517_921_51094544.jpg (0.2MB)
2025-09-17 14:05:21,322 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:05:21,430 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 02d56346: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:05:21,431 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:05:21,575 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 02d56346: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "74b4c269-b692-48a0-913e-69fb32c7d4e
2025-09-17 14:05:21,576 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:05:21,577 - core.ocr_queue - ERROR - Job ocr_F2_1758107118_0d65970a failed on attempt 2: OCR processing returned no result
2025-09-17 14:05:21,577 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107118_0d65970a for retry in 4s
2025-09-17 14:05:25,579 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107118_0d65970a (attempt 3)
2025-09-17 14:05:25,579 - core.ocr_client - INFO - Starting OCR request d814555e for merged_20250917_140517_921_51094544.jpg (0.2MB)
2025-09-17 14:05:25,580 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:05:25,684 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d814555e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:05:25,685 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:05:25,781 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d814555e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "668f371b-70b8-4ad3-8086-ab77983e05f
2025-09-17 14:05:25,782 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:05:25,783 - core.ocr_queue - ERROR - Job ocr_F2_1758107118_0d65970a failed on attempt 3: OCR processing returned no result
2025-09-17 14:05:25,783 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107118_0d65970a)
2025-09-17 14:05:25,818 - core.ocr_queue - ERROR - Job ocr_F2_1758107118_0d65970a permanently failed: OCR processing returned no result
2025-09-17 14:05:27,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:37 MSK)" (scheduled at 2025-09-17 14:05:27.834735+03:00)
2025-09-17 14:05:27,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:27,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:37 MSK)" executed successfully
2025-09-17 14:05:37,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:47 MSK)" (scheduled at 2025-09-17 14:05:37.834735+03:00)
2025-09-17 14:05:37,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:37,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:47 MSK)" executed successfully
2025-09-17 14:05:47,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:06:17 MSK)" (scheduled at 2025-09-17 14:05:47.831733+03:00)
2025-09-17 14:05:47,847 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:06:32 MSK)" (scheduled at 2025-09-17 14:05:47.833733+03:00)
2025-09-17 14:05:47,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:57 MSK)" (scheduled at 2025-09-17 14:05:47.834735+03:00)
2025-09-17 14:05:47,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:06:17 MSK)" executed successfully
2025-09-17 14:05:47,849 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:06:32 MSK)" executed successfully
2025-09-17 14:05:47,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:47,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:05:57 MSK)" executed successfully
2025-09-17 14:05:57,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:07 MSK)" (scheduled at 2025-09-17 14:05:57.834735+03:00)
2025-09-17 14:05:57,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:05:57,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:07 MSK)" executed successfully
2025-09-17 14:06:07,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:17 MSK)" (scheduled at 2025-09-17 14:06:07.834735+03:00)
2025-09-17 14:06:07,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:07,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:17 MSK)" executed successfully
2025-09-17 14:06:17,837 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:06:47 MSK)" (scheduled at 2025-09-17 14:06:17.831733+03:00)
2025-09-17 14:06:17,837 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:07:17 MSK)" (scheduled at 2025-09-17 14:06:17.832734+03:00)
2025-09-17 14:06:17,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:27 MSK)" (scheduled at 2025-09-17 14:06:17.834735+03:00)
2025-09-17 14:06:17,838 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:06:47 MSK)" executed successfully
2025-09-17 14:06:17,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:17,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:27 MSK)" executed successfully
2025-09-17 14:06:17,840 - core.image_processor - INFO - Processing 4 screenshots for F2
2025-09-17 14:06:17,984 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_140617_918_6c4f62ca.jpg (700x1800) in 0.143s
2025-09-17 14:06:17,989 - core.image_processor - INFO - Cleaned up source files: 4 successful, 0 failed
2025-09-17 14:06:18,050 - core.database_manager - INFO - Created OCR session 22 for hotkey F2
2025-09-17 14:06:18,051 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107178_58ad2aac for F2 (session 22)
2025-09-17 14:06:18,051 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107178_58ad2aac (attempt 1)
2025-09-17 14:06:18,051 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:07:17 MSK)" executed successfully
2025-09-17 14:06:18,052 - core.ocr_client - INFO - Starting OCR request 6b556f7e for merged_20250917_140617_918_6c4f62ca.jpg (0.2MB)
2025-09-17 14:06:18,052 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:06:18,170 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6b556f7e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:06:18,170 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:06:18,264 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6b556f7e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "385ee23b-c194-4f47-9d12-b271088253c
2025-09-17 14:06:18,265 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:06:18,266 - core.ocr_queue - ERROR - Job ocr_F2_1758107178_58ad2aac failed on attempt 1: OCR processing returned no result
2025-09-17 14:06:18,266 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107178_58ad2aac for retry in 2s
2025-09-17 14:06:20,268 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107178_58ad2aac (attempt 2)
2025-09-17 14:06:20,268 - core.ocr_client - INFO - Starting OCR request 0950c92a for merged_20250917_140617_918_6c4f62ca.jpg (0.2MB)
2025-09-17 14:06:20,269 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:06:20,371 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0950c92a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:06:20,371 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:06:20,473 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0950c92a: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "65824e3a-e350-47d7-926a-baacec37ff1
2025-09-17 14:06:20,475 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:06:20,476 - core.ocr_queue - ERROR - Job ocr_F2_1758107178_58ad2aac failed on attempt 2: OCR processing returned no result
2025-09-17 14:06:20,476 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107178_58ad2aac for retry in 4s
2025-09-17 14:06:24,478 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107178_58ad2aac (attempt 3)
2025-09-17 14:06:24,478 - core.ocr_client - INFO - Starting OCR request f949ab80 for merged_20250917_140617_918_6c4f62ca.jpg (0.2MB)
2025-09-17 14:06:24,479 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:06:24,583 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f949ab80: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:06:24,584 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:06:24,681 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f949ab80: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ff7c063a-261c-45f5-8f34-45479c3354e
2025-09-17 14:06:24,682 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:06:24,683 - core.ocr_queue - ERROR - Job ocr_F2_1758107178_58ad2aac failed on attempt 3: OCR processing returned no result
2025-09-17 14:06:24,683 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107178_58ad2aac)
2025-09-17 14:06:24,683 - core.ocr_queue - ERROR - Job ocr_F2_1758107178_58ad2aac permanently failed: OCR processing returned no result
2025-09-17 14:06:27,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:37 MSK)" (scheduled at 2025-09-17 14:06:27.834735+03:00)
2025-09-17 14:06:27,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:27,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:37 MSK)" executed successfully
2025-09-17 14:06:32,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:07:17 MSK)" (scheduled at 2025-09-17 14:06:32.833733+03:00)
2025-09-17 14:06:32,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:07:17 MSK)" executed successfully
2025-09-17 14:06:37,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:47 MSK)" (scheduled at 2025-09-17 14:06:37.834735+03:00)
2025-09-17 14:06:37,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:37,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:47 MSK)" executed successfully
2025-09-17 14:06:47,833 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:07:17 MSK)" (scheduled at 2025-09-17 14:06:47.831733+03:00)
2025-09-17 14:06:47,834 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:07:17 MSK)" executed successfully
2025-09-17 14:06:47,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:57 MSK)" (scheduled at 2025-09-17 14:06:47.834735+03:00)
2025-09-17 14:06:47,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:47,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:06:57 MSK)" executed successfully
2025-09-17 14:06:51,782 - core.screenshot_capture - INFO - Hotkey F2 pressed - capturing screenshot
2025-09-17 14:06:51,816 - core.screenshot_capture - INFO - Screenshot captured successfully: F2_20250917_140651_783_5bc408d0.png (285x400) in 0.033s
2025-09-17 14:06:57,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:07 MSK)" (scheduled at 2025-09-17 14:06:57.834735+03:00)
2025-09-17 14:06:57,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:06:57,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:07 MSK)" executed successfully
2025-09-17 14:07:07,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:17 MSK)" (scheduled at 2025-09-17 14:07:07.834735+03:00)
2025-09-17 14:07:07,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:07,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:17 MSK)" executed successfully
2025-09-17 14:07:17,834 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:07:47 MSK)" (scheduled at 2025-09-17 14:07:17.831733+03:00)
2025-09-17 14:07:17,834 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:08:17 MSK)" (scheduled at 2025-09-17 14:07:17.832734+03:00)
2025-09-17 14:07:17,834 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:08:02 MSK)" (scheduled at 2025-09-17 14:07:17.833733+03:00)
2025-09-17 14:07:17,835 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:07:47 MSK)" executed successfully
2025-09-17 14:07:17,836 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:08:02 MSK)" executed successfully
2025-09-17 14:07:17,836 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:07:17,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:27 MSK)" (scheduled at 2025-09-17 14:07:17.834735+03:00)
2025-09-17 14:07:17,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:17,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:27 MSK)" executed successfully
2025-09-17 14:07:17,965 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_140717_883_27a21b02.jpg (700x2200) in 0.129s
2025-09-17 14:07:17,972 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:07:17,973 - core.database_manager - INFO - Created OCR session 23 for hotkey F2
2025-09-17 14:07:17,973 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107237_79c303bc for F2 (session 23)
2025-09-17 14:07:17,973 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107237_79c303bc (attempt 1)
2025-09-17 14:07:17,974 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:08:17 MSK)" executed successfully
2025-09-17 14:07:17,974 - core.ocr_client - INFO - Starting OCR request ec860eb0 for merged_20250917_140717_883_27a21b02.jpg (0.2MB)
2025-09-17 14:07:17,975 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:07:18,088 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ec860eb0: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:07:18,088 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:07:18,195 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ec860eb0: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "36c95c1c-c6d5-47a4-bd72-6ecc9a4c631
2025-09-17 14:07:18,196 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:07:18,196 - core.ocr_queue - ERROR - Job ocr_F2_1758107237_79c303bc failed on attempt 1: OCR processing returned no result
2025-09-17 14:07:18,197 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107237_79c303bc for retry in 2s
2025-09-17 14:07:20,198 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107237_79c303bc (attempt 2)
2025-09-17 14:07:20,198 - core.ocr_client - INFO - Starting OCR request 1b72ac1d for merged_20250917_140717_883_27a21b02.jpg (0.2MB)
2025-09-17 14:07:20,199 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:07:20,303 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 1b72ac1d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:07:20,304 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:07:20,403 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 1b72ac1d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "1d01a372-5a8a-4c38-9f73-3dbc943d43a
2025-09-17 14:07:20,404 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:07:20,404 - core.ocr_queue - ERROR - Job ocr_F2_1758107237_79c303bc failed on attempt 2: OCR processing returned no result
2025-09-17 14:07:20,404 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107237_79c303bc for retry in 4s
2025-09-17 14:07:24,406 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107237_79c303bc (attempt 3)
2025-09-17 14:07:24,406 - core.ocr_client - INFO - Starting OCR request 5d77128e for merged_20250917_140717_883_27a21b02.jpg (0.2MB)
2025-09-17 14:07:24,407 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:07:24,515 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5d77128e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:07:24,515 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:07:24,630 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5d77128e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "938a739c-6090-481e-9b81-002713b27db
2025-09-17 14:07:24,630 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:07:24,630 - core.ocr_queue - ERROR - Job ocr_F2_1758107237_79c303bc failed on attempt 3: OCR processing returned no result
2025-09-17 14:07:24,631 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107237_79c303bc)
2025-09-17 14:07:24,631 - core.ocr_queue - ERROR - Job ocr_F2_1758107237_79c303bc permanently failed: OCR processing returned no result
2025-09-17 14:07:27,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:37 MSK)" (scheduled at 2025-09-17 14:07:27.834735+03:00)
2025-09-17 14:07:27,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:27,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:37 MSK)" executed successfully
2025-09-17 14:07:37,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:47 MSK)" (scheduled at 2025-09-17 14:07:37.834735+03:00)
2025-09-17 14:07:37,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:37,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:47 MSK)" executed successfully
2025-09-17 14:07:47,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:08:17 MSK)" (scheduled at 2025-09-17 14:07:47.831733+03:00)
2025-09-17 14:07:47,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:57 MSK)" (scheduled at 2025-09-17 14:07:47.834735+03:00)
2025-09-17 14:07:47,844 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:08:17 MSK)" executed successfully
2025-09-17 14:07:47,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:47,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:07:57 MSK)" executed successfully
2025-09-17 14:07:57,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:07 MSK)" (scheduled at 2025-09-17 14:07:57.834735+03:00)
2025-09-17 14:07:57,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:07:57,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:07 MSK)" executed successfully
2025-09-17 14:08:02,839 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:08:47 MSK)" (scheduled at 2025-09-17 14:08:02.833733+03:00)
2025-09-17 14:08:02,840 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:08:47 MSK)" executed successfully
2025-09-17 14:08:07,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:17 MSK)" (scheduled at 2025-09-17 14:08:07.834735+03:00)
2025-09-17 14:08:07,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:07,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:17 MSK)" executed successfully
2025-09-17 14:08:17,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:08:47 MSK)" (scheduled at 2025-09-17 14:08:17.831733+03:00)
2025-09-17 14:08:17,835 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:09:17 MSK)" (scheduled at 2025-09-17 14:08:17.832734+03:00)
2025-09-17 14:08:17,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:27 MSK)" (scheduled at 2025-09-17 14:08:17.834735+03:00)
2025-09-17 14:08:17,836 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:08:47 MSK)" executed successfully
2025-09-17 14:08:17,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:17,837 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:08:17,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:27 MSK)" executed successfully
2025-09-17 14:08:17,958 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_140817_874_3077b85a.jpg (700x2200) in 0.121s
2025-09-17 14:08:17,964 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:08:17,964 - core.database_manager - INFO - Created OCR session 24 for hotkey F2
2025-09-17 14:08:17,965 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107297_8b5d6649 for F2 (session 24)
2025-09-17 14:08:17,965 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107297_8b5d6649 (attempt 1)
2025-09-17 14:08:17,966 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:09:17 MSK)" executed successfully
2025-09-17 14:08:17,966 - core.ocr_client - INFO - Starting OCR request 9f6309fd for merged_20250917_140817_874_3077b85a.jpg (0.2MB)
2025-09-17 14:08:17,967 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:08:18,078 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 9f6309fd: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:08:18,079 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:08:18,460 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 9f6309fd: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "701b0432-fe37-42b8-9b68-f5fbb847caf
2025-09-17 14:08:18,461 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:08:18,461 - core.ocr_queue - ERROR - Job ocr_F2_1758107297_8b5d6649 failed on attempt 1: OCR processing returned no result
2025-09-17 14:08:18,462 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107297_8b5d6649 for retry in 2s
2025-09-17 14:08:20,463 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107297_8b5d6649 (attempt 2)
2025-09-17 14:08:20,464 - core.ocr_client - INFO - Starting OCR request fd20d2bd for merged_20250917_140817_874_3077b85a.jpg (0.2MB)
2025-09-17 14:08:20,464 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:08:20,572 - core.ocr_client - ERROR - Non-retryable error for primary-ocr fd20d2bd: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:08:20,573 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:08:20,687 - core.ocr_client - ERROR - Non-retryable error for fallback-vision fd20d2bd: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e39c40b9-4f96-4545-8736-1495b75940f
2025-09-17 14:08:20,687 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:08:20,688 - core.ocr_queue - ERROR - Job ocr_F2_1758107297_8b5d6649 failed on attempt 2: OCR processing returned no result
2025-09-17 14:08:20,688 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107297_8b5d6649 for retry in 4s
2025-09-17 14:08:24,690 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107297_8b5d6649 (attempt 3)
2025-09-17 14:08:24,690 - core.ocr_client - INFO - Starting OCR request 9b8e14aa for merged_20250917_140817_874_3077b85a.jpg (0.2MB)
2025-09-17 14:08:24,691 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:08:24,797 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 9b8e14aa: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:08:24,797 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:08:24,898 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 9b8e14aa: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "5bfbabc3-a2cd-4421-be76-01bcb992b18
2025-09-17 14:08:24,899 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:08:24,900 - core.ocr_queue - ERROR - Job ocr_F2_1758107297_8b5d6649 failed on attempt 3: OCR processing returned no result
2025-09-17 14:08:24,900 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107297_8b5d6649)
2025-09-17 14:08:24,901 - core.ocr_queue - ERROR - Job ocr_F2_1758107297_8b5d6649 permanently failed: OCR processing returned no result
2025-09-17 14:08:27,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:37 MSK)" (scheduled at 2025-09-17 14:08:27.834735+03:00)
2025-09-17 14:08:27,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:27,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:37 MSK)" executed successfully
2025-09-17 14:08:37,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:47 MSK)" (scheduled at 2025-09-17 14:08:37.834735+03:00)
2025-09-17 14:08:37,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:37,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:47 MSK)" executed successfully
2025-09-17 14:08:47,840 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:09:17 MSK)" (scheduled at 2025-09-17 14:08:47.831733+03:00)
2025-09-17 14:08:47,840 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:09:32 MSK)" (scheduled at 2025-09-17 14:08:47.833733+03:00)
2025-09-17 14:08:47,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:57 MSK)" (scheduled at 2025-09-17 14:08:47.834735+03:00)
2025-09-17 14:08:47,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:09:17 MSK)" executed successfully
2025-09-17 14:08:47,842 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:09:32 MSK)" executed successfully
2025-09-17 14:08:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:47,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:08:57 MSK)" executed successfully
2025-09-17 14:08:57,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:07 MSK)" (scheduled at 2025-09-17 14:08:57.834735+03:00)
2025-09-17 14:08:57,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:08:57,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:07 MSK)" executed successfully
2025-09-17 14:09:07,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:17 MSK)" (scheduled at 2025-09-17 14:09:07.834735+03:00)
2025-09-17 14:09:07,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:07,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:17 MSK)" executed successfully
2025-09-17 14:09:17,846 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:09:47 MSK)" (scheduled at 2025-09-17 14:09:17.831733+03:00)
2025-09-17 14:09:17,846 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:10:17 MSK)" (scheduled at 2025-09-17 14:09:17.832734+03:00)
2025-09-17 14:09:17,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:27 MSK)" (scheduled at 2025-09-17 14:09:17.834735+03:00)
2025-09-17 14:09:17,847 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:09:47 MSK)" executed successfully
2025-09-17 14:09:17,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:17,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:27 MSK)" executed successfully
2025-09-17 14:09:17,848 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:09:18,199 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_140918_107_7ea0a622.jpg (700x2200) in 0.349s
2025-09-17 14:09:18,204 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:09:18,205 - core.database_manager - INFO - Created OCR session 25 for hotkey F2
2025-09-17 14:09:18,206 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107358_d5e0b994 for F2 (session 25)
2025-09-17 14:09:18,206 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107358_d5e0b994 (attempt 1)
2025-09-17 14:09:18,206 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:10:17 MSK)" executed successfully
2025-09-17 14:09:18,207 - core.ocr_client - INFO - Starting OCR request c91205f4 for merged_20250917_140918_107_7ea0a622.jpg (0.2MB)
2025-09-17 14:09:18,207 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:09:18,569 - core.ocr_client - ERROR - Non-retryable error for primary-ocr c91205f4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:09:18,570 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:09:18,679 - core.ocr_client - ERROR - Non-retryable error for fallback-vision c91205f4: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "22689771-e406-427d-917e-42a1bb3a2e1
2025-09-17 14:09:18,679 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:09:18,679 - core.ocr_queue - ERROR - Job ocr_F2_1758107358_d5e0b994 failed on attempt 1: OCR processing returned no result
2025-09-17 14:09:18,680 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107358_d5e0b994 for retry in 2s
2025-09-17 14:09:20,681 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107358_d5e0b994 (attempt 2)
2025-09-17 14:09:20,681 - core.ocr_client - INFO - Starting OCR request d17ec84b for merged_20250917_140918_107_7ea0a622.jpg (0.2MB)
2025-09-17 14:09:20,682 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:09:20,785 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d17ec84b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:09:20,786 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:09:20,897 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d17ec84b: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "88039699-fe3b-4d5e-ba9a-505564bbb90
2025-09-17 14:09:20,898 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:09:20,898 - core.ocr_queue - ERROR - Job ocr_F2_1758107358_d5e0b994 failed on attempt 2: OCR processing returned no result
2025-09-17 14:09:20,899 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107358_d5e0b994 for retry in 4s
2025-09-17 14:09:24,900 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107358_d5e0b994 (attempt 3)
2025-09-17 14:09:24,900 - core.ocr_client - INFO - Starting OCR request 13ce56db for merged_20250917_140918_107_7ea0a622.jpg (0.2MB)
2025-09-17 14:09:24,901 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:09:25,006 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 13ce56db: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:09:25,007 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:09:25,104 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 13ce56db: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a8950ad7-5465-4554-a47f-648ac089ea5
2025-09-17 14:09:25,105 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:09:25,105 - core.ocr_queue - ERROR - Job ocr_F2_1758107358_d5e0b994 failed on attempt 3: OCR processing returned no result
2025-09-17 14:09:25,106 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107358_d5e0b994)
2025-09-17 14:09:25,607 - core.ocr_queue - ERROR - Job ocr_F2_1758107358_d5e0b994 permanently failed: OCR processing returned no result
2025-09-17 14:09:27,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:37 MSK)" (scheduled at 2025-09-17 14:09:27.834735+03:00)
2025-09-17 14:09:27,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:27,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:37 MSK)" executed successfully
2025-09-17 14:09:32,839 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:10:17 MSK)" (scheduled at 2025-09-17 14:09:32.833733+03:00)
2025-09-17 14:09:32,840 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:10:17 MSK)" executed successfully
2025-09-17 14:09:37,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:47 MSK)" (scheduled at 2025-09-17 14:09:37.834735+03:00)
2025-09-17 14:09:37,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:37,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:47 MSK)" executed successfully
2025-09-17 14:09:47,836 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:10:17 MSK)" (scheduled at 2025-09-17 14:09:47.831733+03:00)
2025-09-17 14:09:47,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:57 MSK)" (scheduled at 2025-09-17 14:09:47.834735+03:00)
2025-09-17 14:09:47,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:10:17 MSK)" executed successfully
2025-09-17 14:09:47,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:47,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:09:57 MSK)" executed successfully
2025-09-17 14:09:57,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:07 MSK)" (scheduled at 2025-09-17 14:09:57.834735+03:00)
2025-09-17 14:09:57,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:09:57,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:07 MSK)" executed successfully
2025-09-17 14:10:00,038 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:10:00,038 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:10:07,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:17 MSK)" (scheduled at 2025-09-17 14:10:07.834735+03:00)
2025-09-17 14:10:07,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:07,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:17 MSK)" executed successfully
2025-09-17 14:10:17,839 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:10:47 MSK)" (scheduled at 2025-09-17 14:10:17.831733+03:00)
2025-09-17 14:10:17,839 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:11:17 MSK)" (scheduled at 2025-09-17 14:10:17.832734+03:00)
2025-09-17 14:10:17,839 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:11:02 MSK)" (scheduled at 2025-09-17 14:10:17.833733+03:00)
2025-09-17 14:10:17,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:27 MSK)" (scheduled at 2025-09-17 14:10:17.834735+03:00)
2025-09-17 14:10:17,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:10:47 MSK)" executed successfully
2025-09-17 14:10:17,842 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:11:02 MSK)" executed successfully
2025-09-17 14:10:17,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:17,842 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:10:17,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:27 MSK)" executed successfully
2025-09-17 14:10:18,018 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141017_934_0bde2e00.jpg (700x2200) in 0.175s
2025-09-17 14:10:18,023 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:10:18,024 - core.database_manager - INFO - Created OCR session 26 for hotkey F2
2025-09-17 14:10:18,024 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107418_70e021da for F2 (session 26)
2025-09-17 14:10:18,024 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107418_70e021da (attempt 1)
2025-09-17 14:10:18,025 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:11:17 MSK)" executed successfully
2025-09-17 14:10:18,025 - core.ocr_client - INFO - Starting OCR request ac02820d for merged_20250917_141017_934_0bde2e00.jpg (0.2MB)
2025-09-17 14:10:18,026 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:10:18,141 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ac02820d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:10:18,142 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:10:18,249 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ac02820d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "9e972574-fc6a-4d1b-80bc-20289a8b0dc
2025-09-17 14:10:18,249 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:10:18,250 - core.ocr_queue - ERROR - Job ocr_F2_1758107418_70e021da failed on attempt 1: OCR processing returned no result
2025-09-17 14:10:18,250 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107418_70e021da for retry in 2s
2025-09-17 14:10:20,252 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107418_70e021da (attempt 2)
2025-09-17 14:10:20,252 - core.ocr_client - INFO - Starting OCR request de06be39 for merged_20250917_141017_934_0bde2e00.jpg (0.2MB)
2025-09-17 14:10:20,253 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:10:20,357 - core.ocr_client - ERROR - Non-retryable error for primary-ocr de06be39: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:10:20,358 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:10:20,456 - core.ocr_client - ERROR - Non-retryable error for fallback-vision de06be39: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "4aadc79d-da61-4e41-9ecc-51737895a08
2025-09-17 14:10:20,457 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:10:20,457 - core.ocr_queue - ERROR - Job ocr_F2_1758107418_70e021da failed on attempt 2: OCR processing returned no result
2025-09-17 14:10:20,457 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107418_70e021da for retry in 4s
2025-09-17 14:10:24,459 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107418_70e021da (attempt 3)
2025-09-17 14:10:24,459 - core.ocr_client - INFO - Starting OCR request 4b801c9f for merged_20250917_141017_934_0bde2e00.jpg (0.2MB)
2025-09-17 14:10:24,460 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:10:24,563 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 4b801c9f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:10:24,564 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:10:24,673 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 4b801c9f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f9102faf-f0ab-4e00-8ab0-68063a3b946
2025-09-17 14:10:24,674 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:10:24,674 - core.ocr_queue - ERROR - Job ocr_F2_1758107418_70e021da failed on attempt 3: OCR processing returned no result
2025-09-17 14:10:24,674 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107418_70e021da)
2025-09-17 14:10:24,675 - core.ocr_queue - ERROR - Job ocr_F2_1758107418_70e021da permanently failed: OCR processing returned no result
2025-09-17 14:10:27,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:37 MSK)" (scheduled at 2025-09-17 14:10:27.834735+03:00)
2025-09-17 14:10:27,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:27,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:37 MSK)" executed successfully
2025-09-17 14:10:37,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:47 MSK)" (scheduled at 2025-09-17 14:10:37.834735+03:00)
2025-09-17 14:10:37,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:37,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:47 MSK)" executed successfully
2025-09-17 14:10:47,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:11:17 MSK)" (scheduled at 2025-09-17 14:10:47.831733+03:00)
2025-09-17 14:10:47,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:57 MSK)" (scheduled at 2025-09-17 14:10:47.834735+03:00)
2025-09-17 14:10:47,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:11:17 MSK)" executed successfully
2025-09-17 14:10:47,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:47,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:10:57 MSK)" executed successfully
2025-09-17 14:10:57,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:07 MSK)" (scheduled at 2025-09-17 14:10:57.834735+03:00)
2025-09-17 14:10:57,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:10:57,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:07 MSK)" executed successfully
2025-09-17 14:11:02,847 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:11:47 MSK)" (scheduled at 2025-09-17 14:11:02.833733+03:00)
2025-09-17 14:11:02,848 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:11:47 MSK)" executed successfully
2025-09-17 14:11:07,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:17 MSK)" (scheduled at 2025-09-17 14:11:07.834735+03:00)
2025-09-17 14:11:07,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:07,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:17 MSK)" executed successfully
2025-09-17 14:11:17,837 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:11:47 MSK)" (scheduled at 2025-09-17 14:11:17.831733+03:00)
2025-09-17 14:11:17,837 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:12:17 MSK)" (scheduled at 2025-09-17 14:11:17.832734+03:00)
2025-09-17 14:11:17,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:27 MSK)" (scheduled at 2025-09-17 14:11:17.834735+03:00)
2025-09-17 14:11:17,838 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:11:47 MSK)" executed successfully
2025-09-17 14:11:17,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:17,839 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:11:17,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:27 MSK)" executed successfully
2025-09-17 14:11:17,959 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141117_876_956dd8bb.jpg (700x2200) in 0.120s
2025-09-17 14:11:17,965 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:11:17,977 - core.database_manager - INFO - Created OCR session 27 for hotkey F2
2025-09-17 14:11:17,978 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107477_7264cfbd for F2 (session 27)
2025-09-17 14:11:17,978 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107477_7264cfbd (attempt 1)
2025-09-17 14:11:17,979 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:12:17 MSK)" executed successfully
2025-09-17 14:11:17,979 - core.ocr_client - INFO - Starting OCR request 769bc0be for merged_20250917_141117_876_956dd8bb.jpg (0.2MB)
2025-09-17 14:11:17,979 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:11:18,092 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 769bc0be: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:11:18,093 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:11:18,192 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 769bc0be: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "c3d7e8e8-1272-4837-be4b-40992389ed4
2025-09-17 14:11:18,193 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:11:18,193 - core.ocr_queue - ERROR - Job ocr_F2_1758107477_7264cfbd failed on attempt 1: OCR processing returned no result
2025-09-17 14:11:18,194 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107477_7264cfbd for retry in 2s
2025-09-17 14:11:20,195 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107477_7264cfbd (attempt 2)
2025-09-17 14:11:20,195 - core.ocr_client - INFO - Starting OCR request b7aa269d for merged_20250917_141117_876_956dd8bb.jpg (0.2MB)
2025-09-17 14:11:20,196 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:11:20,301 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b7aa269d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:11:20,301 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:11:20,398 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b7aa269d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "9968b28f-6a13-4153-91cd-6eef30a1695
2025-09-17 14:11:20,399 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:11:20,400 - core.ocr_queue - ERROR - Job ocr_F2_1758107477_7264cfbd failed on attempt 2: OCR processing returned no result
2025-09-17 14:11:20,400 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107477_7264cfbd for retry in 4s
2025-09-17 14:11:24,401 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107477_7264cfbd (attempt 3)
2025-09-17 14:11:24,401 - core.ocr_client - INFO - Starting OCR request 6a898e44 for merged_20250917_141117_876_956dd8bb.jpg (0.2MB)
2025-09-17 14:11:24,402 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:11:24,507 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6a898e44: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:11:24,508 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:11:24,610 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6a898e44: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ea996f8d-573c-40f9-b546-2e024872444
2025-09-17 14:11:24,611 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:11:24,611 - core.ocr_queue - ERROR - Job ocr_F2_1758107477_7264cfbd failed on attempt 3: OCR processing returned no result
2025-09-17 14:11:24,612 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107477_7264cfbd)
2025-09-17 14:11:24,612 - core.ocr_queue - ERROR - Job ocr_F2_1758107477_7264cfbd permanently failed: OCR processing returned no result
2025-09-17 14:11:27,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:37 MSK)" (scheduled at 2025-09-17 14:11:27.834735+03:00)
2025-09-17 14:11:27,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:27,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:37 MSK)" executed successfully
2025-09-17 14:11:37,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:47 MSK)" (scheduled at 2025-09-17 14:11:37.834735+03:00)
2025-09-17 14:11:37,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:37,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:47 MSK)" executed successfully
2025-09-17 14:11:47,840 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:12:17 MSK)" (scheduled at 2025-09-17 14:11:47.831733+03:00)
2025-09-17 14:11:47,840 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:12:32 MSK)" (scheduled at 2025-09-17 14:11:47.833733+03:00)
2025-09-17 14:11:47,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:57 MSK)" (scheduled at 2025-09-17 14:11:47.834735+03:00)
2025-09-17 14:11:47,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:12:17 MSK)" executed successfully
2025-09-17 14:11:47,841 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:12:32 MSK)" executed successfully
2025-09-17 14:11:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:47,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:11:57 MSK)" executed successfully
2025-09-17 14:11:57,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:07 MSK)" (scheduled at 2025-09-17 14:11:57.834735+03:00)
2025-09-17 14:11:57,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:11:57,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:07 MSK)" executed successfully
2025-09-17 14:12:07,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:17 MSK)" (scheduled at 2025-09-17 14:12:07.834735+03:00)
2025-09-17 14:12:07,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:07,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:17 MSK)" executed successfully
2025-09-17 14:12:17,842 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:12:47 MSK)" (scheduled at 2025-09-17 14:12:17.831733+03:00)
2025-09-17 14:12:17,842 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:13:17 MSK)" (scheduled at 2025-09-17 14:12:17.832734+03:00)
2025-09-17 14:12:17,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:27 MSK)" (scheduled at 2025-09-17 14:12:17.834735+03:00)
2025-09-17 14:12:17,843 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:12:47 MSK)" executed successfully
2025-09-17 14:12:17,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:17,844 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:12:17,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:27 MSK)" executed successfully
2025-09-17 14:12:17,963 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141217_880_ecaaeab3.jpg (700x2200) in 0.118s
2025-09-17 14:12:17,970 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:12:17,970 - core.database_manager - INFO - Created OCR session 28 for hotkey F2
2025-09-17 14:12:17,971 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107537_91de12cd for F2 (session 28)
2025-09-17 14:12:17,971 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107537_91de12cd (attempt 1)
2025-09-17 14:12:17,972 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:13:17 MSK)" executed successfully
2025-09-17 14:12:17,972 - core.ocr_client - INFO - Starting OCR request 2da17b77 for merged_20250917_141217_880_ecaaeab3.jpg (0.2MB)
2025-09-17 14:12:17,973 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:12:18,103 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2da17b77: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:12:18,104 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:12:18,209 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2da17b77: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "1a4bb274-c7f1-4b10-a6a7-cf82484f185
2025-09-17 14:12:18,210 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:12:18,211 - core.ocr_queue - ERROR - Job ocr_F2_1758107537_91de12cd failed on attempt 1: OCR processing returned no result
2025-09-17 14:12:18,212 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107537_91de12cd for retry in 2s
2025-09-17 14:12:20,212 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107537_91de12cd (attempt 2)
2025-09-17 14:12:20,212 - core.ocr_client - INFO - Starting OCR request e9b98fdd for merged_20250917_141217_880_ecaaeab3.jpg (0.2MB)
2025-09-17 14:12:20,213 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:12:20,319 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e9b98fdd: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:12:20,320 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:12:20,430 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e9b98fdd: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "518980d4-6cd5-48a8-afbb-8166e04bc2e
2025-09-17 14:12:20,431 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:12:20,431 - core.ocr_queue - ERROR - Job ocr_F2_1758107537_91de12cd failed on attempt 2: OCR processing returned no result
2025-09-17 14:12:20,432 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107537_91de12cd for retry in 4s
2025-09-17 14:12:24,433 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107537_91de12cd (attempt 3)
2025-09-17 14:12:24,434 - core.ocr_client - INFO - Starting OCR request 04d0f41a for merged_20250917_141217_880_ecaaeab3.jpg (0.2MB)
2025-09-17 14:12:24,434 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:12:24,538 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 04d0f41a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:12:24,539 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:12:24,647 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 04d0f41a: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e7ff6647-ba92-4d51-a2a4-64318a8c82b
2025-09-17 14:12:24,648 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:12:24,649 - core.ocr_queue - ERROR - Job ocr_F2_1758107537_91de12cd failed on attempt 3: OCR processing returned no result
2025-09-17 14:12:24,649 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107537_91de12cd)
2025-09-17 14:12:24,650 - core.ocr_queue - ERROR - Job ocr_F2_1758107537_91de12cd permanently failed: OCR processing returned no result
2025-09-17 14:12:27,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:37 MSK)" (scheduled at 2025-09-17 14:12:27.834735+03:00)
2025-09-17 14:12:27,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:27,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:37 MSK)" executed successfully
2025-09-17 14:12:32,848 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:13:17 MSK)" (scheduled at 2025-09-17 14:12:32.833733+03:00)
2025-09-17 14:12:32,849 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:13:17 MSK)" executed successfully
2025-09-17 14:12:37,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:47 MSK)" (scheduled at 2025-09-17 14:12:37.834735+03:00)
2025-09-17 14:12:37,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:37,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:47 MSK)" executed successfully
2025-09-17 14:12:47,839 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:13:17 MSK)" (scheduled at 2025-09-17 14:12:47.831733+03:00)
2025-09-17 14:12:47,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:57 MSK)" (scheduled at 2025-09-17 14:12:47.834735+03:00)
2025-09-17 14:12:47,840 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:13:17 MSK)" executed successfully
2025-09-17 14:12:47,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:47,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:12:57 MSK)" executed successfully
2025-09-17 14:12:57,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:07 MSK)" (scheduled at 2025-09-17 14:12:57.834735+03:00)
2025-09-17 14:12:57,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:12:57,852 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:07 MSK)" executed successfully
2025-09-17 14:13:07,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:17 MSK)" (scheduled at 2025-09-17 14:13:07.834735+03:00)
2025-09-17 14:13:07,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:07,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:17 MSK)" executed successfully
2025-09-17 14:13:17,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:13:47 MSK)" (scheduled at 2025-09-17 14:13:17.831733+03:00)
2025-09-17 14:13:17,847 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:14:17 MSK)" (scheduled at 2025-09-17 14:13:17.832734+03:00)
2025-09-17 14:13:17,847 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:14:02 MSK)" (scheduled at 2025-09-17 14:13:17.833733+03:00)
2025-09-17 14:13:17,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:27 MSK)" (scheduled at 2025-09-17 14:13:17.834735+03:00)
2025-09-17 14:13:17,849 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:13:47 MSK)" executed successfully
2025-09-17 14:13:17,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:17,850 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:14:02 MSK)" executed successfully
2025-09-17 14:13:17,850 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:13:17,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:27 MSK)" executed successfully
2025-09-17 14:13:18,191 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141317_884_77264797.jpg (700x2200) in 0.339s
2025-09-17 14:13:18,198 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:13:18,199 - core.database_manager - INFO - Created OCR session 29 for hotkey F2
2025-09-17 14:13:18,199 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107598_62d12f8d for F2 (session 29)
2025-09-17 14:13:18,200 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107598_62d12f8d (attempt 1)
2025-09-17 14:13:18,200 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:14:17 MSK)" executed successfully
2025-09-17 14:13:18,201 - core.ocr_client - INFO - Starting OCR request 22fb3cb5 for merged_20250917_141317_884_77264797.jpg (0.2MB)
2025-09-17 14:13:18,201 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:13:18,318 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 22fb3cb5: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:13:18,319 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:13:18,427 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 22fb3cb5: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "6e1ea44d-bb83-4352-9333-a20c8d5861e
2025-09-17 14:13:18,428 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:13:18,428 - core.ocr_queue - ERROR - Job ocr_F2_1758107598_62d12f8d failed on attempt 1: OCR processing returned no result
2025-09-17 14:13:18,429 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107598_62d12f8d for retry in 2s
2025-09-17 14:13:20,430 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107598_62d12f8d (attempt 2)
2025-09-17 14:13:20,430 - core.ocr_client - INFO - Starting OCR request 50d45f62 for merged_20250917_141317_884_77264797.jpg (0.2MB)
2025-09-17 14:13:20,431 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:13:20,536 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 50d45f62: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:13:20,537 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:13:20,644 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 50d45f62: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "709f2fb8-8615-4ff6-a932-e5e81fff614
2025-09-17 14:13:20,644 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:13:20,645 - core.ocr_queue - ERROR - Job ocr_F2_1758107598_62d12f8d failed on attempt 2: OCR processing returned no result
2025-09-17 14:13:20,645 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107598_62d12f8d for retry in 4s
2025-09-17 14:13:24,647 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107598_62d12f8d (attempt 3)
2025-09-17 14:13:24,647 - core.ocr_client - INFO - Starting OCR request 468ffec4 for merged_20250917_141317_884_77264797.jpg (0.2MB)
2025-09-17 14:13:24,648 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:13:24,755 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 468ffec4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:13:24,755 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:13:24,853 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 468ffec4: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b123c5f6-2174-4dca-a732-4cd2efbf082
2025-09-17 14:13:24,854 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:13:24,854 - core.ocr_queue - ERROR - Job ocr_F2_1758107598_62d12f8d failed on attempt 3: OCR processing returned no result
2025-09-17 14:13:24,855 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107598_62d12f8d)
2025-09-17 14:13:24,855 - core.ocr_queue - ERROR - Job ocr_F2_1758107598_62d12f8d permanently failed: OCR processing returned no result
2025-09-17 14:13:27,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:37 MSK)" (scheduled at 2025-09-17 14:13:27.834735+03:00)
2025-09-17 14:13:27,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:27,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:37 MSK)" executed successfully
2025-09-17 14:13:37,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:47 MSK)" (scheduled at 2025-09-17 14:13:37.834735+03:00)
2025-09-17 14:13:37,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:37,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:47 MSK)" executed successfully
2025-09-17 14:13:47,834 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:14:17 MSK)" (scheduled at 2025-09-17 14:13:47.831733+03:00)
2025-09-17 14:13:47,834 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:57 MSK)" (scheduled at 2025-09-17 14:13:47.834735+03:00)
2025-09-17 14:13:47,835 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:14:17 MSK)" executed successfully
2025-09-17 14:13:47,835 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:47,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:13:57 MSK)" executed successfully
2025-09-17 14:13:57,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:07 MSK)" (scheduled at 2025-09-17 14:13:57.834735+03:00)
2025-09-17 14:13:57,871 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:13:57,872 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:07 MSK)" executed successfully
2025-09-17 14:14:02,841 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:14:47 MSK)" (scheduled at 2025-09-17 14:14:02.833733+03:00)
2025-09-17 14:14:02,842 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:14:47 MSK)" executed successfully
2025-09-17 14:14:07,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:17 MSK)" (scheduled at 2025-09-17 14:14:07.834735+03:00)
2025-09-17 14:14:07,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:07,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:17 MSK)" executed successfully
2025-09-17 14:14:17,838 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:14:47 MSK)" (scheduled at 2025-09-17 14:14:17.831733+03:00)
2025-09-17 14:14:17,838 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:15:17 MSK)" (scheduled at 2025-09-17 14:14:17.832734+03:00)
2025-09-17 14:14:17,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:27 MSK)" (scheduled at 2025-09-17 14:14:17.834735+03:00)
2025-09-17 14:14:17,840 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:14:47 MSK)" executed successfully
2025-09-17 14:14:17,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:17,840 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:14:17,918 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:27 MSK)" executed successfully
2025-09-17 14:14:18,033 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141417_951_27504e02.jpg (700x2200) in 0.115s
2025-09-17 14:14:18,040 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:14:18,041 - core.database_manager - INFO - Created OCR session 30 for hotkey F2
2025-09-17 14:14:18,041 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107658_34b8d15b for F2 (session 30)
2025-09-17 14:14:18,041 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107658_34b8d15b (attempt 1)
2025-09-17 14:14:18,042 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:15:17 MSK)" executed successfully
2025-09-17 14:14:18,042 - core.ocr_client - INFO - Starting OCR request 9b4e2782 for merged_20250917_141417_951_27504e02.jpg (0.2MB)
2025-09-17 14:14:18,043 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:14:18,287 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 9b4e2782: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:14:18,288 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:14:18,386 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 9b4e2782: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "97f28621-c4da-4acc-8a0d-c917f65b51b
2025-09-17 14:14:18,387 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:14:18,388 - core.ocr_queue - ERROR - Job ocr_F2_1758107658_34b8d15b failed on attempt 1: OCR processing returned no result
2025-09-17 14:14:18,388 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107658_34b8d15b for retry in 2s
2025-09-17 14:14:20,390 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107658_34b8d15b (attempt 2)
2025-09-17 14:14:20,390 - core.ocr_client - INFO - Starting OCR request 56b80a80 for merged_20250917_141417_951_27504e02.jpg (0.2MB)
2025-09-17 14:14:20,391 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:14:20,494 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 56b80a80: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:14:20,495 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:14:20,606 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 56b80a80: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b0a9c7c0-c8d0-4277-93a4-16e57796132
2025-09-17 14:14:20,607 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:14:20,607 - core.ocr_queue - ERROR - Job ocr_F2_1758107658_34b8d15b failed on attempt 2: OCR processing returned no result
2025-09-17 14:14:20,608 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107658_34b8d15b for retry in 4s
2025-09-17 14:14:24,610 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107658_34b8d15b (attempt 3)
2025-09-17 14:14:24,610 - core.ocr_client - INFO - Starting OCR request 6e161faf for merged_20250917_141417_951_27504e02.jpg (0.2MB)
2025-09-17 14:14:24,611 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:14:24,714 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6e161faf: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:14:24,715 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:14:24,816 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6e161faf: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "1f58fe18-e89f-4c3e-aec2-756da3fe7a1
2025-09-17 14:14:24,817 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:14:24,817 - core.ocr_queue - ERROR - Job ocr_F2_1758107658_34b8d15b failed on attempt 3: OCR processing returned no result
2025-09-17 14:14:24,817 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107658_34b8d15b)
2025-09-17 14:14:24,818 - core.ocr_queue - ERROR - Job ocr_F2_1758107658_34b8d15b permanently failed: OCR processing returned no result
2025-09-17 14:14:27,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:37 MSK)" (scheduled at 2025-09-17 14:14:27.834735+03:00)
2025-09-17 14:14:27,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:27,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:37 MSK)" executed successfully
2025-09-17 14:14:37,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:47 MSK)" (scheduled at 2025-09-17 14:14:37.834735+03:00)
2025-09-17 14:14:37,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:37,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:47 MSK)" executed successfully
2025-09-17 14:14:47,844 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:15:17 MSK)" (scheduled at 2025-09-17 14:14:47.831733+03:00)
2025-09-17 14:14:47,844 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:15:32 MSK)" (scheduled at 2025-09-17 14:14:47.833733+03:00)
2025-09-17 14:14:47,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:57 MSK)" (scheduled at 2025-09-17 14:14:47.834735+03:00)
2025-09-17 14:14:47,846 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:15:17 MSK)" executed successfully
2025-09-17 14:14:47,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:15:32 MSK)" executed successfully
2025-09-17 14:14:47,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:47,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:14:57 MSK)" executed successfully
2025-09-17 14:14:57,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:07 MSK)" (scheduled at 2025-09-17 14:14:57.834735+03:00)
2025-09-17 14:14:57,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:14:57,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:07 MSK)" executed successfully
2025-09-17 14:15:00,180 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:15:00,180 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:15:07,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:17 MSK)" (scheduled at 2025-09-17 14:15:07.834735+03:00)
2025-09-17 14:15:07,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:07,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:17 MSK)" executed successfully
2025-09-17 14:15:17,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:15:47 MSK)" (scheduled at 2025-09-17 14:15:17.831733+03:00)
2025-09-17 14:15:17,843 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:16:17 MSK)" (scheduled at 2025-09-17 14:15:17.832734+03:00)
2025-09-17 14:15:17,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:27 MSK)" (scheduled at 2025-09-17 14:15:17.834735+03:00)
2025-09-17 14:15:17,845 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:15:47 MSK)" executed successfully
2025-09-17 14:15:17,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:17,846 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:15:17,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:27 MSK)" executed successfully
2025-09-17 14:15:18,281 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141517_889_882b5a08.jpg (700x2200) in 0.435s
2025-09-17 14:15:18,288 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:15:18,289 - core.database_manager - INFO - Created OCR session 31 for hotkey F2
2025-09-17 14:15:18,289 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107718_c9545753 for F2 (session 31)
2025-09-17 14:15:18,289 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107718_c9545753 (attempt 1)
2025-09-17 14:15:18,290 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:16:17 MSK)" executed successfully
2025-09-17 14:15:18,290 - core.ocr_client - INFO - Starting OCR request cbac0ab4 for merged_20250917_141517_889_882b5a08.jpg (0.2MB)
2025-09-17 14:15:18,291 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:15:18,406 - core.ocr_client - ERROR - Non-retryable error for primary-ocr cbac0ab4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:15:18,407 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:15:18,516 - core.ocr_client - ERROR - Non-retryable error for fallback-vision cbac0ab4: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "228226f8-97f2-4e4e-90ac-76381ef7a19
2025-09-17 14:15:18,517 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:15:18,518 - core.ocr_queue - ERROR - Job ocr_F2_1758107718_c9545753 failed on attempt 1: OCR processing returned no result
2025-09-17 14:15:18,518 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107718_c9545753 for retry in 2s
2025-09-17 14:15:20,520 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107718_c9545753 (attempt 2)
2025-09-17 14:15:20,521 - core.ocr_client - INFO - Starting OCR request f01ef393 for merged_20250917_141517_889_882b5a08.jpg (0.2MB)
2025-09-17 14:15:20,521 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:15:20,626 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f01ef393: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:15:20,627 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:15:20,746 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f01ef393: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "14466d58-ff29-4546-ae55-4e8aafb1242
2025-09-17 14:15:20,747 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:15:20,747 - core.ocr_queue - ERROR - Job ocr_F2_1758107718_c9545753 failed on attempt 2: OCR processing returned no result
2025-09-17 14:15:20,748 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107718_c9545753 for retry in 4s
2025-09-17 14:15:24,749 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107718_c9545753 (attempt 3)
2025-09-17 14:15:24,750 - core.ocr_client - INFO - Starting OCR request deb88492 for merged_20250917_141517_889_882b5a08.jpg (0.2MB)
2025-09-17 14:15:24,750 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:15:24,855 - core.ocr_client - ERROR - Non-retryable error for primary-ocr deb88492: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:15:24,855 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:15:24,970 - core.ocr_client - ERROR - Non-retryable error for fallback-vision deb88492: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e175a505-45d0-4ecd-8a26-5780ea9b649
2025-09-17 14:15:24,971 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:15:24,971 - core.ocr_queue - ERROR - Job ocr_F2_1758107718_c9545753 failed on attempt 3: OCR processing returned no result
2025-09-17 14:15:24,972 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107718_c9545753)
2025-09-17 14:15:24,972 - core.ocr_queue - ERROR - Job ocr_F2_1758107718_c9545753 permanently failed: OCR processing returned no result
2025-09-17 14:15:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:37 MSK)" (scheduled at 2025-09-17 14:15:27.834735+03:00)
2025-09-17 14:15:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:37 MSK)" executed successfully
2025-09-17 14:15:32,843 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:16:17 MSK)" (scheduled at 2025-09-17 14:15:32.833733+03:00)
2025-09-17 14:15:32,844 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:16:17 MSK)" executed successfully
2025-09-17 14:15:37,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:47 MSK)" (scheduled at 2025-09-17 14:15:37.834735+03:00)
2025-09-17 14:15:37,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:37,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:47 MSK)" executed successfully
2025-09-17 14:15:47,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:16:17 MSK)" (scheduled at 2025-09-17 14:15:47.831733+03:00)
2025-09-17 14:15:47,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:57 MSK)" (scheduled at 2025-09-17 14:15:47.834735+03:00)
2025-09-17 14:15:47,844 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:16:17 MSK)" executed successfully
2025-09-17 14:15:47,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:47,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:15:57 MSK)" executed successfully
2025-09-17 14:15:57,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:07 MSK)" (scheduled at 2025-09-17 14:15:57.834735+03:00)
2025-09-17 14:15:57,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:15:57,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:07 MSK)" executed successfully
2025-09-17 14:16:07,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:17 MSK)" (scheduled at 2025-09-17 14:16:07.834735+03:00)
2025-09-17 14:16:07,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:07,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:17 MSK)" executed successfully
2025-09-17 14:16:17,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:16:47 MSK)" (scheduled at 2025-09-17 14:16:17.831733+03:00)
2025-09-17 14:16:17,843 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:17:17 MSK)" (scheduled at 2025-09-17 14:16:17.832734+03:00)
2025-09-17 14:16:17,843 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:17:02 MSK)" (scheduled at 2025-09-17 14:16:17.833733+03:00)
2025-09-17 14:16:17,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:27 MSK)" (scheduled at 2025-09-17 14:16:17.834735+03:00)
2025-09-17 14:16:17,845 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:16:47 MSK)" executed successfully
2025-09-17 14:16:17,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:17:02 MSK)" executed successfully
2025-09-17 14:16:17,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:17,846 - core.image_processor - INFO - Processing 5 screenshots for F2
2025-09-17 14:16:17,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:27 MSK)" executed successfully
2025-09-17 14:16:18,297 - core.image_processor - INFO - Successfully merged 4 images into merged_20250917_141618_217_1a86884a.jpg (700x2200) in 0.450s
2025-09-17 14:16:18,299 - core.image_processor - WARNING - Failed to create backup for data\temp\screenshots\F2\F2_20250917_131217_044_bd371579.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png: [Errno 22] Invalid argument: 'data\\temp\\screenshots\\F2\\F2_20250917_131217_044_bd371579.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png'
2025-09-17 14:16:18,300 - core.image_processor - WARNING - Failed to create backup for data\temp\screenshots\F2\F2_20250917_131218_036_0248d764.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png: [Errno 22] Invalid argument: 'data\\temp\\screenshots\\F2\\F2_20250917_131218_036_0248d764.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png'
2025-09-17 14:16:18,304 - core.image_processor - INFO - Cleaned up source files: 5 successful, 0 failed
2025-09-17 14:16:18,305 - core.database_manager - INFO - Created OCR session 32 for hotkey F2
2025-09-17 14:16:18,305 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107778_7eeb6e35 for F2 (session 32)
2025-09-17 14:16:18,305 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107778_7eeb6e35 (attempt 1)
2025-09-17 14:16:18,306 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:17:17 MSK)" executed successfully
2025-09-17 14:16:18,306 - core.ocr_client - INFO - Starting OCR request 3ad321c2 for merged_20250917_141618_217_1a86884a.jpg (0.2MB)
2025-09-17 14:16:18,307 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:16:18,421 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 3ad321c2: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:16:18,422 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:16:18,520 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 3ad321c2: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "39f9e122-8dae-492a-930d-95bfce54c05
2025-09-17 14:16:18,521 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:16:18,522 - core.ocr_queue - ERROR - Job ocr_F2_1758107778_7eeb6e35 failed on attempt 1: OCR processing returned no result
2025-09-17 14:16:18,522 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107778_7eeb6e35 for retry in 2s
2025-09-17 14:16:20,524 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107778_7eeb6e35 (attempt 2)
2025-09-17 14:16:20,524 - core.ocr_client - INFO - Starting OCR request ad840c65 for merged_20250917_141618_217_1a86884a.jpg (0.2MB)
2025-09-17 14:16:20,524 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:16:20,629 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ad840c65: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:16:20,630 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:16:20,731 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ad840c65: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "8963c905-13b2-4e42-a235-4f86b4f658a
2025-09-17 14:16:20,731 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:16:20,732 - core.ocr_queue - ERROR - Job ocr_F2_1758107778_7eeb6e35 failed on attempt 2: OCR processing returned no result
2025-09-17 14:16:20,732 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107778_7eeb6e35 for retry in 4s
2025-09-17 14:16:24,734 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107778_7eeb6e35 (attempt 3)
2025-09-17 14:16:24,734 - core.ocr_client - INFO - Starting OCR request 5488b042 for merged_20250917_141618_217_1a86884a.jpg (0.2MB)
2025-09-17 14:16:24,735 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:16:24,849 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5488b042: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:16:24,850 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:16:24,950 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5488b042: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "fb8b733c-ff04-437d-afb8-b5eb5d6823f
2025-09-17 14:16:24,951 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:16:24,951 - core.ocr_queue - ERROR - Job ocr_F2_1758107778_7eeb6e35 failed on attempt 3: OCR processing returned no result
2025-09-17 14:16:24,952 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107778_7eeb6e35)
2025-09-17 14:16:24,952 - core.ocr_queue - ERROR - Job ocr_F2_1758107778_7eeb6e35 permanently failed: OCR processing returned no result
2025-09-17 14:16:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:37 MSK)" (scheduled at 2025-09-17 14:16:27.834735+03:00)
2025-09-17 14:16:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:37 MSK)" executed successfully
2025-09-17 14:16:37,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:47 MSK)" (scheduled at 2025-09-17 14:16:37.834735+03:00)
2025-09-17 14:16:37,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:38,043 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:47 MSK)" executed successfully
2025-09-17 14:16:47,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:17:17 MSK)" (scheduled at 2025-09-17 14:16:47.831733+03:00)
2025-09-17 14:16:47,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:57 MSK)" (scheduled at 2025-09-17 14:16:47.834735+03:00)
2025-09-17 14:16:47,836 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:17:17 MSK)" executed successfully
2025-09-17 14:16:47,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:47,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:16:57 MSK)" executed successfully
2025-09-17 14:16:57,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:07 MSK)" (scheduled at 2025-09-17 14:16:57.834735+03:00)
2025-09-17 14:16:57,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:16:57,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:07 MSK)" executed successfully
2025-09-17 14:17:02,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:17:47 MSK)" (scheduled at 2025-09-17 14:17:02.833733+03:00)
2025-09-17 14:17:02,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:17:47 MSK)" executed successfully
2025-09-17 14:17:07,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:17 MSK)" (scheduled at 2025-09-17 14:17:07.834735+03:00)
2025-09-17 14:17:07,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:07,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:17 MSK)" executed successfully
2025-09-17 14:17:17,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:17:47 MSK)" (scheduled at 2025-09-17 14:17:17.831733+03:00)
2025-09-17 14:17:17,847 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:18:17 MSK)" (scheduled at 2025-09-17 14:17:17.832734+03:00)
2025-09-17 14:17:17,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:27 MSK)" (scheduled at 2025-09-17 14:17:17.834735+03:00)
2025-09-17 14:17:17,849 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:17:47 MSK)" executed successfully
2025-09-17 14:17:17,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:17,849 - core.image_processor - INFO - Processing 3 screenshots for F2
2025-09-17 14:17:17,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:27 MSK)" executed successfully
2025-09-17 14:17:17,900 - core.image_processor - INFO - Successfully merged 3 images into merged_20250917_141717_882_8caa954c.jpg (285x1200) in 0.050s
2025-09-17 14:17:17,901 - core.image_processor - WARNING - Failed to create backup for data\temp\screenshots\F2\F2_20250917_132622_845_1efa910b.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png: [Errno 22] Invalid argument: 'data\\temp\\screenshots\\F2\\F2_20250917_132622_845_1efa910b.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png'
2025-09-17 14:17:17,904 - core.image_processor - INFO - Cleaned up source files: 3 successful, 0 failed
2025-09-17 14:17:17,905 - core.database_manager - INFO - Created OCR session 33 for hotkey F2
2025-09-17 14:17:17,905 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107837_ee1fdb68 for F2 (session 33)
2025-09-17 14:17:17,905 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107837_ee1fdb68 (attempt 1)
2025-09-17 14:17:17,906 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:18:17 MSK)" executed successfully
2025-09-17 14:17:17,906 - core.ocr_client - INFO - Starting OCR request 350a08cc for merged_20250917_141717_882_8caa954c.jpg (0.0MB)
2025-09-17 14:17:17,907 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:17:18,411 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 350a08cc: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:17:18,412 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:17:18,506 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 350a08cc: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "075a7a79-04de-41c8-8bbf-6592300c642
2025-09-17 14:17:18,507 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:17:18,507 - core.ocr_queue - ERROR - Job ocr_F2_1758107837_ee1fdb68 failed on attempt 1: OCR processing returned no result
2025-09-17 14:17:18,508 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107837_ee1fdb68 for retry in 2s
2025-09-17 14:17:20,509 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107837_ee1fdb68 (attempt 2)
2025-09-17 14:17:20,509 - core.ocr_client - INFO - Starting OCR request 318f5bfd for merged_20250917_141717_882_8caa954c.jpg (0.0MB)
2025-09-17 14:17:20,510 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:17:20,590 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 318f5bfd: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:17:20,591 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:17:20,667 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 318f5bfd: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "8ad1b5a2-f431-4624-ad54-6110f3abe1b
2025-09-17 14:17:20,668 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:17:20,668 - core.ocr_queue - ERROR - Job ocr_F2_1758107837_ee1fdb68 failed on attempt 2: OCR processing returned no result
2025-09-17 14:17:20,669 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107837_ee1fdb68 for retry in 4s
2025-09-17 14:17:24,670 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107837_ee1fdb68 (attempt 3)
2025-09-17 14:17:24,671 - core.ocr_client - INFO - Starting OCR request c979e742 for merged_20250917_141717_882_8caa954c.jpg (0.0MB)
2025-09-17 14:17:24,671 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:17:24,750 - core.ocr_client - ERROR - Non-retryable error for primary-ocr c979e742: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:17:24,751 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:17:24,846 - core.ocr_client - ERROR - Non-retryable error for fallback-vision c979e742: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "038f6766-a6f1-4354-82fa-3ccf50de914
2025-09-17 14:17:24,846 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:17:24,847 - core.ocr_queue - ERROR - Job ocr_F2_1758107837_ee1fdb68 failed on attempt 3: OCR processing returned no result
2025-09-17 14:17:24,847 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107837_ee1fdb68)
2025-09-17 14:17:24,848 - core.ocr_queue - ERROR - Job ocr_F2_1758107837_ee1fdb68 permanently failed: OCR processing returned no result
2025-09-17 14:17:27,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:37 MSK)" (scheduled at 2025-09-17 14:17:27.834735+03:00)
2025-09-17 14:17:27,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:27,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:37 MSK)" executed successfully
2025-09-17 14:17:37,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:47 MSK)" (scheduled at 2025-09-17 14:17:37.834735+03:00)
2025-09-17 14:17:37,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:37,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:47 MSK)" executed successfully
2025-09-17 14:17:47,840 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:18:17 MSK)" (scheduled at 2025-09-17 14:17:47.831733+03:00)
2025-09-17 14:17:47,840 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:18:32 MSK)" (scheduled at 2025-09-17 14:17:47.833733+03:00)
2025-09-17 14:17:47,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:57 MSK)" (scheduled at 2025-09-17 14:17:47.834735+03:00)
2025-09-17 14:17:47,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:18:17 MSK)" executed successfully
2025-09-17 14:17:47,841 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:18:32 MSK)" executed successfully
2025-09-17 14:17:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:47,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:17:57 MSK)" executed successfully
2025-09-17 14:17:57,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:07 MSK)" (scheduled at 2025-09-17 14:17:57.834735+03:00)
2025-09-17 14:17:57,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:17:57,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:07 MSK)" executed successfully
2025-09-17 14:18:07,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:17 MSK)" (scheduled at 2025-09-17 14:18:07.834735+03:00)
2025-09-17 14:18:07,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:07,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:17 MSK)" executed successfully
2025-09-17 14:18:17,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:18:47 MSK)" (scheduled at 2025-09-17 14:18:17.831733+03:00)
2025-09-17 14:18:17,847 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:19:17 MSK)" (scheduled at 2025-09-17 14:18:17.832734+03:00)
2025-09-17 14:18:17,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:27 MSK)" (scheduled at 2025-09-17 14:18:17.834735+03:00)
2025-09-17 14:18:17,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:18:47 MSK)" executed successfully
2025-09-17 14:18:17,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:17,849 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:18:17,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:27 MSK)" executed successfully
2025-09-17 14:18:18,189 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_141818_178_f4784552.jpg (285x800) in 0.340s
2025-09-17 14:18:18,191 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:18:18,192 - core.database_manager - INFO - Created OCR session 34 for hotkey F2
2025-09-17 14:18:18,192 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107898_58579b6e for F2 (session 34)
2025-09-17 14:18:18,192 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107898_58579b6e (attempt 1)
2025-09-17 14:18:18,193 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:19:17 MSK)" executed successfully
2025-09-17 14:18:18,193 - core.ocr_client - INFO - Starting OCR request f66a86e4 for merged_20250917_141818_178_f4784552.jpg (0.0MB)
2025-09-17 14:18:18,194 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:18:18,280 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f66a86e4: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:18:18,281 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:18:18,357 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f66a86e4: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "da5d1967-b982-4148-b64c-b5a0aa59c2f
2025-09-17 14:18:18,359 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:18:18,359 - core.ocr_queue - ERROR - Job ocr_F2_1758107898_58579b6e failed on attempt 1: OCR processing returned no result
2025-09-17 14:18:18,359 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107898_58579b6e for retry in 2s
2025-09-17 14:18:20,360 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107898_58579b6e (attempt 2)
2025-09-17 14:18:20,361 - core.ocr_client - INFO - Starting OCR request 16e44e92 for merged_20250917_141818_178_f4784552.jpg (0.0MB)
2025-09-17 14:18:20,362 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:18:20,439 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 16e44e92: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:18:20,440 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:18:20,514 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 16e44e92: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d4c1bc11-3c4e-46ee-8f1a-ee34cebd4fe
2025-09-17 14:18:20,515 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:18:20,515 - core.ocr_queue - ERROR - Job ocr_F2_1758107898_58579b6e failed on attempt 2: OCR processing returned no result
2025-09-17 14:18:20,516 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107898_58579b6e for retry in 4s
2025-09-17 14:18:24,516 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758107898_58579b6e (attempt 3)
2025-09-17 14:18:24,516 - core.ocr_client - INFO - Starting OCR request 0193b228 for merged_20250917_141818_178_f4784552.jpg (0.0MB)
2025-09-17 14:18:24,517 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:18:24,594 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0193b228: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:18:24,595 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:18:24,669 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0193b228: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "132176a1-5c10-4104-9f96-43d2c17875b
2025-09-17 14:18:24,670 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:18:24,670 - core.ocr_queue - ERROR - Job ocr_F2_1758107898_58579b6e failed on attempt 3: OCR processing returned no result
2025-09-17 14:18:24,671 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107898_58579b6e)
2025-09-17 14:18:24,671 - core.ocr_queue - ERROR - Job ocr_F2_1758107898_58579b6e permanently failed: OCR processing returned no result
2025-09-17 14:18:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:37 MSK)" (scheduled at 2025-09-17 14:18:27.834735+03:00)
2025-09-17 14:18:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:37 MSK)" executed successfully
2025-09-17 14:18:32,849 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:19:17 MSK)" (scheduled at 2025-09-17 14:18:32.833733+03:00)
2025-09-17 14:18:32,850 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:19:17 MSK)" executed successfully
2025-09-17 14:18:37,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:47 MSK)" (scheduled at 2025-09-17 14:18:37.834735+03:00)
2025-09-17 14:18:37,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:38,220 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:47 MSK)" executed successfully
2025-09-17 14:18:47,838 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:19:17 MSK)" (scheduled at 2025-09-17 14:18:47.831733+03:00)
2025-09-17 14:18:47,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:57 MSK)" (scheduled at 2025-09-17 14:18:47.834735+03:00)
2025-09-17 14:18:47,840 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:19:17 MSK)" executed successfully
2025-09-17 14:18:47,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:47,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:18:57 MSK)" executed successfully
2025-09-17 14:18:57,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:07 MSK)" (scheduled at 2025-09-17 14:18:57.834735+03:00)
2025-09-17 14:18:57,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:18:57,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:07 MSK)" executed successfully
2025-09-17 14:19:07,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:17 MSK)" (scheduled at 2025-09-17 14:19:07.834735+03:00)
2025-09-17 14:19:07,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:07,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:17 MSK)" executed successfully
2025-09-17 14:19:17,846 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:19:47 MSK)" (scheduled at 2025-09-17 14:19:17.831733+03:00)
2025-09-17 14:19:17,846 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:20:17 MSK)" (scheduled at 2025-09-17 14:19:17.832734+03:00)
2025-09-17 14:19:17,846 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:20:02 MSK)" (scheduled at 2025-09-17 14:19:17.833733+03:00)
2025-09-17 14:19:17,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:27 MSK)" (scheduled at 2025-09-17 14:19:17.834735+03:00)
2025-09-17 14:19:17,847 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:19:47 MSK)" executed successfully
2025-09-17 14:19:17,848 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:19:17,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:17,848 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:20:02 MSK)" executed successfully
2025-09-17 14:19:17,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:27 MSK)" executed successfully
2025-09-17 14:19:18,106 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_141918_095_655c887e.jpg (285x800) in 0.257s
2025-09-17 14:19:18,109 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:19:18,109 - core.database_manager - INFO - Created OCR session 35 for hotkey F2
2025-09-17 14:19:18,110 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758107958_4dbd7393 for F2 (session 35)
2025-09-17 14:19:18,110 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107958_4dbd7393 (attempt 1)
2025-09-17 14:19:18,110 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:20:17 MSK)" executed successfully
2025-09-17 14:19:18,111 - core.ocr_client - INFO - Starting OCR request 0a5189f8 for merged_20250917_141918_095_655c887e.jpg (0.0MB)
2025-09-17 14:19:18,111 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:19:18,225 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0a5189f8: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:19:18,225 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:19:18,313 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0a5189f8: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b66e2df7-a110-4384-8dcc-32452053314
2025-09-17 14:19:18,314 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:19:18,314 - core.ocr_queue - ERROR - Job ocr_F2_1758107958_4dbd7393 failed on attempt 1: OCR processing returned no result
2025-09-17 14:19:18,315 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107958_4dbd7393 for retry in 2s
2025-09-17 14:19:20,316 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107958_4dbd7393 (attempt 2)
2025-09-17 14:19:20,317 - core.ocr_client - INFO - Starting OCR request 6ff4696f for merged_20250917_141918_095_655c887e.jpg (0.0MB)
2025-09-17 14:19:20,317 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:19:20,395 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6ff4696f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:19:20,396 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:19:20,486 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6ff4696f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "79a4303b-719f-48ec-a278-c969e449067
2025-09-17 14:19:20,487 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:19:20,487 - core.ocr_queue - ERROR - Job ocr_F2_1758107958_4dbd7393 failed on attempt 2: OCR processing returned no result
2025-09-17 14:19:20,488 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758107958_4dbd7393 for retry in 4s
2025-09-17 14:19:24,489 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758107958_4dbd7393 (attempt 3)
2025-09-17 14:19:24,489 - core.ocr_client - INFO - Starting OCR request 2566fb52 for merged_20250917_141918_095_655c887e.jpg (0.0MB)
2025-09-17 14:19:24,490 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:19:24,567 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2566fb52: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:19:24,567 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:19:24,645 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2566fb52: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "56503543-f6a2-4d89-9ca3-bdcdbf46b6e
2025-09-17 14:19:24,646 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:19:24,646 - core.ocr_queue - ERROR - Job ocr_F2_1758107958_4dbd7393 failed on attempt 3: OCR processing returned no result
2025-09-17 14:19:24,647 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758107958_4dbd7393)
2025-09-17 14:19:24,647 - core.ocr_queue - ERROR - Job ocr_F2_1758107958_4dbd7393 permanently failed: OCR processing returned no result
2025-09-17 14:19:27,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:37 MSK)" (scheduled at 2025-09-17 14:19:27.834735+03:00)
2025-09-17 14:19:27,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:27,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:37 MSK)" executed successfully
2025-09-17 14:19:37,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:47 MSK)" (scheduled at 2025-09-17 14:19:37.834735+03:00)
2025-09-17 14:19:37,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:37,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:47 MSK)" executed successfully
2025-09-17 14:19:47,846 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:20:17 MSK)" (scheduled at 2025-09-17 14:19:47.831733+03:00)
2025-09-17 14:19:47,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:57 MSK)" (scheduled at 2025-09-17 14:19:47.834735+03:00)
2025-09-17 14:19:47,847 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:20:17 MSK)" executed successfully
2025-09-17 14:19:47,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:47,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:19:57 MSK)" executed successfully
2025-09-17 14:19:57,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:07 MSK)" (scheduled at 2025-09-17 14:19:57.834735+03:00)
2025-09-17 14:19:57,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:19:57,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:07 MSK)" executed successfully
2025-09-17 14:20:00,331 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:20:00,331 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:20:02,848 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:20:47 MSK)" (scheduled at 2025-09-17 14:20:02.833733+03:00)
2025-09-17 14:20:02,849 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:20:47 MSK)" executed successfully
2025-09-17 14:20:07,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:17 MSK)" (scheduled at 2025-09-17 14:20:07.834735+03:00)
2025-09-17 14:20:07,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:07,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:17 MSK)" executed successfully
2025-09-17 14:20:17,844 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:20:47 MSK)" (scheduled at 2025-09-17 14:20:17.831733+03:00)
2025-09-17 14:20:17,844 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:21:17 MSK)" (scheduled at 2025-09-17 14:20:17.832734+03:00)
2025-09-17 14:20:17,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:27 MSK)" (scheduled at 2025-09-17 14:20:17.834735+03:00)
2025-09-17 14:20:17,846 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:20:47 MSK)" executed successfully
2025-09-17 14:20:17,846 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:20:17,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:17,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:27 MSK)" executed successfully
2025-09-17 14:20:17,876 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142017_865_ec25a7e6.jpg (285x800) in 0.028s
2025-09-17 14:20:17,879 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:20:17,879 - core.database_manager - INFO - Created OCR session 36 for hotkey F2
2025-09-17 14:20:17,880 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108017_783a4203 for F2 (session 36)
2025-09-17 14:20:17,880 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108017_783a4203 (attempt 1)
2025-09-17 14:20:17,880 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:21:17 MSK)" executed successfully
2025-09-17 14:20:17,881 - core.ocr_client - INFO - Starting OCR request bfd72654 for merged_20250917_142017_865_ec25a7e6.jpg (0.0MB)
2025-09-17 14:20:17,881 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:20:17,969 - core.ocr_client - ERROR - Non-retryable error for primary-ocr bfd72654: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:20:17,970 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:20:18,049 - core.ocr_client - ERROR - Non-retryable error for fallback-vision bfd72654: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "41d89d8b-798c-415d-a44b-378ebecb02f
2025-09-17 14:20:18,050 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:20:18,050 - core.ocr_queue - ERROR - Job ocr_F2_1758108017_783a4203 failed on attempt 1: OCR processing returned no result
2025-09-17 14:20:18,051 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108017_783a4203 for retry in 2s
2025-09-17 14:20:20,051 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108017_783a4203 (attempt 2)
2025-09-17 14:20:20,051 - core.ocr_client - INFO - Starting OCR request 1a17d2de for merged_20250917_142017_865_ec25a7e6.jpg (0.0MB)
2025-09-17 14:20:20,052 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:20:20,130 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 1a17d2de: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:20:20,131 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:20:20,212 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 1a17d2de: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "224d2a77-ad4f-4d7d-bf78-dabdfd69375
2025-09-17 14:20:20,213 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:20:20,213 - core.ocr_queue - ERROR - Job ocr_F2_1758108017_783a4203 failed on attempt 2: OCR processing returned no result
2025-09-17 14:20:20,214 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108017_783a4203 for retry in 4s
2025-09-17 14:20:24,216 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108017_783a4203 (attempt 3)
2025-09-17 14:20:24,216 - core.ocr_client - INFO - Starting OCR request 1b6675e2 for merged_20250917_142017_865_ec25a7e6.jpg (0.0MB)
2025-09-17 14:20:24,217 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:20:24,293 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 1b6675e2: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:20:24,294 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:20:24,381 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 1b6675e2: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "87ffc323-f67a-4434-86c2-c445254c6ef
2025-09-17 14:20:24,382 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:20:24,382 - core.ocr_queue - ERROR - Job ocr_F2_1758108017_783a4203 failed on attempt 3: OCR processing returned no result
2025-09-17 14:20:24,383 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108017_783a4203)
2025-09-17 14:20:24,383 - core.ocr_queue - ERROR - Job ocr_F2_1758108017_783a4203 permanently failed: OCR processing returned no result
2025-09-17 14:20:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:37 MSK)" (scheduled at 2025-09-17 14:20:27.834735+03:00)
2025-09-17 14:20:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:37 MSK)" executed successfully
2025-09-17 14:20:37,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:47 MSK)" (scheduled at 2025-09-17 14:20:37.834735+03:00)
2025-09-17 14:20:37,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:37,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:47 MSK)" executed successfully
2025-09-17 14:20:47,834 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:21:17 MSK)" (scheduled at 2025-09-17 14:20:47.831733+03:00)
2025-09-17 14:20:47,834 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:21:32 MSK)" (scheduled at 2025-09-17 14:20:47.833733+03:00)
2025-09-17 14:20:47,834 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:57 MSK)" (scheduled at 2025-09-17 14:20:47.834735+03:00)
2025-09-17 14:20:47,836 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:21:17 MSK)" executed successfully
2025-09-17 14:20:47,836 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:21:32 MSK)" executed successfully
2025-09-17 14:20:47,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:47,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:20:57 MSK)" executed successfully
2025-09-17 14:20:57,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:07 MSK)" (scheduled at 2025-09-17 14:20:57.834735+03:00)
2025-09-17 14:20:57,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:20:57,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:07 MSK)" executed successfully
2025-09-17 14:21:07,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:17 MSK)" (scheduled at 2025-09-17 14:21:07.834735+03:00)
2025-09-17 14:21:07,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:07,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:17 MSK)" executed successfully
2025-09-17 14:21:17,836 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:21:47 MSK)" (scheduled at 2025-09-17 14:21:17.831733+03:00)
2025-09-17 14:21:17,836 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:22:17 MSK)" (scheduled at 2025-09-17 14:21:17.832734+03:00)
2025-09-17 14:21:17,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:27 MSK)" (scheduled at 2025-09-17 14:21:17.834735+03:00)
2025-09-17 14:21:17,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:21:47 MSK)" executed successfully
2025-09-17 14:21:17,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:17,838 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:21:17,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:27 MSK)" executed successfully
2025-09-17 14:21:18,043 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142118_031_6b85ed88.jpg (285x800) in 0.203s
2025-09-17 14:21:18,046 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:21:18,047 - core.database_manager - INFO - Created OCR session 37 for hotkey F2
2025-09-17 14:21:18,047 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108078_93275cf9 for F2 (session 37)
2025-09-17 14:21:18,047 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108078_93275cf9 (attempt 1)
2025-09-17 14:21:18,048 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:22:17 MSK)" executed successfully
2025-09-17 14:21:18,048 - core.ocr_client - INFO - Starting OCR request bf718f41 for merged_20250917_142118_031_6b85ed88.jpg (0.0MB)
2025-09-17 14:21:18,049 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:21:18,133 - core.ocr_client - ERROR - Non-retryable error for primary-ocr bf718f41: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:21:18,134 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:21:18,211 - core.ocr_client - ERROR - Non-retryable error for fallback-vision bf718f41: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e5ecdeaa-08a1-45f5-a7b3-1c45d8caff8
2025-09-17 14:21:18,212 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:21:18,212 - core.ocr_queue - ERROR - Job ocr_F2_1758108078_93275cf9 failed on attempt 1: OCR processing returned no result
2025-09-17 14:21:18,212 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108078_93275cf9 for retry in 2s
2025-09-17 14:21:20,213 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108078_93275cf9 (attempt 2)
2025-09-17 14:21:20,213 - core.ocr_client - INFO - Starting OCR request e1acf57a for merged_20250917_142118_031_6b85ed88.jpg (0.0MB)
2025-09-17 14:21:20,214 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:21:20,291 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e1acf57a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:21:20,291 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:21:20,371 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e1acf57a: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "577e9e3a-7488-45b2-bd24-0f3f37968f0
2025-09-17 14:21:20,372 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:21:20,372 - core.ocr_queue - ERROR - Job ocr_F2_1758108078_93275cf9 failed on attempt 2: OCR processing returned no result
2025-09-17 14:21:20,373 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108078_93275cf9 for retry in 4s
2025-09-17 14:21:24,374 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108078_93275cf9 (attempt 3)
2025-09-17 14:21:24,374 - core.ocr_client - INFO - Starting OCR request 85bd0997 for merged_20250917_142118_031_6b85ed88.jpg (0.0MB)
2025-09-17 14:21:24,375 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:21:24,451 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 85bd0997: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:21:24,452 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:21:24,799 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 85bd0997: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "bfedb121-4fa4-4fb3-b72b-9e785f2ac03
2025-09-17 14:21:24,800 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:21:24,800 - core.ocr_queue - ERROR - Job ocr_F2_1758108078_93275cf9 failed on attempt 3: OCR processing returned no result
2025-09-17 14:21:24,801 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108078_93275cf9)
2025-09-17 14:21:24,801 - core.ocr_queue - ERROR - Job ocr_F2_1758108078_93275cf9 permanently failed: OCR processing returned no result
2025-09-17 14:21:27,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:37 MSK)" (scheduled at 2025-09-17 14:21:27.834735+03:00)
2025-09-17 14:21:27,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:27,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:37 MSK)" executed successfully
2025-09-17 14:21:32,837 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:22:17 MSK)" (scheduled at 2025-09-17 14:21:32.833733+03:00)
2025-09-17 14:21:32,838 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:22:17 MSK)" executed successfully
2025-09-17 14:21:37,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:47 MSK)" (scheduled at 2025-09-17 14:21:37.834735+03:00)
2025-09-17 14:21:37,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:37,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:47 MSK)" executed successfully
2025-09-17 14:21:47,833 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:22:17 MSK)" (scheduled at 2025-09-17 14:21:47.831733+03:00)
2025-09-17 14:21:47,834 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:22:17 MSK)" executed successfully
2025-09-17 14:21:47,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:57 MSK)" (scheduled at 2025-09-17 14:21:47.834735+03:00)
2025-09-17 14:21:47,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:47,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:21:57 MSK)" executed successfully
2025-09-17 14:21:57,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:07 MSK)" (scheduled at 2025-09-17 14:21:57.834735+03:00)
2025-09-17 14:21:57,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:21:57,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:07 MSK)" executed successfully
2025-09-17 14:22:07,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:17 MSK)" (scheduled at 2025-09-17 14:22:07.834735+03:00)
2025-09-17 14:22:07,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:07,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:17 MSK)" executed successfully
2025-09-17 14:22:17,836 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:22:47 MSK)" (scheduled at 2025-09-17 14:22:17.831733+03:00)
2025-09-17 14:22:17,836 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:23:17 MSK)" (scheduled at 2025-09-17 14:22:17.832734+03:00)
2025-09-17 14:22:17,836 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:23:02 MSK)" (scheduled at 2025-09-17 14:22:17.833733+03:00)
2025-09-17 14:22:17,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:27 MSK)" (scheduled at 2025-09-17 14:22:17.834735+03:00)
2025-09-17 14:22:17,838 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:22:47 MSK)" executed successfully
2025-09-17 14:22:17,838 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:22:17,839 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:23:02 MSK)" executed successfully
2025-09-17 14:22:17,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:17,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:27 MSK)" executed successfully
2025-09-17 14:22:17,867 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142217_855_c53233ad.jpg (285x800) in 0.028s
2025-09-17 14:22:17,870 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:22:17,870 - core.database_manager - INFO - Created OCR session 38 for hotkey F2
2025-09-17 14:22:17,871 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108137_50b8c7cd for F2 (session 38)
2025-09-17 14:22:17,871 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108137_50b8c7cd (attempt 1)
2025-09-17 14:22:17,871 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:23:17 MSK)" executed successfully
2025-09-17 14:22:17,872 - core.ocr_client - INFO - Starting OCR request 4ff4b42f for merged_20250917_142217_855_c53233ad.jpg (0.0MB)
2025-09-17 14:22:17,872 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:22:17,959 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 4ff4b42f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:22:17,960 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:22:18,041 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 4ff4b42f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "0ba76a16-cdb9-4f8b-89e1-a70b7439f0f
2025-09-17 14:22:18,042 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:22:18,043 - core.ocr_queue - ERROR - Job ocr_F2_1758108137_50b8c7cd failed on attempt 1: OCR processing returned no result
2025-09-17 14:22:18,043 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108137_50b8c7cd for retry in 2s
2025-09-17 14:22:20,046 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108137_50b8c7cd (attempt 2)
2025-09-17 14:22:20,046 - core.ocr_client - INFO - Starting OCR request e2a16cbd for merged_20250917_142217_855_c53233ad.jpg (0.0MB)
2025-09-17 14:22:20,047 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:22:20,124 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e2a16cbd: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:22:20,125 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:22:20,199 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e2a16cbd: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "2a34cef1-c0dc-42c4-a62a-6dac43b26d5
2025-09-17 14:22:20,200 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:22:20,200 - core.ocr_queue - ERROR - Job ocr_F2_1758108137_50b8c7cd failed on attempt 2: OCR processing returned no result
2025-09-17 14:22:20,201 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108137_50b8c7cd for retry in 4s
2025-09-17 14:22:24,201 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108137_50b8c7cd (attempt 3)
2025-09-17 14:22:24,201 - core.ocr_client - INFO - Starting OCR request 36a24621 for merged_20250917_142217_855_c53233ad.jpg (0.0MB)
2025-09-17 14:22:24,202 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:22:24,279 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 36a24621: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:22:24,280 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:22:24,357 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 36a24621: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "c9b6f14e-bdbb-415a-8858-ee2758237db
2025-09-17 14:22:24,357 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:22:24,358 - core.ocr_queue - ERROR - Job ocr_F2_1758108137_50b8c7cd failed on attempt 3: OCR processing returned no result
2025-09-17 14:22:24,358 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108137_50b8c7cd)
2025-09-17 14:22:24,359 - core.ocr_queue - ERROR - Job ocr_F2_1758108137_50b8c7cd permanently failed: OCR processing returned no result
2025-09-17 14:22:27,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:37 MSK)" (scheduled at 2025-09-17 14:22:27.834735+03:00)
2025-09-17 14:22:27,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:27,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:37 MSK)" executed successfully
2025-09-17 14:22:37,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:47 MSK)" (scheduled at 2025-09-17 14:22:37.834735+03:00)
2025-09-17 14:22:37,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:37,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:47 MSK)" executed successfully
2025-09-17 14:22:47,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:23:17 MSK)" (scheduled at 2025-09-17 14:22:47.831733+03:00)
2025-09-17 14:22:47,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:57 MSK)" (scheduled at 2025-09-17 14:22:47.834735+03:00)
2025-09-17 14:22:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:47,843 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:23:17 MSK)" executed successfully
2025-09-17 14:22:47,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:22:57 MSK)" executed successfully
2025-09-17 14:22:57,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:07 MSK)" (scheduled at 2025-09-17 14:22:57.834735+03:00)
2025-09-17 14:22:57,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:22:57,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:07 MSK)" executed successfully
2025-09-17 14:23:02,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:23:47 MSK)" (scheduled at 2025-09-17 14:23:02.833733+03:00)
2025-09-17 14:23:02,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:23:47 MSK)" executed successfully
2025-09-17 14:23:07,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:17 MSK)" (scheduled at 2025-09-17 14:23:07.834735+03:00)
2025-09-17 14:23:07,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:07,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:17 MSK)" executed successfully
2025-09-17 14:23:17,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:23:47 MSK)" (scheduled at 2025-09-17 14:23:17.831733+03:00)
2025-09-17 14:23:17,847 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:24:17 MSK)" (scheduled at 2025-09-17 14:23:17.832734+03:00)
2025-09-17 14:23:17,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:27 MSK)" (scheduled at 2025-09-17 14:23:17.834735+03:00)
2025-09-17 14:23:17,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:23:47 MSK)" executed successfully
2025-09-17 14:23:17,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:17,849 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:23:17,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:27 MSK)" executed successfully
2025-09-17 14:23:17,877 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142317_866_39dbc6b3.jpg (285x800) in 0.028s
2025-09-17 14:23:17,880 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:23:17,880 - core.database_manager - INFO - Created OCR session 39 for hotkey F2
2025-09-17 14:23:17,881 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108197_42686974 for F2 (session 39)
2025-09-17 14:23:17,881 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108197_42686974 (attempt 1)
2025-09-17 14:23:17,881 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:24:17 MSK)" executed successfully
2025-09-17 14:23:17,881 - core.ocr_client - INFO - Starting OCR request 5ed30e7c for merged_20250917_142317_866_39dbc6b3.jpg (0.0MB)
2025-09-17 14:23:17,882 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:23:17,966 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5ed30e7c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:23:17,967 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:23:18,043 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5ed30e7c: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ba34b091-3406-4460-afa4-a3b30f64031
2025-09-17 14:23:18,044 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:23:18,045 - core.ocr_queue - ERROR - Job ocr_F2_1758108197_42686974 failed on attempt 1: OCR processing returned no result
2025-09-17 14:23:18,045 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108197_42686974 for retry in 2s
2025-09-17 14:23:20,047 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108197_42686974 (attempt 2)
2025-09-17 14:23:20,047 - core.ocr_client - INFO - Starting OCR request b2fc677b for merged_20250917_142317_866_39dbc6b3.jpg (0.0MB)
2025-09-17 14:23:20,048 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:23:20,124 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b2fc677b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:23:20,125 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:23:20,213 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b2fc677b: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "cd31ec04-dfa7-4963-a8b6-d4f6fdb186f
2025-09-17 14:23:20,214 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:23:20,214 - core.ocr_queue - ERROR - Job ocr_F2_1758108197_42686974 failed on attempt 2: OCR processing returned no result
2025-09-17 14:23:20,215 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108197_42686974 for retry in 4s
2025-09-17 14:23:24,216 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108197_42686974 (attempt 3)
2025-09-17 14:23:24,216 - core.ocr_client - INFO - Starting OCR request fc98b632 for merged_20250917_142317_866_39dbc6b3.jpg (0.0MB)
2025-09-17 14:23:24,217 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:23:24,293 - core.ocr_client - ERROR - Non-retryable error for primary-ocr fc98b632: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:23:24,294 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:23:24,649 - core.ocr_client - ERROR - Non-retryable error for fallback-vision fc98b632: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a2b6c663-842c-4376-a026-d3408e1a1b7
2025-09-17 14:23:24,650 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:23:24,650 - core.ocr_queue - ERROR - Job ocr_F2_1758108197_42686974 failed on attempt 3: OCR processing returned no result
2025-09-17 14:23:24,651 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108197_42686974)
2025-09-17 14:23:24,652 - core.ocr_queue - ERROR - Job ocr_F2_1758108197_42686974 permanently failed: OCR processing returned no result
2025-09-17 14:23:27,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:37 MSK)" (scheduled at 2025-09-17 14:23:27.834735+03:00)
2025-09-17 14:23:27,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:27,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:37 MSK)" executed successfully
2025-09-17 14:23:37,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:47 MSK)" (scheduled at 2025-09-17 14:23:37.834735+03:00)
2025-09-17 14:23:37,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:37,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:47 MSK)" executed successfully
2025-09-17 14:23:47,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:24:17 MSK)" (scheduled at 2025-09-17 14:23:47.831733+03:00)
2025-09-17 14:23:47,835 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:24:32 MSK)" (scheduled at 2025-09-17 14:23:47.833733+03:00)
2025-09-17 14:23:47,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:57 MSK)" (scheduled at 2025-09-17 14:23:47.834735+03:00)
2025-09-17 14:23:47,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:24:17 MSK)" executed successfully
2025-09-17 14:23:47,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:47,837 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:24:32 MSK)" executed successfully
2025-09-17 14:23:47,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:23:57 MSK)" executed successfully
2025-09-17 14:23:57,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:07 MSK)" (scheduled at 2025-09-17 14:23:57.834735+03:00)
2025-09-17 14:23:57,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:23:57,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:07 MSK)" executed successfully
2025-09-17 14:24:07,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:17 MSK)" (scheduled at 2025-09-17 14:24:07.834735+03:00)
2025-09-17 14:24:07,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:07,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:17 MSK)" executed successfully
2025-09-17 14:24:17,844 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:24:47 MSK)" (scheduled at 2025-09-17 14:24:17.831733+03:00)
2025-09-17 14:24:17,844 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:25:17 MSK)" (scheduled at 2025-09-17 14:24:17.832734+03:00)
2025-09-17 14:24:17,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:27 MSK)" (scheduled at 2025-09-17 14:24:17.834735+03:00)
2025-09-17 14:24:17,846 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:24:47 MSK)" executed successfully
2025-09-17 14:24:17,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:17,846 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:24:17,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:27 MSK)" executed successfully
2025-09-17 14:24:17,897 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142417_886_5c82b6f4.jpg (285x800) in 0.050s
2025-09-17 14:24:17,900 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:24:17,901 - core.database_manager - INFO - Created OCR session 40 for hotkey F2
2025-09-17 14:24:17,901 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108257_044426cc for F2 (session 40)
2025-09-17 14:24:17,901 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108257_044426cc (attempt 1)
2025-09-17 14:24:17,902 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:25:17 MSK)" executed successfully
2025-09-17 14:24:17,902 - core.ocr_client - INFO - Starting OCR request b5e3ea1c for merged_20250917_142417_886_5c82b6f4.jpg (0.0MB)
2025-09-17 14:24:17,902 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:24:18,011 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b5e3ea1c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:24:18,012 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:24:18,086 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b5e3ea1c: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d19ad1a8-7cd8-435b-896b-485f7110e07
2025-09-17 14:24:18,087 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:24:18,087 - core.ocr_queue - ERROR - Job ocr_F2_1758108257_044426cc failed on attempt 1: OCR processing returned no result
2025-09-17 14:24:18,088 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108257_044426cc for retry in 2s
2025-09-17 14:24:20,089 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108257_044426cc (attempt 2)
2025-09-17 14:24:20,089 - core.ocr_client - INFO - Starting OCR request 2ce08b59 for merged_20250917_142417_886_5c82b6f4.jpg (0.0MB)
2025-09-17 14:24:20,090 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:24:20,168 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2ce08b59: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:24:20,169 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:24:20,258 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2ce08b59: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "45192827-74ba-48dc-900b-1f995be0a72
2025-09-17 14:24:20,259 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:24:20,259 - core.ocr_queue - ERROR - Job ocr_F2_1758108257_044426cc failed on attempt 2: OCR processing returned no result
2025-09-17 14:24:20,260 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108257_044426cc for retry in 4s
2025-09-17 14:24:24,261 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108257_044426cc (attempt 3)
2025-09-17 14:24:24,262 - core.ocr_client - INFO - Starting OCR request a1acccf2 for merged_20250917_142417_886_5c82b6f4.jpg (0.0MB)
2025-09-17 14:24:24,262 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:24:24,338 - core.ocr_client - ERROR - Non-retryable error for primary-ocr a1acccf2: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:24:24,339 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:24:24,430 - core.ocr_client - ERROR - Non-retryable error for fallback-vision a1acccf2: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "45ac6c2b-e713-4041-9c44-6d05be853a2
2025-09-17 14:24:24,430 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:24:24,430 - core.ocr_queue - ERROR - Job ocr_F2_1758108257_044426cc failed on attempt 3: OCR processing returned no result
2025-09-17 14:24:24,431 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108257_044426cc)
2025-09-17 14:24:24,431 - core.ocr_queue - ERROR - Job ocr_F2_1758108257_044426cc permanently failed: OCR processing returned no result
2025-09-17 14:24:27,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:37 MSK)" (scheduled at 2025-09-17 14:24:27.834735+03:00)
2025-09-17 14:24:27,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:27,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:37 MSK)" executed successfully
2025-09-17 14:24:32,848 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:25:17 MSK)" (scheduled at 2025-09-17 14:24:32.833733+03:00)
2025-09-17 14:24:32,849 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:25:17 MSK)" executed successfully
2025-09-17 14:24:37,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:47 MSK)" (scheduled at 2025-09-17 14:24:37.834735+03:00)
2025-09-17 14:24:37,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:37,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:47 MSK)" executed successfully
2025-09-17 14:24:47,840 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:25:17 MSK)" (scheduled at 2025-09-17 14:24:47.831733+03:00)
2025-09-17 14:24:47,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:57 MSK)" (scheduled at 2025-09-17 14:24:47.834735+03:00)
2025-09-17 14:24:47,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:25:17 MSK)" executed successfully
2025-09-17 14:24:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:47,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:24:57 MSK)" executed successfully
2025-09-17 14:24:57,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:07 MSK)" (scheduled at 2025-09-17 14:24:57.834735+03:00)
2025-09-17 14:24:57,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:24:57,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:07 MSK)" executed successfully
2025-09-17 14:25:00,468 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:25:00,469 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:25:07,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:17 MSK)" (scheduled at 2025-09-17 14:25:07.834735+03:00)
2025-09-17 14:25:07,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:07,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:17 MSK)" executed successfully
2025-09-17 14:25:17,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:25:47 MSK)" (scheduled at 2025-09-17 14:25:17.831733+03:00)
2025-09-17 14:25:17,843 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:26:17 MSK)" (scheduled at 2025-09-17 14:25:17.832734+03:00)
2025-09-17 14:25:17,843 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:26:02 MSK)" (scheduled at 2025-09-17 14:25:17.833733+03:00)
2025-09-17 14:25:17,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:27 MSK)" (scheduled at 2025-09-17 14:25:17.834735+03:00)
2025-09-17 14:25:17,845 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:25:47 MSK)" executed successfully
2025-09-17 14:25:17,845 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:25:17,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:17,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:26:02 MSK)" executed successfully
2025-09-17 14:25:17,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:27 MSK)" executed successfully
2025-09-17 14:25:17,870 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142517_858_d444d639.jpg (285x800) in 0.024s
2025-09-17 14:25:17,873 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:25:17,874 - core.database_manager - INFO - Created OCR session 41 for hotkey F2
2025-09-17 14:25:17,874 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108317_8dfa0968 for F2 (session 41)
2025-09-17 14:25:17,874 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108317_8dfa0968 (attempt 1)
2025-09-17 14:25:17,875 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:26:17 MSK)" executed successfully
2025-09-17 14:25:17,875 - core.ocr_client - INFO - Starting OCR request b46379e6 for merged_20250917_142517_858_d444d639.jpg (0.0MB)
2025-09-17 14:25:17,876 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:25:18,207 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b46379e6: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:25:18,208 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:25:18,297 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b46379e6: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "dd00451c-a64f-47c4-8ff7-bee466873eb
2025-09-17 14:25:18,298 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:25:18,298 - core.ocr_queue - ERROR - Job ocr_F2_1758108317_8dfa0968 failed on attempt 1: OCR processing returned no result
2025-09-17 14:25:18,299 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108317_8dfa0968 for retry in 2s
2025-09-17 14:25:20,300 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108317_8dfa0968 (attempt 2)
2025-09-17 14:25:20,300 - core.ocr_client - INFO - Starting OCR request d8373087 for merged_20250917_142517_858_d444d639.jpg (0.0MB)
2025-09-17 14:25:20,301 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:25:20,381 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d8373087: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:25:20,382 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:25:20,457 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d8373087: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "8de4edaf-123a-432b-8d42-29de1fe34f9
2025-09-17 14:25:20,457 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:25:20,458 - core.ocr_queue - ERROR - Job ocr_F2_1758108317_8dfa0968 failed on attempt 2: OCR processing returned no result
2025-09-17 14:25:20,458 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108317_8dfa0968 for retry in 4s
2025-09-17 14:25:24,460 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108317_8dfa0968 (attempt 3)
2025-09-17 14:25:24,460 - core.ocr_client - INFO - Starting OCR request 1b99b2bb for merged_20250917_142517_858_d444d639.jpg (0.0MB)
2025-09-17 14:25:24,461 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:25:24,542 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 1b99b2bb: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:25:24,542 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:25:24,638 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 1b99b2bb: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f40055e3-5b0f-442a-9152-a0e5ac19206
2025-09-17 14:25:24,639 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:25:24,639 - core.ocr_queue - ERROR - Job ocr_F2_1758108317_8dfa0968 failed on attempt 3: OCR processing returned no result
2025-09-17 14:25:24,639 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108317_8dfa0968)
2025-09-17 14:25:24,640 - core.ocr_queue - ERROR - Job ocr_F2_1758108317_8dfa0968 permanently failed: OCR processing returned no result
2025-09-17 14:25:27,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:37 MSK)" (scheduled at 2025-09-17 14:25:27.834735+03:00)
2025-09-17 14:25:27,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:27,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:37 MSK)" executed successfully
2025-09-17 14:25:37,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:47 MSK)" (scheduled at 2025-09-17 14:25:37.834735+03:00)
2025-09-17 14:25:37,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:38,315 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:47 MSK)" executed successfully
2025-09-17 14:25:47,838 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:26:17 MSK)" (scheduled at 2025-09-17 14:25:47.831733+03:00)
2025-09-17 14:25:47,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:57 MSK)" (scheduled at 2025-09-17 14:25:47.834735+03:00)
2025-09-17 14:25:47,839 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:26:17 MSK)" executed successfully
2025-09-17 14:25:47,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:47,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:25:57 MSK)" executed successfully
2025-09-17 14:25:57,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:07 MSK)" (scheduled at 2025-09-17 14:25:57.834735+03:00)
2025-09-17 14:25:57,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:25:57,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:07 MSK)" executed successfully
2025-09-17 14:26:02,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:26:47 MSK)" (scheduled at 2025-09-17 14:26:02.833733+03:00)
2025-09-17 14:26:02,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:26:47 MSK)" executed successfully
2025-09-17 14:26:07,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:17 MSK)" (scheduled at 2025-09-17 14:26:07.834735+03:00)
2025-09-17 14:26:07,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:07,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:17 MSK)" executed successfully
2025-09-17 14:26:17,833 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:26:47 MSK)" (scheduled at 2025-09-17 14:26:17.831733+03:00)
2025-09-17 14:26:17,833 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:27:17 MSK)" (scheduled at 2025-09-17 14:26:17.832734+03:00)
2025-09-17 14:26:17,834 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:26:47 MSK)" executed successfully
2025-09-17 14:26:17,834 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:26:17,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:27 MSK)" (scheduled at 2025-09-17 14:26:17.834735+03:00)
2025-09-17 14:26:17,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:17,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:27 MSK)" executed successfully
2025-09-17 14:26:17,907 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142617_850_79e16f63.jpg (285x800) in 0.072s
2025-09-17 14:26:17,910 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:26:17,911 - core.database_manager - INFO - Created OCR session 42 for hotkey F2
2025-09-17 14:26:17,911 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108377_b0aa73b6 for F2 (session 42)
2025-09-17 14:26:17,911 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108377_b0aa73b6 (attempt 1)
2025-09-17 14:26:17,912 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:27:17 MSK)" executed successfully
2025-09-17 14:26:17,912 - core.ocr_client - INFO - Starting OCR request ecc66b38 for merged_20250917_142617_850_79e16f63.jpg (0.0MB)
2025-09-17 14:26:17,913 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:26:17,996 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ecc66b38: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:26:17,997 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:26:18,072 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ecc66b38: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "6d80513e-485f-415d-9ce2-4f8ba0c8738
2025-09-17 14:26:18,073 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:26:18,073 - core.ocr_queue - ERROR - Job ocr_F2_1758108377_b0aa73b6 failed on attempt 1: OCR processing returned no result
2025-09-17 14:26:18,073 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108377_b0aa73b6 for retry in 2s
2025-09-17 14:26:20,075 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108377_b0aa73b6 (attempt 2)
2025-09-17 14:26:20,076 - core.ocr_client - INFO - Starting OCR request 211a0c61 for merged_20250917_142617_850_79e16f63.jpg (0.0MB)
2025-09-17 14:26:20,076 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:26:20,152 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 211a0c61: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:26:20,153 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:26:20,229 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 211a0c61: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "57c2d5d0-19fd-4e53-9c5f-b70a494d6ae
2025-09-17 14:26:20,229 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:26:20,230 - core.ocr_queue - ERROR - Job ocr_F2_1758108377_b0aa73b6 failed on attempt 2: OCR processing returned no result
2025-09-17 14:26:20,230 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108377_b0aa73b6 for retry in 4s
2025-09-17 14:26:24,231 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108377_b0aa73b6 (attempt 3)
2025-09-17 14:26:24,232 - core.ocr_client - INFO - Starting OCR request e311627d for merged_20250917_142617_850_79e16f63.jpg (0.0MB)
2025-09-17 14:26:24,233 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:26:24,312 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e311627d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:26:24,312 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:26:24,385 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e311627d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "cdbf4e7e-c587-420c-90cb-185257dec89
2025-09-17 14:26:24,387 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:26:24,387 - core.ocr_queue - ERROR - Job ocr_F2_1758108377_b0aa73b6 failed on attempt 3: OCR processing returned no result
2025-09-17 14:26:24,387 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108377_b0aa73b6)
2025-09-17 14:26:24,388 - core.ocr_queue - ERROR - Job ocr_F2_1758108377_b0aa73b6 permanently failed: OCR processing returned no result
2025-09-17 14:26:27,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:37 MSK)" (scheduled at 2025-09-17 14:26:27.834735+03:00)
2025-09-17 14:26:27,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:27,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:37 MSK)" executed successfully
2025-09-17 14:26:37,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:47 MSK)" (scheduled at 2025-09-17 14:26:37.834735+03:00)
2025-09-17 14:26:37,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:37,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:47 MSK)" executed successfully
2025-09-17 14:26:47,845 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:27:17 MSK)" (scheduled at 2025-09-17 14:26:47.831733+03:00)
2025-09-17 14:26:47,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:27:32 MSK)" (scheduled at 2025-09-17 14:26:47.833733+03:00)
2025-09-17 14:26:47,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:57 MSK)" (scheduled at 2025-09-17 14:26:47.834735+03:00)
2025-09-17 14:26:47,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:27:17 MSK)" executed successfully
2025-09-17 14:26:47,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:47,848 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:27:32 MSK)" executed successfully
2025-09-17 14:26:47,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:26:57 MSK)" executed successfully
2025-09-17 14:26:57,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:07 MSK)" (scheduled at 2025-09-17 14:26:57.834735+03:00)
2025-09-17 14:26:57,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:26:57,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:07 MSK)" executed successfully
2025-09-17 14:27:07,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:17 MSK)" (scheduled at 2025-09-17 14:27:07.834735+03:00)
2025-09-17 14:27:07,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:07,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:17 MSK)" executed successfully
2025-09-17 14:27:17,839 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:27:47 MSK)" (scheduled at 2025-09-17 14:27:17.831733+03:00)
2025-09-17 14:27:17,839 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:28:17 MSK)" (scheduled at 2025-09-17 14:27:17.832734+03:00)
2025-09-17 14:27:17,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:27 MSK)" (scheduled at 2025-09-17 14:27:17.834735+03:00)
2025-09-17 14:27:17,840 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:27:47 MSK)" executed successfully
2025-09-17 14:27:17,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:17,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:27 MSK)" executed successfully
2025-09-17 14:27:17,841 - core.image_processor - INFO - Processing 2 screenshots for F2
2025-09-17 14:27:17,908 - core.image_processor - INFO - Successfully merged 2 images into merged_20250917_142717_892_5b4062d8.jpg (285x800) in 0.066s
2025-09-17 14:27:17,909 - core.image_processor - WARNING - Failed to create backup for data\temp\screenshots\F2\F2_20250917_133631_974_1b34df92.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png: [Errno 22] Invalid argument: 'data\\temp\\screenshots\\F2\\F2_20250917_133631_974_1b34df92.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png'
2025-09-17 14:27:17,912 - core.image_processor - INFO - Cleaned up source files: 2 successful, 0 failed
2025-09-17 14:27:17,912 - core.database_manager - INFO - Created OCR session 43 for hotkey F2
2025-09-17 14:27:17,913 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108437_df44c906 for F2 (session 43)
2025-09-17 14:27:17,913 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108437_df44c906 (attempt 1)
2025-09-17 14:27:17,914 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:28:17 MSK)" executed successfully
2025-09-17 14:27:17,914 - core.ocr_client - INFO - Starting OCR request c537bcd1 for merged_20250917_142717_892_5b4062d8.jpg (0.0MB)
2025-09-17 14:27:17,915 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:27:18,011 - core.ocr_client - ERROR - Non-retryable error for primary-ocr c537bcd1: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:27:18,012 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:27:18,092 - core.ocr_client - ERROR - Non-retryable error for fallback-vision c537bcd1: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e740959a-7d58-464b-8aa6-27e1132ad3b
2025-09-17 14:27:18,093 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:27:18,093 - core.ocr_queue - ERROR - Job ocr_F2_1758108437_df44c906 failed on attempt 1: OCR processing returned no result
2025-09-17 14:27:18,094 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108437_df44c906 for retry in 2s
2025-09-17 14:27:20,095 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108437_df44c906 (attempt 2)
2025-09-17 14:27:20,095 - core.ocr_client - INFO - Starting OCR request 6b5cce16 for merged_20250917_142717_892_5b4062d8.jpg (0.0MB)
2025-09-17 14:27:20,096 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:27:20,173 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6b5cce16: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:27:20,174 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:27:20,251 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6b5cce16: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "fb86ab11-49dd-4e60-89c1-38bf921e6f2
2025-09-17 14:27:20,252 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:27:20,253 - core.ocr_queue - ERROR - Job ocr_F2_1758108437_df44c906 failed on attempt 2: OCR processing returned no result
2025-09-17 14:27:20,254 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108437_df44c906 for retry in 4s
2025-09-17 14:27:24,255 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108437_df44c906 (attempt 3)
2025-09-17 14:27:24,255 - core.ocr_client - INFO - Starting OCR request b8fdf18f for merged_20250917_142717_892_5b4062d8.jpg (0.0MB)
2025-09-17 14:27:24,256 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:27:24,332 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b8fdf18f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:27:24,333 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:27:24,423 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b8fdf18f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "4603ebbe-f2d6-486f-8a7a-dec40ec65b0
2025-09-17 14:27:24,423 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:27:24,424 - core.ocr_queue - ERROR - Job ocr_F2_1758108437_df44c906 failed on attempt 3: OCR processing returned no result
2025-09-17 14:27:24,424 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108437_df44c906)
2025-09-17 14:27:24,424 - core.ocr_queue - ERROR - Job ocr_F2_1758108437_df44c906 permanently failed: OCR processing returned no result
2025-09-17 14:27:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:37 MSK)" (scheduled at 2025-09-17 14:27:27.834735+03:00)
2025-09-17 14:27:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:37 MSK)" executed successfully
2025-09-17 14:27:32,840 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:28:17 MSK)" (scheduled at 2025-09-17 14:27:32.833733+03:00)
2025-09-17 14:27:32,841 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:28:17 MSK)" executed successfully
2025-09-17 14:27:37,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:47 MSK)" (scheduled at 2025-09-17 14:27:37.834735+03:00)
2025-09-17 14:27:37,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:37,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:47 MSK)" executed successfully
2025-09-17 14:27:47,832 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:28:17 MSK)" (scheduled at 2025-09-17 14:27:47.831733+03:00)
2025-09-17 14:27:47,834 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:28:17 MSK)" executed successfully
2025-09-17 14:27:47,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:57 MSK)" (scheduled at 2025-09-17 14:27:47.834735+03:00)
2025-09-17 14:27:47,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:47,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:27:57 MSK)" executed successfully
2025-09-17 14:27:57,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:07 MSK)" (scheduled at 2025-09-17 14:27:57.834735+03:00)
2025-09-17 14:27:57,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:27:57,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:07 MSK)" executed successfully
2025-09-17 14:28:07,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:17 MSK)" (scheduled at 2025-09-17 14:28:07.834735+03:00)
2025-09-17 14:28:07,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:07,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:17 MSK)" executed successfully
2025-09-17 14:28:17,842 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:28:47 MSK)" (scheduled at 2025-09-17 14:28:17.831733+03:00)
2025-09-17 14:28:17,842 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:29:17 MSK)" (scheduled at 2025-09-17 14:28:17.832734+03:00)
2025-09-17 14:28:17,842 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:29:02 MSK)" (scheduled at 2025-09-17 14:28:17.833733+03:00)
2025-09-17 14:28:17,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:27 MSK)" (scheduled at 2025-09-17 14:28:17.834735+03:00)
2025-09-17 14:28:17,844 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:28:47 MSK)" executed successfully
2025-09-17 14:28:17,844 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:28:17,844 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:29:02 MSK)" executed successfully
2025-09-17 14:28:17,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:17,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:27 MSK)" executed successfully
2025-09-17 14:28:17,859 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_142817_853_adcb41b7.jpg (285x400) in 0.015s
2025-09-17 14:28:17,861 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:28:17,862 - core.database_manager - INFO - Created OCR session 44 for hotkey F2
2025-09-17 14:28:17,862 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108497_2256bb5c for F2 (session 44)
2025-09-17 14:28:17,862 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108497_2256bb5c (attempt 1)
2025-09-17 14:28:17,863 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:29:17 MSK)" executed successfully
2025-09-17 14:28:17,863 - core.ocr_client - INFO - Starting OCR request c828e304 for merged_20250917_142817_853_adcb41b7.jpg (0.0MB)
2025-09-17 14:28:17,864 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:28:17,950 - core.ocr_client - ERROR - Non-retryable error for primary-ocr c828e304: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:28:17,952 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:28:18,032 - core.ocr_client - ERROR - Non-retryable error for fallback-vision c828e304: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d04d7c24-56fd-4091-8339-d3864f6084b
2025-09-17 14:28:18,033 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:28:18,034 - core.ocr_queue - ERROR - Job ocr_F2_1758108497_2256bb5c failed on attempt 1: OCR processing returned no result
2025-09-17 14:28:18,034 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108497_2256bb5c for retry in 2s
2025-09-17 14:28:20,035 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108497_2256bb5c (attempt 2)
2025-09-17 14:28:20,036 - core.ocr_client - INFO - Starting OCR request 5fefff50 for merged_20250917_142817_853_adcb41b7.jpg (0.0MB)
2025-09-17 14:28:20,036 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:28:20,113 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5fefff50: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:28:20,114 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:28:20,206 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5fefff50: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "15e60bcc-0769-4070-a511-c7949511fc3
2025-09-17 14:28:20,207 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:28:20,207 - core.ocr_queue - ERROR - Job ocr_F2_1758108497_2256bb5c failed on attempt 2: OCR processing returned no result
2025-09-17 14:28:20,208 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108497_2256bb5c for retry in 4s
2025-09-17 14:28:24,209 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108497_2256bb5c (attempt 3)
2025-09-17 14:28:24,210 - core.ocr_client - INFO - Starting OCR request be3dc52e for merged_20250917_142817_853_adcb41b7.jpg (0.0MB)
2025-09-17 14:28:24,210 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:28:24,285 - core.ocr_client - ERROR - Non-retryable error for primary-ocr be3dc52e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:28:24,286 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:28:24,360 - core.ocr_client - ERROR - Non-retryable error for fallback-vision be3dc52e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e321be2e-a9b2-4a40-ac56-d2b6d73d1a1
2025-09-17 14:28:24,361 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:28:24,361 - core.ocr_queue - ERROR - Job ocr_F2_1758108497_2256bb5c failed on attempt 3: OCR processing returned no result
2025-09-17 14:28:24,361 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108497_2256bb5c)
2025-09-17 14:28:24,362 - core.ocr_queue - ERROR - Job ocr_F2_1758108497_2256bb5c permanently failed: OCR processing returned no result
2025-09-17 14:28:27,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:37 MSK)" (scheduled at 2025-09-17 14:28:27.834735+03:00)
2025-09-17 14:28:27,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:27,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:37 MSK)" executed successfully
2025-09-17 14:28:37,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:47 MSK)" (scheduled at 2025-09-17 14:28:37.834735+03:00)
2025-09-17 14:28:37,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:37,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:47 MSK)" executed successfully
2025-09-17 14:28:47,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:29:17 MSK)" (scheduled at 2025-09-17 14:28:47.831733+03:00)
2025-09-17 14:28:47,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:57 MSK)" (scheduled at 2025-09-17 14:28:47.834735+03:00)
2025-09-17 14:28:47,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:47,836 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:29:17 MSK)" executed successfully
2025-09-17 14:28:47,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:28:57 MSK)" executed successfully
2025-09-17 14:28:57,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:07 MSK)" (scheduled at 2025-09-17 14:28:57.834735+03:00)
2025-09-17 14:28:57,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:28:57,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:07 MSK)" executed successfully
2025-09-17 14:29:02,845 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:29:47 MSK)" (scheduled at 2025-09-17 14:29:02.833733+03:00)
2025-09-17 14:29:02,846 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:29:47 MSK)" executed successfully
2025-09-17 14:29:07,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:17 MSK)" (scheduled at 2025-09-17 14:29:07.834735+03:00)
2025-09-17 14:29:07,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:07,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:17 MSK)" executed successfully
2025-09-17 14:29:17,844 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:29:47 MSK)" (scheduled at 2025-09-17 14:29:17.831733+03:00)
2025-09-17 14:29:17,844 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:30:17 MSK)" (scheduled at 2025-09-17 14:29:17.832734+03:00)
2025-09-17 14:29:17,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:27 MSK)" (scheduled at 2025-09-17 14:29:17.834735+03:00)
2025-09-17 14:29:17,846 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:29:47 MSK)" executed successfully
2025-09-17 14:29:17,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:17,847 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:29:17,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:27 MSK)" executed successfully
2025-09-17 14:29:17,861 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_142917_856_5f490c7d.jpg (285x400) in 0.014s
2025-09-17 14:29:17,864 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:29:17,864 - core.database_manager - INFO - Created OCR session 45 for hotkey F2
2025-09-17 14:29:17,865 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108557_16034f58 for F2 (session 45)
2025-09-17 14:29:17,865 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108557_16034f58 (attempt 1)
2025-09-17 14:29:17,865 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:30:17 MSK)" executed successfully
2025-09-17 14:29:17,865 - core.ocr_client - INFO - Starting OCR request 627bc32c for merged_20250917_142917_856_5f490c7d.jpg (0.0MB)
2025-09-17 14:29:17,866 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:29:17,947 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 627bc32c: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:29:17,948 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:29:18,024 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 627bc32c: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "bd5148b1-7156-4026-8e53-f5fdf310006
2025-09-17 14:29:18,025 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:29:18,025 - core.ocr_queue - ERROR - Job ocr_F2_1758108557_16034f58 failed on attempt 1: OCR processing returned no result
2025-09-17 14:29:18,026 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108557_16034f58 for retry in 2s
2025-09-17 14:29:20,027 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108557_16034f58 (attempt 2)
2025-09-17 14:29:20,028 - core.ocr_client - INFO - Starting OCR request 6fd1ebc1 for merged_20250917_142917_856_5f490c7d.jpg (0.0MB)
2025-09-17 14:29:20,028 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:29:20,103 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6fd1ebc1: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:29:20,104 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:29:20,177 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6fd1ebc1: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "887afecd-b35d-485d-bc6d-036cf5ad21f
2025-09-17 14:29:20,178 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:29:20,178 - core.ocr_queue - ERROR - Job ocr_F2_1758108557_16034f58 failed on attempt 2: OCR processing returned no result
2025-09-17 14:29:20,178 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108557_16034f58 for retry in 4s
2025-09-17 14:29:24,180 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108557_16034f58 (attempt 3)
2025-09-17 14:29:24,180 - core.ocr_client - INFO - Starting OCR request b1d7f6a1 for merged_20250917_142917_856_5f490c7d.jpg (0.0MB)
2025-09-17 14:29:24,181 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:29:24,255 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b1d7f6a1: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:29:24,256 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:29:24,351 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b1d7f6a1: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "45fb7ec8-c425-44e5-bc11-78b6e803f69
2025-09-17 14:29:24,351 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:29:24,352 - core.ocr_queue - ERROR - Job ocr_F2_1758108557_16034f58 failed on attempt 3: OCR processing returned no result
2025-09-17 14:29:24,352 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108557_16034f58)
2025-09-17 14:29:24,353 - core.ocr_queue - ERROR - Job ocr_F2_1758108557_16034f58 permanently failed: OCR processing returned no result
2025-09-17 14:29:27,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:37 MSK)" (scheduled at 2025-09-17 14:29:27.834735+03:00)
2025-09-17 14:29:27,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:27,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:37 MSK)" executed successfully
2025-09-17 14:29:37,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:47 MSK)" (scheduled at 2025-09-17 14:29:37.834735+03:00)
2025-09-17 14:29:37,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:37,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:47 MSK)" executed successfully
2025-09-17 14:29:47,835 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:30:17 MSK)" (scheduled at 2025-09-17 14:29:47.831733+03:00)
2025-09-17 14:29:47,835 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:30:32 MSK)" (scheduled at 2025-09-17 14:29:47.833733+03:00)
2025-09-17 14:29:47,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:57 MSK)" (scheduled at 2025-09-17 14:29:47.834735+03:00)
2025-09-17 14:29:47,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:30:17 MSK)" executed successfully
2025-09-17 14:29:47,837 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:30:32 MSK)" executed successfully
2025-09-17 14:29:47,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:47,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:29:57 MSK)" executed successfully
2025-09-17 14:29:57,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:07 MSK)" (scheduled at 2025-09-17 14:29:57.834735+03:00)
2025-09-17 14:29:57,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:29:57,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:07 MSK)" executed successfully
2025-09-17 14:30:00,616 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:30:00,616 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:30:07,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:17 MSK)" (scheduled at 2025-09-17 14:30:07.834735+03:00)
2025-09-17 14:30:07,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:07,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:17 MSK)" executed successfully
2025-09-17 14:30:17,836 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:30:47 MSK)" (scheduled at 2025-09-17 14:30:17.831733+03:00)
2025-09-17 14:30:17,836 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:31:17 MSK)" (scheduled at 2025-09-17 14:30:17.832734+03:00)
2025-09-17 14:30:17,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:27 MSK)" (scheduled at 2025-09-17 14:30:17.834735+03:00)
2025-09-17 14:30:17,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:30:47 MSK)" executed successfully
2025-09-17 14:30:17,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:17,838 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:30:17,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:27 MSK)" executed successfully
2025-09-17 14:30:17,853 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143017_847_ee1592d1.jpg (285x400) in 0.014s
2025-09-17 14:30:17,855 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:30:17,856 - core.database_manager - INFO - Created OCR session 46 for hotkey F2
2025-09-17 14:30:17,856 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108617_7f0733f4 for F2 (session 46)
2025-09-17 14:30:17,856 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108617_7f0733f4 (attempt 1)
2025-09-17 14:30:17,857 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:31:17 MSK)" executed successfully
2025-09-17 14:30:17,857 - core.ocr_client - INFO - Starting OCR request 465aaf2e for merged_20250917_143017_847_ee1592d1.jpg (0.0MB)
2025-09-17 14:30:17,858 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:30:17,942 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 465aaf2e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:30:17,942 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:30:18,018 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 465aaf2e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "6dc229b2-0e9b-48fd-b02d-223013bfc56
2025-09-17 14:30:18,019 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:30:18,019 - core.ocr_queue - ERROR - Job ocr_F2_1758108617_7f0733f4 failed on attempt 1: OCR processing returned no result
2025-09-17 14:30:18,020 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108617_7f0733f4 for retry in 2s
2025-09-17 14:30:20,021 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108617_7f0733f4 (attempt 2)
2025-09-17 14:30:20,021 - core.ocr_client - INFO - Starting OCR request 78338d71 for merged_20250917_143017_847_ee1592d1.jpg (0.0MB)
2025-09-17 14:30:20,022 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:30:20,096 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 78338d71: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:30:20,097 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:30:20,171 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 78338d71: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b6d3194e-26df-48e4-9f73-6e4ce8d7e29
2025-09-17 14:30:20,172 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:30:20,172 - core.ocr_queue - ERROR - Job ocr_F2_1758108617_7f0733f4 failed on attempt 2: OCR processing returned no result
2025-09-17 14:30:20,173 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108617_7f0733f4 for retry in 4s
2025-09-17 14:30:24,174 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108617_7f0733f4 (attempt 3)
2025-09-17 14:30:24,174 - core.ocr_client - INFO - Starting OCR request 08de1a72 for merged_20250917_143017_847_ee1592d1.jpg (0.0MB)
2025-09-17 14:30:24,175 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:30:24,250 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 08de1a72: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:30:24,250 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:30:24,323 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 08de1a72: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "3aeb001e-49b2-4a49-af61-5df093af723
2025-09-17 14:30:24,325 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:30:24,325 - core.ocr_queue - ERROR - Job ocr_F2_1758108617_7f0733f4 failed on attempt 3: OCR processing returned no result
2025-09-17 14:30:24,325 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108617_7f0733f4)
2025-09-17 14:30:24,326 - core.ocr_queue - ERROR - Job ocr_F2_1758108617_7f0733f4 permanently failed: OCR processing returned no result
2025-09-17 14:30:27,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:37 MSK)" (scheduled at 2025-09-17 14:30:27.834735+03:00)
2025-09-17 14:30:27,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:27,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:37 MSK)" executed successfully
2025-09-17 14:30:32,848 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:31:17 MSK)" (scheduled at 2025-09-17 14:30:32.833733+03:00)
2025-09-17 14:30:32,849 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:31:17 MSK)" executed successfully
2025-09-17 14:30:37,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:47 MSK)" (scheduled at 2025-09-17 14:30:37.834735+03:00)
2025-09-17 14:30:37,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:37,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:47 MSK)" executed successfully
2025-09-17 14:30:47,840 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:31:17 MSK)" (scheduled at 2025-09-17 14:30:47.831733+03:00)
2025-09-17 14:30:47,840 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:57 MSK)" (scheduled at 2025-09-17 14:30:47.834735+03:00)
2025-09-17 14:30:47,841 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:31:17 MSK)" executed successfully
2025-09-17 14:30:47,841 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:47,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:30:57 MSK)" executed successfully
2025-09-17 14:30:57,838 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:07 MSK)" (scheduled at 2025-09-17 14:30:57.834735+03:00)
2025-09-17 14:30:57,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:30:57,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:07 MSK)" executed successfully
2025-09-17 14:31:07,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:17 MSK)" (scheduled at 2025-09-17 14:31:07.834735+03:00)
2025-09-17 14:31:07,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:07,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:17 MSK)" executed successfully
2025-09-17 14:31:17,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:31:47 MSK)" (scheduled at 2025-09-17 14:31:17.831733+03:00)
2025-09-17 14:31:17,841 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:32:17 MSK)" (scheduled at 2025-09-17 14:31:17.832734+03:00)
2025-09-17 14:31:17,841 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:32:02 MSK)" (scheduled at 2025-09-17 14:31:17.833733+03:00)
2025-09-17 14:31:17,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:27 MSK)" (scheduled at 2025-09-17 14:31:17.834735+03:00)
2025-09-17 14:31:17,842 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:31:47 MSK)" executed successfully
2025-09-17 14:31:17,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:17,843 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:32:02 MSK)" executed successfully
2025-09-17 14:31:17,843 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:31:17,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:27 MSK)" executed successfully
2025-09-17 14:31:18,005 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143117_999_69c4c346.jpg (285x400) in 0.161s
2025-09-17 14:31:18,007 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:31:18,008 - core.database_manager - INFO - Created OCR session 47 for hotkey F2
2025-09-17 14:31:18,008 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108678_ed9ec538 for F2 (session 47)
2025-09-17 14:31:18,008 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108678_ed9ec538 (attempt 1)
2025-09-17 14:31:18,009 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:32:17 MSK)" executed successfully
2025-09-17 14:31:18,009 - core.ocr_client - INFO - Starting OCR request de0c1269 for merged_20250917_143117_999_69c4c346.jpg (0.0MB)
2025-09-17 14:31:18,010 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:31:18,091 - core.ocr_client - ERROR - Non-retryable error for primary-ocr de0c1269: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:31:18,091 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:31:18,164 - core.ocr_client - ERROR - Non-retryable error for fallback-vision de0c1269: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "42d49f55-abeb-4ae3-b131-3670380257b
2025-09-17 14:31:18,165 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:31:18,166 - core.ocr_queue - ERROR - Job ocr_F2_1758108678_ed9ec538 failed on attempt 1: OCR processing returned no result
2025-09-17 14:31:18,166 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108678_ed9ec538 for retry in 2s
2025-09-17 14:31:20,167 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108678_ed9ec538 (attempt 2)
2025-09-17 14:31:20,167 - core.ocr_client - INFO - Starting OCR request 2496d863 for merged_20250917_143117_999_69c4c346.jpg (0.0MB)
2025-09-17 14:31:20,168 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:31:20,242 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 2496d863: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:31:20,243 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:31:20,333 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 2496d863: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "688f3a10-11c0-4d0b-84af-2a1397d5d99
2025-09-17 14:31:20,333 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:31:20,334 - core.ocr_queue - ERROR - Job ocr_F2_1758108678_ed9ec538 failed on attempt 2: OCR processing returned no result
2025-09-17 14:31:20,335 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108678_ed9ec538 for retry in 4s
2025-09-17 14:31:24,336 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108678_ed9ec538 (attempt 3)
2025-09-17 14:31:24,336 - core.ocr_client - INFO - Starting OCR request 467e3b2a for merged_20250917_143117_999_69c4c346.jpg (0.0MB)
2025-09-17 14:31:24,337 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:31:24,412 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 467e3b2a: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:31:24,413 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:31:24,488 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 467e3b2a: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a5c74d77-819b-4ea4-99b0-cbbe7a7170d
2025-09-17 14:31:24,488 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:31:24,489 - core.ocr_queue - ERROR - Job ocr_F2_1758108678_ed9ec538 failed on attempt 3: OCR processing returned no result
2025-09-17 14:31:24,490 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108678_ed9ec538)
2025-09-17 14:31:24,490 - core.ocr_queue - ERROR - Job ocr_F2_1758108678_ed9ec538 permanently failed: OCR processing returned no result
2025-09-17 14:31:27,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:37 MSK)" (scheduled at 2025-09-17 14:31:27.834735+03:00)
2025-09-17 14:31:27,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:27,837 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:37 MSK)" executed successfully
2025-09-17 14:31:37,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:47 MSK)" (scheduled at 2025-09-17 14:31:37.834735+03:00)
2025-09-17 14:31:37,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:37,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:47 MSK)" executed successfully
2025-09-17 14:31:47,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:32:17 MSK)" (scheduled at 2025-09-17 14:31:47.831733+03:00)
2025-09-17 14:31:47,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:57 MSK)" (scheduled at 2025-09-17 14:31:47.834735+03:00)
2025-09-17 14:31:47,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:32:17 MSK)" executed successfully
2025-09-17 14:31:47,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:47,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:31:57 MSK)" executed successfully
2025-09-17 14:31:57,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:07 MSK)" (scheduled at 2025-09-17 14:31:57.834735+03:00)
2025-09-17 14:31:57,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:31:57,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:07 MSK)" executed successfully
2025-09-17 14:32:02,849 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:32:47 MSK)" (scheduled at 2025-09-17 14:32:02.833733+03:00)
2025-09-17 14:32:02,850 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:32:47 MSK)" executed successfully
2025-09-17 14:32:07,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:17 MSK)" (scheduled at 2025-09-17 14:32:07.834735+03:00)
2025-09-17 14:32:07,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:08,008 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:17 MSK)" executed successfully
2025-09-17 14:32:17,836 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:32:47 MSK)" (scheduled at 2025-09-17 14:32:17.831733+03:00)
2025-09-17 14:32:17,836 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:33:17 MSK)" (scheduled at 2025-09-17 14:32:17.832734+03:00)
2025-09-17 14:32:17,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:27 MSK)" (scheduled at 2025-09-17 14:32:17.834735+03:00)
2025-09-17 14:32:17,837 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:32:47 MSK)" executed successfully
2025-09-17 14:32:17,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:17,838 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:32:17,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:27 MSK)" executed successfully
2025-09-17 14:32:18,100 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143218_094_c0c5adc9.jpg (285x400) in 0.262s
2025-09-17 14:32:18,102 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:32:18,103 - core.database_manager - INFO - Created OCR session 48 for hotkey F2
2025-09-17 14:32:18,103 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108738_80e86452 for F2 (session 48)
2025-09-17 14:32:18,103 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108738_80e86452 (attempt 1)
2025-09-17 14:32:18,104 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:33:17 MSK)" executed successfully
2025-09-17 14:32:18,104 - core.ocr_client - INFO - Starting OCR request b220d98d for merged_20250917_143218_094_c0c5adc9.jpg (0.0MB)
2025-09-17 14:32:18,105 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:32:18,190 - core.ocr_client - ERROR - Non-retryable error for primary-ocr b220d98d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:32:18,191 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:32:18,277 - core.ocr_client - ERROR - Non-retryable error for fallback-vision b220d98d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "5d2f64d6-3b72-4022-bae7-b578a1d150c
2025-09-17 14:32:18,278 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:32:18,279 - core.ocr_queue - ERROR - Job ocr_F2_1758108738_80e86452 failed on attempt 1: OCR processing returned no result
2025-09-17 14:32:18,279 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108738_80e86452 for retry in 2s
2025-09-17 14:32:20,281 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108738_80e86452 (attempt 2)
2025-09-17 14:32:20,281 - core.ocr_client - INFO - Starting OCR request 5c74b123 for merged_20250917_143218_094_c0c5adc9.jpg (0.0MB)
2025-09-17 14:32:20,282 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:32:20,357 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 5c74b123: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:32:20,358 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:32:20,446 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 5c74b123: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "77264fc8-41ad-4256-b81f-e9fe8d56fd1
2025-09-17 14:32:20,447 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:32:20,447 - core.ocr_queue - ERROR - Job ocr_F2_1758108738_80e86452 failed on attempt 2: OCR processing returned no result
2025-09-17 14:32:20,448 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108738_80e86452 for retry in 4s
2025-09-17 14:32:24,449 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108738_80e86452 (attempt 3)
2025-09-17 14:32:24,449 - core.ocr_client - INFO - Starting OCR request c6ab718b for merged_20250917_143218_094_c0c5adc9.jpg (0.0MB)
2025-09-17 14:32:24,450 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:32:24,526 - core.ocr_client - ERROR - Non-retryable error for primary-ocr c6ab718b: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:32:24,526 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:32:24,600 - core.ocr_client - ERROR - Non-retryable error for fallback-vision c6ab718b: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "15e7ac58-0551-448e-bb64-5e3fb2f3daa
2025-09-17 14:32:24,601 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:32:24,601 - core.ocr_queue - ERROR - Job ocr_F2_1758108738_80e86452 failed on attempt 3: OCR processing returned no result
2025-09-17 14:32:24,601 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108738_80e86452)
2025-09-17 14:32:24,602 - core.ocr_queue - ERROR - Job ocr_F2_1758108738_80e86452 permanently failed: OCR processing returned no result
2025-09-17 14:32:27,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:37 MSK)" (scheduled at 2025-09-17 14:32:27.834735+03:00)
2025-09-17 14:32:27,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:27,852 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:37 MSK)" executed successfully
2025-09-17 14:32:37,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:47 MSK)" (scheduled at 2025-09-17 14:32:37.834735+03:00)
2025-09-17 14:32:37,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:37,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:47 MSK)" executed successfully
2025-09-17 14:32:47,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:33:17 MSK)" (scheduled at 2025-09-17 14:32:47.831733+03:00)
2025-09-17 14:32:47,841 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:33:32 MSK)" (scheduled at 2025-09-17 14:32:47.833733+03:00)
2025-09-17 14:32:47,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:57 MSK)" (scheduled at 2025-09-17 14:32:47.834735+03:00)
2025-09-17 14:32:47,842 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:33:17 MSK)" executed successfully
2025-09-17 14:32:47,842 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:33:32 MSK)" executed successfully
2025-09-17 14:32:47,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:47,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:32:57 MSK)" executed successfully
2025-09-17 14:32:57,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:07 MSK)" (scheduled at 2025-09-17 14:32:57.834735+03:00)
2025-09-17 14:32:57,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:32:57,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:07 MSK)" executed successfully
2025-09-17 14:33:07,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:17 MSK)" (scheduled at 2025-09-17 14:33:07.834735+03:00)
2025-09-17 14:33:07,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:07,848 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:17 MSK)" executed successfully
2025-09-17 14:33:17,842 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:33:47 MSK)" (scheduled at 2025-09-17 14:33:17.831733+03:00)
2025-09-17 14:33:17,842 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:34:17 MSK)" (scheduled at 2025-09-17 14:33:17.832734+03:00)
2025-09-17 14:33:17,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:27 MSK)" (scheduled at 2025-09-17 14:33:17.834735+03:00)
2025-09-17 14:33:17,843 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:33:47 MSK)" executed successfully
2025-09-17 14:33:17,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:17,844 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:33:17,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:27 MSK)" executed successfully
2025-09-17 14:33:17,860 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143317_853_81cf95a0.jpg (285x400) in 0.015s
2025-09-17 14:33:17,861 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:33:17,862 - core.database_manager - INFO - Created OCR session 49 for hotkey F2
2025-09-17 14:33:17,863 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108797_bf414aba for F2 (session 49)
2025-09-17 14:33:17,863 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108797_bf414aba (attempt 1)
2025-09-17 14:33:17,863 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:34:17 MSK)" executed successfully
2025-09-17 14:33:17,863 - core.ocr_client - INFO - Starting OCR request 98ebe1f6 for merged_20250917_143317_853_81cf95a0.jpg (0.0MB)
2025-09-17 14:33:17,864 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:33:17,946 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 98ebe1f6: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:33:17,947 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:33:18,020 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 98ebe1f6: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "64676573-d431-44cb-b1ad-ec4c33ea0d2
2025-09-17 14:33:18,021 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:33:18,022 - core.ocr_queue - ERROR - Job ocr_F2_1758108797_bf414aba failed on attempt 1: OCR processing returned no result
2025-09-17 14:33:18,022 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108797_bf414aba for retry in 2s
2025-09-17 14:33:20,023 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108797_bf414aba (attempt 2)
2025-09-17 14:33:20,023 - core.ocr_client - INFO - Starting OCR request af23c789 for merged_20250917_143317_853_81cf95a0.jpg (0.0MB)
2025-09-17 14:33:20,024 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:33:20,107 - core.ocr_client - ERROR - Non-retryable error for primary-ocr af23c789: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:33:20,108 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:33:20,198 - core.ocr_client - ERROR - Non-retryable error for fallback-vision af23c789: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ad0a1c14-da78-4b6f-a52e-d7c7123f9f4
2025-09-17 14:33:20,198 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:33:20,198 - core.ocr_queue - ERROR - Job ocr_F2_1758108797_bf414aba failed on attempt 2: OCR processing returned no result
2025-09-17 14:33:20,199 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108797_bf414aba for retry in 4s
2025-09-17 14:33:24,200 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108797_bf414aba (attempt 3)
2025-09-17 14:33:24,201 - core.ocr_client - INFO - Starting OCR request 378cd492 for merged_20250917_143317_853_81cf95a0.jpg (0.0MB)
2025-09-17 14:33:24,201 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:33:24,276 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 378cd492: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:33:24,276 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:33:24,354 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 378cd492: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b0b43fd6-449c-4973-92cf-ac8f61cfb8e
2025-09-17 14:33:24,354 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:33:24,355 - core.ocr_queue - ERROR - Job ocr_F2_1758108797_bf414aba failed on attempt 3: OCR processing returned no result
2025-09-17 14:33:24,355 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108797_bf414aba)
2025-09-17 14:33:24,356 - core.ocr_queue - ERROR - Job ocr_F2_1758108797_bf414aba permanently failed: OCR processing returned no result
2025-09-17 14:33:27,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:37 MSK)" (scheduled at 2025-09-17 14:33:27.834735+03:00)
2025-09-17 14:33:27,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:37 MSK)" executed successfully
2025-09-17 14:33:32,835 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:34:17 MSK)" (scheduled at 2025-09-17 14:33:32.833733+03:00)
2025-09-17 14:33:32,836 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:34:17 MSK)" executed successfully
2025-09-17 14:33:37,846 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:47 MSK)" (scheduled at 2025-09-17 14:33:37.834735+03:00)
2025-09-17 14:33:37,847 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:37,847 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:47 MSK)" executed successfully
2025-09-17 14:33:47,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:34:17 MSK)" (scheduled at 2025-09-17 14:33:47.831733+03:00)
2025-09-17 14:33:47,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:57 MSK)" (scheduled at 2025-09-17 14:33:47.834735+03:00)
2025-09-17 14:33:47,842 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:34:17 MSK)" executed successfully
2025-09-17 14:33:47,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:47,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:33:57 MSK)" executed successfully
2025-09-17 14:33:57,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:07 MSK)" (scheduled at 2025-09-17 14:33:57.834735+03:00)
2025-09-17 14:33:57,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:33:57,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:07 MSK)" executed successfully
2025-09-17 14:34:07,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:17 MSK)" (scheduled at 2025-09-17 14:34:07.834735+03:00)
2025-09-17 14:34:07,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:07,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:17 MSK)" executed successfully
2025-09-17 14:34:17,842 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:34:47 MSK)" (scheduled at 2025-09-17 14:34:17.831733+03:00)
2025-09-17 14:34:17,842 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:35:17 MSK)" (scheduled at 2025-09-17 14:34:17.832734+03:00)
2025-09-17 14:34:17,842 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:35:02 MSK)" (scheduled at 2025-09-17 14:34:17.833733+03:00)
2025-09-17 14:34:17,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:27 MSK)" (scheduled at 2025-09-17 14:34:17.834735+03:00)
2025-09-17 14:34:17,844 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:34:47 MSK)" executed successfully
2025-09-17 14:34:17,844 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:34:17,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:17,844 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:35:02 MSK)" executed successfully
2025-09-17 14:34:17,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:27 MSK)" executed successfully
2025-09-17 14:34:17,860 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143417_854_74aaaf87.jpg (285x400) in 0.015s
2025-09-17 14:34:17,867 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:34:17,871 - core.database_manager - INFO - Created OCR session 50 for hotkey F2
2025-09-17 14:34:17,875 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108857_d7ea8e0f for F2 (session 50)
2025-09-17 14:34:17,875 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108857_d7ea8e0f (attempt 1)
2025-09-17 14:34:17,876 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:35:17 MSK)" executed successfully
2025-09-17 14:34:17,877 - core.ocr_client - INFO - Starting OCR request d298da29 for merged_20250917_143417_854_74aaaf87.jpg (0.0MB)
2025-09-17 14:34:17,878 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:34:17,964 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d298da29: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:34:17,964 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:34:18,055 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d298da29: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "91d8147b-dd28-44fc-aa2d-f23beaae0c9
2025-09-17 14:34:18,056 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:34:18,056 - core.ocr_queue - ERROR - Job ocr_F2_1758108857_d7ea8e0f failed on attempt 1: OCR processing returned no result
2025-09-17 14:34:18,057 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108857_d7ea8e0f for retry in 2s
2025-09-17 14:34:20,059 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108857_d7ea8e0f (attempt 2)
2025-09-17 14:34:20,059 - core.ocr_client - INFO - Starting OCR request f6939ea3 for merged_20250917_143417_854_74aaaf87.jpg (0.0MB)
2025-09-17 14:34:20,060 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:34:20,137 - core.ocr_client - ERROR - Non-retryable error for primary-ocr f6939ea3: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:34:20,138 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:34:20,214 - core.ocr_client - ERROR - Non-retryable error for fallback-vision f6939ea3: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "b1cd35f3-d1a3-4880-a57f-74d6ee769a0
2025-09-17 14:34:20,215 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:34:20,215 - core.ocr_queue - ERROR - Job ocr_F2_1758108857_d7ea8e0f failed on attempt 2: OCR processing returned no result
2025-09-17 14:34:20,215 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108857_d7ea8e0f for retry in 4s
2025-09-17 14:34:24,216 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108857_d7ea8e0f (attempt 3)
2025-09-17 14:34:24,216 - core.ocr_client - INFO - Starting OCR request af622b61 for merged_20250917_143417_854_74aaaf87.jpg (0.0MB)
2025-09-17 14:34:24,217 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:34:24,292 - core.ocr_client - ERROR - Non-retryable error for primary-ocr af622b61: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:34:24,293 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:34:24,382 - core.ocr_client - ERROR - Non-retryable error for fallback-vision af622b61: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "a39343a7-36f3-440a-98d8-89de1bc4353
2025-09-17 14:34:24,383 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:34:24,383 - core.ocr_queue - ERROR - Job ocr_F2_1758108857_d7ea8e0f failed on attempt 3: OCR processing returned no result
2025-09-17 14:34:24,383 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108857_d7ea8e0f)
2025-09-17 14:34:24,384 - core.ocr_queue - ERROR - Job ocr_F2_1758108857_d7ea8e0f permanently failed: OCR processing returned no result
2025-09-17 14:34:27,845 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:37 MSK)" (scheduled at 2025-09-17 14:34:27.834735+03:00)
2025-09-17 14:34:27,846 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:27,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:37 MSK)" executed successfully
2025-09-17 14:34:37,836 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:47 MSK)" (scheduled at 2025-09-17 14:34:37.834735+03:00)
2025-09-17 14:34:37,837 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:37,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:47 MSK)" executed successfully
2025-09-17 14:34:47,839 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:35:17 MSK)" (scheduled at 2025-09-17 14:34:47.831733+03:00)
2025-09-17 14:34:47,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:57 MSK)" (scheduled at 2025-09-17 14:34:47.834735+03:00)
2025-09-17 14:34:47,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:47,840 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:35:17 MSK)" executed successfully
2025-09-17 14:34:47,841 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:34:57 MSK)" executed successfully
2025-09-17 14:34:57,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:07 MSK)" (scheduled at 2025-09-17 14:34:57.834735+03:00)
2025-09-17 14:34:57,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:34:57,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:07 MSK)" executed successfully
2025-09-17 14:35:00,764 - main - WARNING - Monitoring engine health issues: ['No items in monitoring queue']
2025-09-17 14:35:00,764 - main - WARNING - Periodic health check failed: 'int' object has no attribute 'name'
2025-09-17 14:35:02,835 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:35:47 MSK)" (scheduled at 2025-09-17 14:35:02.833733+03:00)
2025-09-17 14:35:02,836 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:35:47 MSK)" executed successfully
2025-09-17 14:35:07,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:17 MSK)" (scheduled at 2025-09-17 14:35:07.834735+03:00)
2025-09-17 14:35:07,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:07,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:17 MSK)" executed successfully
2025-09-17 14:35:17,843 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:35:47 MSK)" (scheduled at 2025-09-17 14:35:17.831733+03:00)
2025-09-17 14:35:17,843 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:36:17 MSK)" (scheduled at 2025-09-17 14:35:17.832734+03:00)
2025-09-17 14:35:17,843 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:27 MSK)" (scheduled at 2025-09-17 14:35:17.834735+03:00)
2025-09-17 14:35:17,844 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:35:47 MSK)" executed successfully
2025-09-17 14:35:17,845 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:35:17,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:17,846 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:27 MSK)" executed successfully
2025-09-17 14:35:17,860 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143517_854_46495974.jpg (285x400) in 0.015s
2025-09-17 14:35:17,862 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:35:17,862 - core.database_manager - INFO - Created OCR session 51 for hotkey F2
2025-09-17 14:35:17,863 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108917_26a2aa53 for F2 (session 51)
2025-09-17 14:35:17,863 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108917_26a2aa53 (attempt 1)
2025-09-17 14:35:17,863 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:36:17 MSK)" executed successfully
2025-09-17 14:35:17,863 - core.ocr_client - INFO - Starting OCR request 76054d0f for merged_20250917_143517_854_46495974.jpg (0.0MB)
2025-09-17 14:35:17,864 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:35:17,947 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 76054d0f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:35:17,948 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:35:18,041 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 76054d0f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d853c6a7-816f-4c4d-a34b-376abe3ba70
2025-09-17 14:35:18,041 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:35:18,042 - core.ocr_queue - ERROR - Job ocr_F2_1758108917_26a2aa53 failed on attempt 1: OCR processing returned no result
2025-09-17 14:35:18,042 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108917_26a2aa53 for retry in 2s
2025-09-17 14:35:20,044 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108917_26a2aa53 (attempt 2)
2025-09-17 14:35:20,044 - core.ocr_client - INFO - Starting OCR request 0528ec81 for merged_20250917_143517_854_46495974.jpg (0.0MB)
2025-09-17 14:35:20,045 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:35:20,120 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 0528ec81: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:35:20,121 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:35:20,212 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 0528ec81: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "d7ab8670-3137-4273-bc96-2822660df09
2025-09-17 14:35:20,213 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:35:20,213 - core.ocr_queue - ERROR - Job ocr_F2_1758108917_26a2aa53 failed on attempt 2: OCR processing returned no result
2025-09-17 14:35:20,214 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108917_26a2aa53 for retry in 4s
2025-09-17 14:35:24,215 - core.ocr_queue - INFO - Worker OCRWorker-2 processing job ocr_F2_1758108917_26a2aa53 (attempt 3)
2025-09-17 14:35:24,215 - core.ocr_client - INFO - Starting OCR request a71570a7 for merged_20250917_143517_854_46495974.jpg (0.0MB)
2025-09-17 14:35:24,216 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:35:24,291 - core.ocr_client - ERROR - Non-retryable error for primary-ocr a71570a7: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:35:24,292 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:35:24,365 - core.ocr_client - ERROR - Non-retryable error for fallback-vision a71570a7: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "ae6ba16b-5c37-4c65-aa16-156fb3963b1
2025-09-17 14:35:24,366 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:35:24,367 - core.ocr_queue - ERROR - Job ocr_F2_1758108917_26a2aa53 failed on attempt 3: OCR processing returned no result
2025-09-17 14:35:24,367 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108917_26a2aa53)
2025-09-17 14:35:24,367 - core.ocr_queue - ERROR - Job ocr_F2_1758108917_26a2aa53 permanently failed: OCR processing returned no result
2025-09-17 14:35:27,848 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:37 MSK)" (scheduled at 2025-09-17 14:35:27.834735+03:00)
2025-09-17 14:35:27,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:27,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:37 MSK)" executed successfully
2025-09-17 14:35:37,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:47 MSK)" (scheduled at 2025-09-17 14:35:37.834735+03:00)
2025-09-17 14:35:37,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:37,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:47 MSK)" executed successfully
2025-09-17 14:35:47,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:36:17 MSK)" (scheduled at 2025-09-17 14:35:47.831733+03:00)
2025-09-17 14:35:47,841 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:36:32 MSK)" (scheduled at 2025-09-17 14:35:47.833733+03:00)
2025-09-17 14:35:47,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:57 MSK)" (scheduled at 2025-09-17 14:35:47.834735+03:00)
2025-09-17 14:35:47,842 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:36:17 MSK)" executed successfully
2025-09-17 14:35:47,843 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:36:32 MSK)" executed successfully
2025-09-17 14:35:47,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:47,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:35:57 MSK)" executed successfully
2025-09-17 14:35:57,844 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:07 MSK)" (scheduled at 2025-09-17 14:35:57.834735+03:00)
2025-09-17 14:35:57,845 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:35:57,845 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:07 MSK)" executed successfully
2025-09-17 14:36:07,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:17 MSK)" (scheduled at 2025-09-17 14:36:07.834735+03:00)
2025-09-17 14:36:07,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:07,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:17 MSK)" executed successfully
2025-09-17 14:36:17,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:36:47 MSK)" (scheduled at 2025-09-17 14:36:17.831733+03:00)
2025-09-17 14:36:17,847 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:37:17 MSK)" (scheduled at 2025-09-17 14:36:17.832734+03:00)
2025-09-17 14:36:17,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:27 MSK)" (scheduled at 2025-09-17 14:36:17.834735+03:00)
2025-09-17 14:36:17,849 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:36:47 MSK)" executed successfully
2025-09-17 14:36:17,849 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:17,849 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:36:17,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:27 MSK)" executed successfully
2025-09-17 14:36:17,864 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143617_858_702c0b29.jpg (285x400) in 0.014s
2025-09-17 14:36:17,866 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:36:17,871 - core.database_manager - INFO - Created OCR session 52 for hotkey F2
2025-09-17 14:36:17,872 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758108977_734e2e0d for F2 (session 52)
2025-09-17 14:36:17,872 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108977_734e2e0d (attempt 1)
2025-09-17 14:36:17,872 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:37:17 MSK)" executed successfully
2025-09-17 14:36:17,873 - core.ocr_client - INFO - Starting OCR request 3188ec18 for merged_20250917_143617_858_702c0b29.jpg (0.0MB)
2025-09-17 14:36:17,873 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:36:17,957 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 3188ec18: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:36:17,957 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:36:18,045 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 3188ec18: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "f52fce9d-e710-4156-a0dd-d7806cd2c10
2025-09-17 14:36:18,047 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:36:18,047 - core.ocr_queue - ERROR - Job ocr_F2_1758108977_734e2e0d failed on attempt 1: OCR processing returned no result
2025-09-17 14:36:18,047 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108977_734e2e0d for retry in 2s
2025-09-17 14:36:20,048 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108977_734e2e0d (attempt 2)
2025-09-17 14:36:20,048 - core.ocr_client - INFO - Starting OCR request ef41f113 for merged_20250917_143617_858_702c0b29.jpg (0.0MB)
2025-09-17 14:36:20,049 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:36:20,124 - core.ocr_client - ERROR - Non-retryable error for primary-ocr ef41f113: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:36:20,125 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:36:20,202 - core.ocr_client - ERROR - Non-retryable error for fallback-vision ef41f113: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e0fbfdd7-025e-4af0-b7f5-f8432b8b02a
2025-09-17 14:36:20,202 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:36:20,202 - core.ocr_queue - ERROR - Job ocr_F2_1758108977_734e2e0d failed on attempt 2: OCR processing returned no result
2025-09-17 14:36:20,203 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758108977_734e2e0d for retry in 4s
2025-09-17 14:36:24,204 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758108977_734e2e0d (attempt 3)
2025-09-17 14:36:24,204 - core.ocr_client - INFO - Starting OCR request d105893f for merged_20250917_143617_858_702c0b29.jpg (0.0MB)
2025-09-17 14:36:24,205 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:36:24,281 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d105893f: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:36:24,282 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:36:24,359 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d105893f: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "3c40a7a4-34ef-41e7-913d-cef8aed9302
2025-09-17 14:36:24,359 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:36:24,359 - core.ocr_queue - ERROR - Job ocr_F2_1758108977_734e2e0d failed on attempt 3: OCR processing returned no result
2025-09-17 14:36:24,360 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758108977_734e2e0d)
2025-09-17 14:36:24,360 - core.ocr_queue - ERROR - Job ocr_F2_1758108977_734e2e0d permanently failed: OCR processing returned no result
2025-09-17 14:36:27,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:37 MSK)" (scheduled at 2025-09-17 14:36:27.834735+03:00)
2025-09-17 14:36:27,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:27,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:37 MSK)" executed successfully
2025-09-17 14:36:32,838 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:37:17 MSK)" (scheduled at 2025-09-17 14:36:32.833733+03:00)
2025-09-17 14:36:32,839 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:37:17 MSK)" executed successfully
2025-09-17 14:36:37,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:47 MSK)" (scheduled at 2025-09-17 14:36:37.834735+03:00)
2025-09-17 14:36:37,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:37,968 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:47 MSK)" executed successfully
2025-09-17 14:36:47,834 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:37:17 MSK)" (scheduled at 2025-09-17 14:36:47.831733+03:00)
2025-09-17 14:36:47,835 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:37:17 MSK)" executed successfully
2025-09-17 14:36:47,850 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:57 MSK)" (scheduled at 2025-09-17 14:36:47.834735+03:00)
2025-09-17 14:36:47,851 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:47,851 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:36:57 MSK)" executed successfully
2025-09-17 14:36:57,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:07 MSK)" (scheduled at 2025-09-17 14:36:57.834735+03:00)
2025-09-17 14:36:57,838 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:36:57,838 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:07 MSK)" executed successfully
2025-09-17 14:37:07,842 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:17 MSK)" (scheduled at 2025-09-17 14:37:07.834735+03:00)
2025-09-17 14:37:07,843 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:07,843 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:17 MSK)" executed successfully
2025-09-17 14:37:17,841 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:37:47 MSK)" (scheduled at 2025-09-17 14:37:17.831733+03:00)
2025-09-17 14:37:17,841 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:38:17 MSK)" (scheduled at 2025-09-17 14:37:17.832734+03:00)
2025-09-17 14:37:17,841 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:38:02 MSK)" (scheduled at 2025-09-17 14:37:17.833733+03:00)
2025-09-17 14:37:17,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:27 MSK)" (scheduled at 2025-09-17 14:37:17.834735+03:00)
2025-09-17 14:37:17,843 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:37:47 MSK)" executed successfully
2025-09-17 14:37:17,843 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:37:17,844 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:38:02 MSK)" executed successfully
2025-09-17 14:37:17,844 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:17,844 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:27 MSK)" executed successfully
2025-09-17 14:37:17,859 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143717_852_a3d2e62e.jpg (285x400) in 0.015s
2025-09-17 14:37:17,860 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:37:17,861 - core.database_manager - INFO - Created OCR session 53 for hotkey F2
2025-09-17 14:37:17,861 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758109037_5402f954 for F2 (session 53)
2025-09-17 14:37:17,861 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109037_5402f954 (attempt 1)
2025-09-17 14:37:17,862 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:38:17 MSK)" executed successfully
2025-09-17 14:37:17,862 - core.ocr_client - INFO - Starting OCR request 947dbe13 for merged_20250917_143717_852_a3d2e62e.jpg (0.0MB)
2025-09-17 14:37:17,862 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:37:17,981 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 947dbe13: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:37:17,982 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:37:18,060 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 947dbe13: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "af0470f3-522e-4d14-832d-767a9e633b1
2025-09-17 14:37:18,061 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:37:18,062 - core.ocr_queue - ERROR - Job ocr_F2_1758109037_5402f954 failed on attempt 1: OCR processing returned no result
2025-09-17 14:37:18,062 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758109037_5402f954 for retry in 2s
2025-09-17 14:37:20,064 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109037_5402f954 (attempt 2)
2025-09-17 14:37:20,064 - core.ocr_client - INFO - Starting OCR request a503be9e for merged_20250917_143717_852_a3d2e62e.jpg (0.0MB)
2025-09-17 14:37:20,065 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:37:20,139 - core.ocr_client - ERROR - Non-retryable error for primary-ocr a503be9e: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:37:20,140 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:37:20,217 - core.ocr_client - ERROR - Non-retryable error for fallback-vision a503be9e: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "edf393db-5703-424e-bffe-dbaa7dcf604
2025-09-17 14:37:20,217 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:37:20,218 - core.ocr_queue - ERROR - Job ocr_F2_1758109037_5402f954 failed on attempt 2: OCR processing returned no result
2025-09-17 14:37:20,219 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758109037_5402f954 for retry in 4s
2025-09-17 14:37:24,220 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109037_5402f954 (attempt 3)
2025-09-17 14:37:24,220 - core.ocr_client - INFO - Starting OCR request d81263d3 for merged_20250917_143717_852_a3d2e62e.jpg (0.0MB)
2025-09-17 14:37:24,221 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:37:24,295 - core.ocr_client - ERROR - Non-retryable error for primary-ocr d81263d3: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:37:24,296 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:37:24,371 - core.ocr_client - ERROR - Non-retryable error for fallback-vision d81263d3: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "9eb6506b-ec62-438c-9d74-4b36a8253f0
2025-09-17 14:37:24,372 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:37:24,372 - core.ocr_queue - ERROR - Job ocr_F2_1758109037_5402f954 failed on attempt 3: OCR processing returned no result
2025-09-17 14:37:24,372 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758109037_5402f954)
2025-09-17 14:37:24,373 - core.ocr_queue - ERROR - Job ocr_F2_1758109037_5402f954 permanently failed: OCR processing returned no result
2025-09-17 14:37:27,839 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:37 MSK)" (scheduled at 2025-09-17 14:37:27.834735+03:00)
2025-09-17 14:37:27,840 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:27,840 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:37 MSK)" executed successfully
2025-09-17 14:37:37,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:47 MSK)" (scheduled at 2025-09-17 14:37:37.834735+03:00)
2025-09-17 14:37:37,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:37,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:47 MSK)" executed successfully
2025-09-17 14:37:47,847 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:38:17 MSK)" (scheduled at 2025-09-17 14:37:47.831733+03:00)
2025-09-17 14:37:47,847 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:57 MSK)" (scheduled at 2025-09-17 14:37:47.834735+03:00)
2025-09-17 14:37:47,848 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:38:17 MSK)" executed successfully
2025-09-17 14:37:47,848 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:47,849 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:37:57 MSK)" executed successfully
2025-09-17 14:37:57,835 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:07 MSK)" (scheduled at 2025-09-17 14:37:57.834735+03:00)
2025-09-17 14:37:57,836 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:37:57,836 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:07 MSK)" executed successfully
2025-09-17 14:38:02,846 - apscheduler.executors.default - INFO - Running job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:38:47 MSK)" (scheduled at 2025-09-17 14:38:02.833733+03:00)
2025-09-17 14:38:02,847 - apscheduler.executors.default - INFO - Job "Process F3 screenshots (trigger: interval[0:00:45], next run at: 2025-09-17 14:38:47 MSK)" executed successfully
2025-09-17 14:38:07,841 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:17 MSK)" (scheduled at 2025-09-17 14:38:07.834735+03:00)
2025-09-17 14:38:07,842 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:38:07,842 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:17 MSK)" executed successfully
2025-09-17 14:38:17,837 - apscheduler.executors.default - INFO - Running job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:38:47 MSK)" (scheduled at 2025-09-17 14:38:17.831733+03:00)
2025-09-17 14:38:17,837 - apscheduler.executors.default - INFO - Running job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:39:17 MSK)" (scheduled at 2025-09-17 14:38:17.832734+03:00)
2025-09-17 14:38:17,837 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:27 MSK)" (scheduled at 2025-09-17 14:38:17.834735+03:00)
2025-09-17 14:38:17,838 - apscheduler.executors.default - INFO - Job "Process F1 screenshots (trigger: interval[0:00:30], next run at: 2025-09-17 14:38:47 MSK)" executed successfully
2025-09-17 14:38:17,839 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:38:17,839 - core.image_processor - INFO - Processing 1 screenshots for F2
2025-09-17 14:38:17,839 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:27 MSK)" executed successfully
2025-09-17 14:38:17,854 - core.image_processor - INFO - Successfully merged 1 images into merged_20250917_143817_848_c109b5c9.jpg (285x400) in 0.015s
2025-09-17 14:38:17,856 - core.image_processor - WARNING - Failed to create backup for data\temp\screenshots\F2\F2_20250917_140651_783_5bc408d0.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png: [Errno 22] Invalid argument: 'data\\temp\\screenshots\\F2\\F2_20250917_140651_783_5bc408d0.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.backup.png'
2025-09-17 14:38:17,857 - core.image_processor - INFO - Cleaned up source files: 1 successful, 0 failed
2025-09-17 14:38:17,857 - core.database_manager - INFO - Created OCR session 54 for hotkey F2
2025-09-17 14:38:17,858 - utils.scheduler - INFO - Submitted OCR job ocr_F2_1758109097_b87dcc8a for F2 (session 54)
2025-09-17 14:38:17,858 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109097_b87dcc8a (attempt 1)
2025-09-17 14:38:17,858 - apscheduler.executors.default - INFO - Job "Process F2 screenshots (trigger: interval[0:01:00], next run at: 2025-09-17 14:39:17 MSK)" executed successfully
2025-09-17 14:38:17,858 - core.ocr_client - INFO - Starting OCR request 7fa37f02 for merged_20250917_143817_848_c109b5c9.jpg (0.0MB)
2025-09-17 14:38:17,859 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:38:17,944 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 7fa37f02: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:38:17,945 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:38:18,020 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 7fa37f02: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "dc1ef484-a475-4cb7-87ad-2ed04733c02
2025-09-17 14:38:18,021 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:38:18,021 - core.ocr_queue - ERROR - Job ocr_F2_1758109097_b87dcc8a failed on attempt 1: OCR processing returned no result
2025-09-17 14:38:18,022 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758109097_b87dcc8a for retry in 2s
2025-09-17 14:38:20,023 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109097_b87dcc8a (attempt 2)
2025-09-17 14:38:20,023 - core.ocr_client - INFO - Starting OCR request 6a2658d1 for merged_20250917_143817_848_c109b5c9.jpg (0.0MB)
2025-09-17 14:38:20,024 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:38:20,100 - core.ocr_client - ERROR - Non-retryable error for primary-ocr 6a2658d1: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:38:20,466 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:38:20,541 - core.ocr_client - ERROR - Non-retryable error for fallback-vision 6a2658d1: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "e928bed0-b164-4e7c-8880-4e5ad1b3636
2025-09-17 14:38:20,542 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:38:20,542 - core.ocr_queue - ERROR - Job ocr_F2_1758109097_b87dcc8a failed on attempt 2: OCR processing returned no result
2025-09-17 14:38:20,543 - core.ocr_queue - INFO - Requeuing job ocr_F2_1758109097_b87dcc8a for retry in 4s
2025-09-17 14:38:24,544 - core.ocr_queue - INFO - Worker OCRWorker-1 processing job ocr_F2_1758109097_b87dcc8a (attempt 3)
2025-09-17 14:38:24,544 - core.ocr_client - INFO - Starting OCR request e1b93a1d for merged_20250917_143817_848_c109b5c9.jpg (0.0MB)
2025-09-17 14:38:24,545 - core.ocr_client - INFO - Trying primary API: ocr format with bearer auth
2025-09-17 14:38:24,620 - core.ocr_client - ERROR - Non-retryable error for primary-ocr e1b93a1d: HTTP 401: {"error":{"grpcCode":16,"httpCode":401,"message":"You have to specify folder ID for user account","httpStatus":"Unauthorized","details":[]}}
2025-09-17 14:38:24,621 - core.ocr_client - INFO - Trying fallback API: vision format with api_key auth
2025-09-17 14:38:24,703 - core.ocr_client - ERROR - Non-retryable error for fallback-vision e1b93a1d: HTTP 401: {
 "code": 16,
 "message": "Unknown api key 't1.9****g-CQ (5D5537CA)'",
 "details": [
  {
   "@type": "type.googleapis.com/google.rpc.RequestInfo",
   "requestId": "3c9633b0-2302-4e3e-b671-02ced4cbce8
2025-09-17 14:38:24,704 - core.ocr_client - ERROR - Fallback API (vision) also failed
2025-09-17 14:38:24,704 - core.ocr_queue - ERROR - Job ocr_F2_1758109097_b87dcc8a failed on attempt 3: OCR processing returned no result
2025-09-17 14:38:24,704 - utils.scheduler - ERROR - OCR failed for F2: OCR processing returned no result (OCR job ocr_F2_1758109097_b87dcc8a)
2025-09-17 14:38:24,705 - core.ocr_queue - ERROR - Job ocr_F2_1758109097_b87dcc8a permanently failed: OCR processing returned no result
2025-09-17 14:38:27,849 - apscheduler.executors.default - INFO - Running job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:37 MSK)" (scheduled at 2025-09-17 14:38:27.834735+03:00)
2025-09-17 14:38:27,850 - utils.scheduler - INFO - Status check cycle completed: 0 transitions, 0 inactive combinations removed
2025-09-17 14:38:27,850 - apscheduler.executors.default - INFO - Job "Status check and transition cycle (trigger: interval[0:00:10], next run at: 2025-09-17 14:38:37 MSK)" executed successfully
2025-09-17 14:38:37,684 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 14:38:37,684 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 14:38:37,685 - main - INFO - Stopping task scheduler...
2025-09-17 14:38:37,685 - utils.scheduler - INFO - Stopping task scheduler
2025-09-17 14:38:37,686 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-09-17 14:38:37,686 - utils.scheduler - INFO - Task scheduler stopped
2025-09-17 14:38:37,687 - main - INFO - Stopping screenshot capture...
2025-09-17 14:38:37,687 - core.screenshot_capture - ERROR - Error closing MSS instance: '_thread._local' object has no attribute 'bmp'
2025-09-17 14:38:37,688 - core.screenshot_capture - INFO - Screenshot capture system stopped
2025-09-17 14:38:37,688 - main - INFO - Stopping OCR queue...
2025-09-17 14:38:37,688 - core.ocr_queue - INFO - Stopping OCR queue...
2025-09-17 14:38:38,153 - main - INFO - Received SIGINT, initiating shutdown...
2025-09-17 14:38:38,153 - main - INFO - Shutting down Market Monitoring System...
2025-09-17 14:38:38,154 - main - INFO - Stopping task scheduler...
2025-09-17 14:38:38,154 - main - INFO - Stopping screenshot capture...
2025-09-17 14:38:38,154 - main - INFO - Stopping OCR queue...
2025-09-17 14:38:38,155 - main - INFO - Closing OCR client...
2025-09-17 14:38:38,160 - core.ocr_client - INFO - OCR client closed
2025-09-17 14:38:38,161 - main - INFO - Closing database connections...
2025-09-17 14:38:38,161 - main - INFO - System shutdown completed
2025-09-17 14:38:38,162 - core.ocr_queue - INFO - OCR queue stopped
2025-09-17 14:38:38,163 - main - INFO - Closing OCR client...
2025-09-17 14:38:38,163 - core.ocr_client - INFO - OCR client closed
2025-09-17 14:38:38,163 - main - INFO - Closing database connections...
2025-09-17 14:38:38,164 - main - INFO - System shutdown completed
