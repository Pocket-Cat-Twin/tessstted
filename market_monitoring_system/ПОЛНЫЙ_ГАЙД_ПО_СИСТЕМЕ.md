# –ü–û–õ–ù–´–ô –ì–ê–ô–î –ü–û –°–ò–°–¢–ï–ú–ï –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –†–´–ù–ö–ê

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#–æ–ø–∏—Å–∞–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)  
3. [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
4. [–§—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ñ—É–Ω–∫—Ü–∏–∏-–∏-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
6. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏)
8. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
9. [–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)

---

## –û–ü–ò–°–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´

### –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä—ã–Ω–∫–∞** - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö —á–µ—Ä–µ–∑:

- üì∏ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞—Ö–≤–∞—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤** –ø–æ –≥–æ—Ä—è—á–∏–º –∫–ª–∞–≤–∏—à–∞–º
- üîç **OCR-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** —Å –ø–æ–º–æ—â—å—é Yandex Cloud API  
- üìä **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** (—Ü–µ–Ω—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –Ω–∞–∑–≤–∞–Ω–∏—è)
- üîÑ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìà **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω –∏ —Ç–æ–≤–∞—Ä–æ–≤
- ‚è∞ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ú–æ–¥—É–ª—å–Ω–∞—è Python-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ context managers –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å JSON –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- Retry-–ª–æ–≥–∏–∫–∞ –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–ë–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–∏:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (F1-F4) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞—Ö–≤–∞—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã  
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –°—Ç–∞—Ç—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (NEW ‚Üí CHECKED ‚Üí UNCHECKED)
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## –£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: –≤–µ—Ä—Å–∏—è 3.9 –∏–ª–∏ –≤—ã—à–µ
- **–û–°**: Windows, Linux, macOS
- **RAM**: –º–∏–Ω–∏–º—É–º 4GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB)
- **–î–∏—Å–∫**: 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç**: –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex OCR API

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd market_monitoring_system

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
python -c "import keyboard, mss, requests; print('–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ')"
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞ Yandex Cloud

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ [Yandex Cloud](https://cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç/–∫–∞—Ç–∞–ª–æ–≥
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å "Vision" (OCR)
4. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã"
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å —Ä–æ–ª—å—é `ai.vision.user`
   - –°–æ–∑–¥–∞–π—Ç–µ API-–∫–ª—é—á –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π API-–∫–ª—é—á

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `config.json`:

```json
{
    "yandex_ocr": {
        "api_key": "–í–êÿ¥_API_–ö–õ–Æ–ß_–ó–î–ï–°–¨",
        "api_url": "https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText"
    }
}
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
python src/main.py --test-only

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
python src/main.py --status
```

---

## –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´

### –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

#### 1. –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å config.json
python src/main.py

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ run.py
python run.py
```

#### 2. –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```bash
# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python src/main.py --config custom_config.json

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
python src/main.py --test-only

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
python src/main.py --status

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
python src/main.py --debug
```

#### 3. –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (Linux/macOS)
```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
nohup python src/main.py > system.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep main.py

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pkill -f main.py
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–≥–µ—Ä, —Ñ–∞–π–ª–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ API-–∫–ª—é—á–∞
3. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∏ –ª–æ–≥–æ–≤
4. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à**: F1-F4 –≤ —Å–∏—Å—Ç–µ–º–µ
5. **–ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
6. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ**: –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏–π –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à

---

## –§–£–ù–ö–¶–ò–ò –ò –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

#### 1. –ó–∞—Ö–≤–∞—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
```
F1 ‚Üí –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
F2 ‚Üí –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–æ–∫ (–∫–∞–∂–¥—ã–µ 60 —Å–µ–∫)  
F3 ‚Üí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∫–∞–∂–¥—ã–µ 45 —Å–µ–∫)
F4 ‚Üí –û–±–∑–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤ (–æ—Ç–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

#### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
- **OCR-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ**: Yandex Cloud API —Å fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: Regex-–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, —Ç–æ–≤–∞—Ä–æ–≤, —Ü–µ–Ω, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

#### 3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```
–¢–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- PRICE_INCREASE/DECREASE    ‚Üí –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω
- QUANTITY_INCREASE/DECREASE ‚Üí –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- NEW_ITEM                   ‚Üí –ü–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ITEM_REMOVED              ‚Üí –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
```

### –î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
```
–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø–∏—Å–µ–π:
NEW ‚Üí CHECKED ‚Üí UNCHECKED ‚Üí (—É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ —Ü–∏–∫–ª)
  ‚Üì      ‚Üì         ‚Üì
10–º–∏–Ω  10–º–∏–Ω    10–º–∏–Ω
```

#### –¢–∏–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **full**: –ü–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (—Ü–µ–Ω—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, ID —Ç–æ–≤–∞—Ä–æ–≤)
- **minimal**: –¢–æ–ª—å–∫–æ —Å–≤—è–∑–∫–∏ –ø—Ä–æ–¥–∞–≤–µ—Ü-—Ç–æ–≤–∞—Ä

#### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤**: –ü–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º –¥–ª—è –∫–∞–∂–¥–æ–π –∫–ª–∞–≤–∏—à–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤**: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Dual API –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: OCR API + Vision API (fallback)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry**: –î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **Rate limiting**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π API
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ê–≤—Ç–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –†–∞–∑–º–µ—Ä, –∫–∞—á–µ—Å—Ç–≤–æ, —Ñ–æ—Ä–º–∞—Ç –¥–ª—è OCR
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: JPG, PNG, PDF
- **–†–∞–∑–º–µ—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –î–æ 20MB –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ config.json

#### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
```json
"hotkeys": {
    "F1": {
        "area": [100, 100, 800, 600],     // –û–±–ª–∞—Å—Ç—å –∑–∞—Ö–≤–∞—Ç–∞ [x1,y1,x2,y2]
        "folder": "F1",                   // –ü–∞–ø–∫–∞ –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
        "merge_interval": 30,             // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å–µ–∫)
        "enabled": true,                  // –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–ª–∞–≤–∏—à–∞
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ",        // –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
        "screenshot_type": "individual_seller_items", // –¢–∏–ø –∑–∞—Ö–≤–∞—Ç–∞
        "processing_type": "full"         // –¢–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ (full/minimal)
    }
}
```

#### OCR –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```json
"yandex_ocr": {
    "api_key": "–í–ê–®_–ö–õ–Æ–ß",
    "api_url": "https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText",
    "max_retries": 3,                     // –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫
    "timeout": 30,                        // –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
    "retry_delay": 5,                     // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
    "max_image_size_mb": 20,              // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    "enable_fallback": true,              // –í–∫–ª—é—á–∏—Ç—å fallback API
    "primary_auth_method": "api_key"      // –ú–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
}
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```json
"monitoring": {
    "status_check_interval": 10,         // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (–º–∏–Ω)
    "cleanup_old_data_days": 30,         // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–Ω–∏)
    "max_screenshots_per_batch": 50,     // –ú–∞–∫—Å —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –≤ –ø–∞–∫–µ—Ç–µ
    "status_transition_delay": 10        // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (–º–∏–Ω)
}
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```json
"logging": {
    "level": "INFO",                     // –£—Ä–æ–≤–µ–Ω—å: DEBUG/INFO/WARNING/ERROR
    "max_log_size_mb": 100,              // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞
    "backup_count": 5,                   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ backup —Ñ–∞–π–ª–æ–≤
    "console_output": true               // –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π –∑–∞—Ö–≤–∞—Ç–∞

#### –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
   - **Windows**: Snipping Tool (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
   - **Linux**: GNOME Screenshot
   - **macOS**: Command+Shift+4

2. –§–æ—Ä–º–∞—Ç –æ–±–ª–∞—Å—Ç–∏: `[x1, y1, x2, y2]`
   - `x1, y1` - –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª
   - `x2, y2` - –ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª

#### –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```json
// –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω 1920x1080
"area": [0, 0, 1920, 1080]

// –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —ç–∫—Ä–∞–Ω–∞  
"area": [480, 270, 1440, 810]

// –õ–µ–≤–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞
"area": [0, 0, 960, 1080]
```

---

## –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü

#### `items` - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
```sql
CREATE TABLE items (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    seller_name TEXT NOT NULL,           -- –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞
    item_name TEXT NOT NULL,             -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    price REAL,                          -- –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞
    quantity INTEGER,                    -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
    item_id TEXT,                        -- ID —Ç–æ–≤–∞—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    hotkey TEXT NOT NULL,                -- –ö–∞–∫–∞—è –∫–ª–∞–≤–∏—à–∞ –∑–∞—Ö–≤–∞—Ç–∏–ª–∞
    processing_type TEXT,                -- –¢–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ (full/minimal)
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(seller_name, item_name),       -- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞
    INDEX(created_at)                    -- –ò–Ω–¥–µ–∫—Å –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
);
```

#### `sellers_current` - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
```sql
CREATE TABLE sellers_current (
    seller_name TEXT NOT NULL,
    item_name TEXT NOT NULL,
    quantity INTEGER,
    last_updated DATETIME,
    processing_type TEXT,
    status TEXT CHECK(status IN ('NEW', 'CHECKED', 'UNCHECKED')),
    status_changed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(seller_name, item_name),      -- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–∫–∏
    INDEX(status, status_changed_at)     -- –ò–Ω–¥–µ–∫—Å –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
);
```

#### `changes_log` - –õ–æ–≥ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
```sql
CREATE TABLE changes_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    seller_name TEXT NOT NULL,
    item_name TEXT NOT NULL,
    change_type TEXT CHECK(change_type IN (
        'PRICE_INCREASE', 'PRICE_DECREASE', 
        'QUANTITY_INCREASE', 'QUANTITY_DECREASE',
        'NEW_ITEM', 'ITEM_REMOVED'
    )),
    old_value TEXT,                      -- –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    new_value TEXT,                      -- –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    detected_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(seller_name, item_name),       -- –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É-—Ç–æ–≤–∞—Ä—É
    INDEX(detected_at)                   -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
);
```

#### `sales_log` - –õ–æ–≥ –ø—Ä–æ–¥–∞–∂ (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
```sql
CREATE TABLE sales_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    seller_name TEXT NOT NULL,
    item_name TEXT NOT NULL,
    price REAL,
    quantity INTEGER,
    sale_amount REAL,                    -- –°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏
    recorded_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### `ocr_sessions` - –°–µ—Å—Å–∏–∏ OCR –æ–±—Ä–∞–±–æ—Ç–∫–∏
```sql
CREATE TABLE ocr_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    hotkey TEXT NOT NULL,
    image_count INTEGER,
    processing_time_seconds REAL,
    success BOOLEAN,
    error_message TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### `monitoring_queue` - –û—á–µ—Ä–µ–¥—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```sql
CREATE TABLE monitoring_queue (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    hotkey TEXT NOT NULL,
    status TEXT CHECK(status IN ('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED')),
    processing_type TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    processed_at DATETIME,
    INDEX(status)
);
```

### –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

#### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```sql
-- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å
SELECT * FROM changes_log 
WHERE change_type LIKE 'PRICE_%' 
AND detected_at > datetime('now', '-1 day')
ORDER BY detected_at DESC;

-- –¢–æ–ø –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–æ–≤–∞—Ä–æ–≤
SELECT seller_name, COUNT(*) as items_count 
FROM sellers_current 
GROUP BY seller_name 
ORDER BY items_count DESC;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
SELECT status, COUNT(*) as count 
FROM sellers_current 
GROUP BY status;

-- –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
SELECT price, created_at 
FROM items 
WHERE seller_name = '–ü—Ä–æ–¥–∞–≤–µ—Ü' AND item_name = '–¢–æ–≤–∞—Ä'
ORDER BY created_at;
```

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î
```sql
-- –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü
SELECT name, 
       COUNT(*) as records,
       pg_size_pretty(pg_total_relation_size(relid)) as size
FROM pg_stat_user_tables;

-- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
DELETE FROM items WHERE created_at < datetime('now', '-30 days');
DELETE FROM changes_log WHERE detected_at < datetime('now', '-30 days');
DELETE FROM ocr_sessions WHERE created_at < datetime('now', '-30 days');
```

---

## –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò

### –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### –§–∞–π–ª—ã –ª–æ–≥–æ–≤
```
data/logs/
‚îú‚îÄ‚îÄ market_monitoring.log        # –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (—Ç–µ–∫—Å—Ç)
‚îú‚îÄ‚îÄ market_monitoring.json.log   # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)  
‚îú‚îÄ‚îÄ market_monitoring.log.1      # Backup —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ market_monitoring.log.2
‚îî‚îÄ‚îÄ ...
```

#### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **DEBUG**: –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **INFO**: –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã  
- **WARNING**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **ERROR**: –û—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è
- **CRITICAL**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏–µ —Å–∏—Å—Ç–µ–º—É

#### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤
```json
// JSON –ª–æ–≥
{
    "timestamp": "2024-01-15T10:30:45.123Z",
    "level": "INFO", 
    "component": "OCRClient",
    "message": "OCR processing completed successfully",
    "extra": {
        "hotkey": "F1",
        "processing_time": 2.34,
        "images_processed": 3,
        "text_length": 1247
    }
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
–°–∏—Å—Ç–µ–º–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
2. **OCR API**: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
3. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
4. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**: –°—Ç–∞—Ç—É—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
5. **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```python
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ OCR API
{
    "api_requests_total": 1547,
    "api_requests_successful": 1523,
    "api_requests_failed": 24,
    "success_rate": 98.45,
    "average_response_time": 2.1,
    "primary_api_usage": 1523,
    "fallback_api_usage": 0
}

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
{
    "images_processed": 4641,
    "merge_operations": 1547,
    "processing_errors": 12,
    "average_merge_time": 0.8,
    "disk_space_used_mb": 245.7
}
```

#### Health Check –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
python src/main.py --health-check

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
python src/main.py --stats

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å
grep ERROR data/logs/market_monitoring.log | tail -20
```

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è:

- **OCR API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** > 5 –º–∏–Ω—É—Ç
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞** > 2 –º–∏–Ω—É—Ç—ã  
- **–ù–µ—Ö–≤–∞—Ç–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ** < 1GB
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫** > 10% –∑–∞ —á–∞—Å
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏** > 15 –º–∏–Ω—É—Ç

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–í —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```json
"notifications": {
    "enabled": true,
    "critical_errors_only": true,
    "email": {
        "enabled": false,
        "smtp_server": "smtp.gmail.com",
        "smtp_port": 587,
        "username": "your_email@gmail.com", 
        "recipients": ["admin@company.com"]
    },
    "telegram": {
        "enabled": false,
        "bot_token": "YOUR_BOT_TOKEN",
        "chat_id": "YOUR_CHAT_ID"
    }
}
```

---

## –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ò–°–ü–†–ê–í–ù–û–°–¢–ï–ô

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. OCR API –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: `Unauthorized - check API key`
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á
python -c "
import requests
headers = {'Authorization': 'Api-Key YOUR_API_KEY'}
response = requests.post('https://ocr.api.cloud.yandex.net/ocr/v1/recognizeText', headers=headers)
print(f'Status: {response.status_code}')
"
```

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ `config.json`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –µ—Å—Ç—å —Ä–æ–ª—å `ai.vision.user`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –≤ Yandex Cloud –∫–æ–Ω—Å–æ–ª–∏

---

**–ü—Ä–æ–±–ª–µ–º–∞**: `Rate limit exceeded`
```
–û—à–∏–±–∫–∞: OCR API rate limit exceeded, retry in 60 seconds
```

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `retry_delay` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ OCR

#### 2. –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: `Failed to register hotkey F1`
```
ERROR: Could not register global hotkey F1: key already in use
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# Linux: –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –∫–ª–∞–≤–∏—à—É
sudo lsof | grep F1

# Windows: –∑–∞–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# –û–±—ã—á–Ω–æ: –∏–≥—Ä—ã, —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–∏ —ç–∫—Ä–∞–Ω–∞, –¥—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à

# –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–ª–∞–≤–∏—à—É –≤ config.json
"F1": {
    "enabled": false
}
```

---

**–ü—Ä–æ–±–ª–µ–º–∞**: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç
```
WARNING: Hotkey F1 registered but not responding
```

**–†–µ—à–µ–Ω–∏–µ**:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (Windows)
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞ (Linux)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (macOS)

#### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: `Database is locked`
```
ERROR: database is locked - another process may be using it
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ë–î
lsof database/market_data.db

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
pkill -f main.py

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
cp database/market_data.db.backup database/market_data.db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod 666 database/market_data.db
```

---

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```
WARNING: Database query took 15.2 seconds to complete
```

**–†–µ—à–µ–Ω–∏–µ**:
```sql
-- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
VACUUM;

-- –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã
REINDEX;

-- –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
EXPLAIN QUERY PLAN SELECT * FROM items WHERE seller_name = 'test';
```

#### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞**: `Image too large for OCR processing`
```
ERROR: Image size 25.4MB exceeds maximum allowed size 20MB
```

**–†–µ—à–µ–Ω–∏–µ**:
```json
// –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –≤ config.json
"yandex_ocr": {
    "max_image_size_mb": 30
}

// –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
"image_processing": {
    "max_image_width": 3000,
    "max_image_height": 6000,
    "jpeg_quality": 75
}
```

---

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
```
ERROR: No space left on device
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -rf data/temp/screenshots/*
rm -rf data/temp/merged/*

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
find data/logs -name "*.log.*" -mtime +7 -delete

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏ –≤ config.json
"monitoring": {
    "cleanup_old_data_days": 7,
    "max_log_files": 3
}
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

#### –°–∏—Å—Ç–µ–º–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python src/main.py --diagnose

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python src/main.py --validate-config

# –¢–µ—Å—Ç OCR API
python src/main.py --test-ocr

# –¢–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python src/main.py --test-db

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à  
python src/main.py --test-hotkeys
```

#### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
du -sh database/
du -sh data/logs/
du -sh data/temp/

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
top -p $(pgrep -f main.py)

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
grep "processing_time" data/logs/market_monitoring.json.log | tail -50
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ config.json)
rm -rf database/market_data.db
rm -rf data/temp/*
rm -rf data/logs/*

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
python src/main.py --restore-backup

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î
python src/main.py --init-database
```

---

## –†–ê–°–®–ò–†–ï–ù–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

#### –í CSV —Ñ–æ—Ä–º–∞—Ç
```python
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç export_csv.py
import sqlite3
import csv
from datetime import datetime

def export_items_to_csv():
    conn = sqlite3.connect('database/market_data.db')
    
    # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
    with open(f'items_export_{datetime.now().strftime("%Y%m%d")}.csv', 'w', newline='', encoding='utf-8') as f:
        writer = csv.writer(f)
        writer.writerow(['–ü—Ä–æ–¥–∞–≤–µ—Ü', '–¢–æ–≤–∞—Ä', '–¶–µ–Ω–∞', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ', '–í—Ä–µ–º—è'])
        
        cursor = conn.execute("""
            SELECT seller_name, item_name, price, quantity, created_at 
            FROM items 
            ORDER BY created_at DESC
        """)
        
        writer.writerows(cursor.fetchall())
    
    conn.close()
    print("–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")

if __name__ == "__main__":
    export_items_to_csv()
```

#### –í JSON —Ñ–æ—Ä–º–∞—Ç
```python
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç export_json.py
import sqlite3
import json
from datetime import datetime

def export_to_json():
    conn = sqlite3.connect('database/market_data.db')
    
    # –≠–∫—Å–ø–æ—Ä—Ç —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –ø—Ä–æ–¥–∞–≤—Ü–∞–º
    data = {}
    cursor = conn.execute("""
        SELECT seller_name, item_name, price, quantity, created_at 
        FROM items 
        ORDER BY seller_name, created_at DESC
    """)
    
    for row in cursor:
        seller, item, price, quantity, created = row
        if seller not in data:
            data[seller] = []
        
        data[seller].append({
            'item_name': item,
            'price': price,
            'quantity': quantity,
            'created_at': created
        })
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
    with open(f'market_data_{datetime.now().strftime("%Y%m%d")}.json', 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    
    conn.close()
    print("JSON —ç–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")

if __name__ == "__main__":
    export_to_json()
```

### –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã

#### –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```python
# analytics.py
import sqlite3
import matplotlib.pyplot as plt
from datetime import datetime, timedelta
import pandas as pd

def price_trends_analysis():
    conn = sqlite3.connect('database/market_data.db')
    
    # –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ —Ü–µ–Ω
    query = """
    SELECT seller_name, item_name, price, created_at
    FROM items 
    WHERE price IS NOT NULL 
    AND created_at > datetime('now', '-7 days')
    ORDER BY seller_name, item_name, created_at
    """
    
    df = pd.read_sql_query(query, conn)
    df['created_at'] = pd.to_datetime(df['created_at'])
    
    # –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –ø–æ –ø—Ä–æ–¥–∞–≤—Ü–∞–º
    plt.figure(figsize=(12, 8))
    for seller in df['seller_name'].unique()[:5]:  # –¢–æ–ø 5 –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
        seller_data = df[df['seller_name'] == seller]
        plt.plot(seller_data['created_at'], seller_data['price'], 
                label=seller, marker='o')
    
    plt.title('–¢—Ä–µ–Ω–¥—ã —Ü–µ–Ω –ø–æ –ø—Ä–æ–¥–∞–≤—Ü–∞–º (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)')
    plt.xlabel('–í—Ä–µ–º—è')
    plt.ylabel('–¶–µ–Ω–∞')
    plt.legend()
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.savefig('price_trends.png', dpi=300, bbox_inches='tight')
    plt.show()
    
    conn.close()

def changes_statistics():
    conn = sqlite3.connect('database/market_data.db')
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    query = """
    SELECT change_type, COUNT(*) as count
    FROM changes_log 
    WHERE detected_at > datetime('now', '-24 hours')
    GROUP BY change_type
    ORDER BY count DESC
    """
    
    cursor = conn.execute(query)
    results = cursor.fetchall()
    
    print("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞:")
    print("-" * 50)
    for change_type, count in results:
        print(f"{change_type}: {count}")
    
    conn.close()

if __name__ == "__main__":
    print("1. –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ —Ü–µ–Ω")
    print("2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π")
    choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é (1-2): ")
    
    if choice == "1":
        price_trends_analysis()
    elif choice == "2":
        changes_statistics()
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
# webhook_notifier.py
import requests
import json
from datetime import datetime

class WebhookNotifier:
    def __init__(self, webhook_url):
        self.webhook_url = webhook_url
    
    def send_price_alert(self, seller, item, old_price, new_price):
        data = {
            "timestamp": datetime.now().isoformat(),
            "type": "price_change",
            "seller": seller,
            "item": item,
            "old_price": old_price,
            "new_price": new_price,
            "change_percent": ((new_price - old_price) / old_price) * 100
        }
        
        try:
            response = requests.post(
                self.webhook_url, 
                json=data,
                headers={"Content-Type": "application/json"},
                timeout=10
            )
            return response.status_code == 200
        except Exception as e:
            print(f"Webhook error: {e}")
            return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
webhook = WebhookNotifier("https://your-webhook-url.com/alerts")
# –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã:
# webhook.send_price_alert("–ü—Ä–æ–¥–∞–≤–µ—Ü1", "–¢–æ–≤–∞—Ä1", 100.0, 120.0)
```

#### Telegram –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```python
# telegram_bot.py
import requests
import json

class TelegramNotifier:
    def __init__(self, bot_token, chat_id):
        self.bot_token = bot_token
        self.chat_id = chat_id
        self.api_url = f"https://api.telegram.org/bot{bot_token}"
    
    def send_message(self, message):
        url = f"{self.api_url}/sendMessage"
        data = {
            "chat_id": self.chat_id,
            "text": message,
            "parse_mode": "HTML"
        }
        
        try:
            response = requests.post(url, data=data, timeout=10)
            return response.status_code == 200
        except Exception as e:
            print(f"Telegram error: {e}")
            return False
    
    def send_price_alert(self, seller, item, old_price, new_price):
        change_percent = ((new_price - old_price) / old_price) * 100
        emoji = "üìà" if new_price > old_price else "üìâ"
        
        message = f"""
{emoji} <b>–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã</b>

<b>–ü—Ä–æ–¥–∞–≤–µ—Ü:</b> {seller}
<b>–¢–æ–≤–∞—Ä:</b> {item}
<b>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞:</b> {old_price:.2f}
<b>–ù–æ–≤–∞—è —Ü–µ–Ω–∞:</b> {new_price:.2f}
<b>–ò–∑–º–µ–Ω–µ–Ω–∏–µ:</b> {change_percent:+.1f}%
        """
        
        return self.send_message(message)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.json:
# "telegram": {
#     "bot_token": "YOUR_BOT_TOKEN",
#     "chat_id": "YOUR_CHAT_ID",
#     "price_change_threshold": 10.0
# }
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
```python
# extended_scheduler.py
from apscheduler.schedulers.background import BackgroundScheduler
from apscheduler.triggers.cron import CronTrigger
import sqlite3
from datetime import datetime, timedelta

def advanced_data_cleanup():
    """–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö"""
    conn = sqlite3.connect('database/market_data.db')
    
    # –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
    conn.execute("""
        DELETE FROM items WHERE id NOT IN (
            SELECT MIN(id) FROM items 
            GROUP BY seller_name, item_name, price, quantity, created_at
        )
    """)
    
    # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
    archive_date = datetime.now() - timedelta(days=90)
    conn.execute("""
        INSERT INTO items_archive 
        SELECT * FROM items WHERE created_at < ?
    """, (archive_date,))
    
    conn.execute("DELETE FROM items WHERE created_at < ?", (archive_date,))
    
    conn.commit()
    conn.close()
    print("–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞")

def generate_daily_report():
    """–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç"""
    conn = sqlite3.connect('database/market_data.db')
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–µ–Ω—å
    today = datetime.now().date()
    cursor = conn.execute("""
        SELECT 
            COUNT(DISTINCT seller_name) as sellers,
            COUNT(*) as items,
            AVG(price) as avg_price
        FROM items 
        WHERE DATE(created_at) = DATE('now')
    """)
    
    stats = cursor.fetchone()
    
    report = f"""
–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç - {today}
==============================
–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤: {stats[0]}
–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: {stats[1]}
–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: {stats[2]:.2f}
    """
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
    with open(f'reports/daily_report_{today}.txt', 'w', encoding='utf-8') as f:
        f.write(report)
    
    conn.close()
    print("–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
def setup_extended_scheduler():
    scheduler = BackgroundScheduler()
    
    # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 4:00
    scheduler.add_job(
        advanced_data_cleanup,
        CronTrigger(day_of_week=6, hour=4, minute=0),
        id='advanced_cleanup'
    )
    
    # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –≤ 23:55
    scheduler.add_job(
        generate_daily_report,
        CronTrigger(hour=23, minute=55),
        id='daily_report'
    )
    
    scheduler.start()
    return scheduler
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_items_seller_created ON items(seller_name, created_at);
CREATE INDEX idx_items_price_range ON items(price) WHERE price IS NOT NULL;
CREATE INDEX idx_changes_detected ON changes_log(detected_at);

-- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã items –ø–æ –º–µ—Å—è—Ü–∞–º (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤)
CREATE TABLE items_2024_01 AS SELECT * FROM items WHERE created_at >= '2024-01-01' AND created_at < '2024-02-01';
CREATE TABLE items_2024_02 AS SELECT * FROM items WHERE created_at >= '2024-02-01' AND created_at < '2024-03-01';
-- –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ...

-- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤  
CREATE VIEW sellers_summary AS
SELECT 
    seller_name,
    COUNT(*) as total_items,
    AVG(price) as avg_price,
    MAX(created_at) as last_seen
FROM items 
GROUP BY seller_name;
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
```json
{
    "performance": {
        "max_concurrent_ocr_requests": 5,
        "database_connection_pool_size": 10,
        "image_processing_threads": 3,
        "batch_processing_size": 100,
        "cache_size_mb": 256,
        "enable_async_processing": true
    },
    "monitoring": {
        "performance_logging": true,
        "memory_usage_alerts": true,
        "cpu_usage_threshold": 80,
        "disk_usage_threshold": 90
    }
}
```

---

–≠—Ç–æ—Ç –ø–æ–ª–Ω—ã–π –≥–∞–π–¥ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä—ã–Ω–∫–∞ - –æ—Ç –±–∞–∑–æ–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.